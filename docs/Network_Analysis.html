<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="solar-san">

<title>EM 1422, Ca’ Foscari University of Venice</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="Network_Analysis_files/libs/clipboard/clipboard.min.js"></script>
<script src="Network_Analysis_files/libs/quarto-html/quarto.js"></script>
<script src="Network_Analysis_files/libs/quarto-html/popper.min.js"></script>
<script src="Network_Analysis_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Network_Analysis_files/libs/quarto-html/anchor.min.js"></script>
<link href="Network_Analysis_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Network_Analysis_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Network_Analysis_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Network_Analysis_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Network_Analysis_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
<link href="https://fonts.googleapis.com/css2?family=Atkinson+Hyperlegible:ital,wght@0,400;0,700;1,400;1,700&amp;family=Fira+Code&amp;display=swap" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#intro-network-theory" id="toc-intro-network-theory" class="nav-link active" data-scroll-target="#intro-network-theory">Intro: Network Theory</a></li>
  <li><a href="#networks-and-complex-systems" id="toc-networks-and-complex-systems" class="nav-link" data-scroll-target="#networks-and-complex-systems">Networks and complex systems</a></li>
  <li><a href="#graph-networks" id="toc-graph-networks" class="nav-link" data-scroll-target="#graph-networks">Graph &amp; Networks</a></li>
  <li><a href="#computational-representations-of-a-network" id="toc-computational-representations-of-a-network" class="nav-link" data-scroll-target="#computational-representations-of-a-network">Computational representations of a network</a>
  <ul class="collapse">
  <li><a href="#adjacency-matrix" id="toc-adjacency-matrix" class="nav-link" data-scroll-target="#adjacency-matrix">Adjacency matrix:</a></li>
  <li><a href="#edge-list" id="toc-edge-list" class="nav-link" data-scroll-target="#edge-list">Edge list</a></li>
  <li><a href="#node-list" id="toc-node-list" class="nav-link" data-scroll-target="#node-list">Node list:</a></li>
  <li><a href="#subgraphs" id="toc-subgraphs" class="nav-link" data-scroll-target="#subgraphs">Subgraphs</a></li>
  </ul></li>
  <li><a href="#networks-in-r" id="toc-networks-in-r" class="nav-link" data-scroll-target="#networks-in-r">Networks in <code>R</code></a>
  <ul class="collapse">
  <li><a href="#how-to-work-with-edge-lists" id="toc-how-to-work-with-edge-lists" class="nav-link" data-scroll-target="#how-to-work-with-edge-lists">How to work with edge lists</a></li>
  </ul></li>
  <li><a href="#data-visualization-how-to-study-networks" id="toc-data-visualization-how-to-study-networks" class="nav-link" data-scroll-target="#data-visualization-how-to-study-networks">Data visualization: how to study networks</a>
  <ul class="collapse">
  <li><a href="#optimization-algorithms" id="toc-optimization-algorithms" class="nav-link" data-scroll-target="#optimization-algorithms">Optimization algorithms</a></li>
  <li><a href="#plotting-graphs-in-r" id="toc-plotting-graphs-in-r" class="nav-link" data-scroll-target="#plotting-graphs-in-r">Plotting graphs in <code>R</code></a></li>
  <li><a href="#using-a-nominal-attribute-to-generate-coordinates" id="toc-using-a-nominal-attribute-to-generate-coordinates" class="nav-link" data-scroll-target="#using-a-nominal-attribute-to-generate-coordinates">Using a nominal attribute to generate coordinates</a></li>
  <li><a href="#plotting-with-optimization-algorithms" id="toc-plotting-with-optimization-algorithms" class="nav-link" data-scroll-target="#plotting-with-optimization-algorithms">Plotting with optimization algorithms</a></li>
  <li><a href="#embedding-node-attributes" id="toc-embedding-node-attributes" class="nav-link" data-scroll-target="#embedding-node-attributes">Embedding node attributes</a></li>
  </ul></li>
  <li><a href="#representing-valued-networks" id="toc-representing-valued-networks" class="nav-link" data-scroll-target="#representing-valued-networks">Representing valued networks</a></li>
  <li><a href="#statistical-properties-of-networks" id="toc-statistical-properties-of-networks" class="nav-link" data-scroll-target="#statistical-properties-of-networks">Statistical properties of networks</a>
  <ul class="collapse">
  <li><a href="#monadic" id="toc-monadic" class="nav-link" data-scroll-target="#monadic">Monadic</a></li>
  <li><a href="#dyadic" id="toc-dyadic" class="nav-link" data-scroll-target="#dyadic">Dyadic</a>
  <ul class="collapse">
  <li><a href="#counting-paths-between-nodes" id="toc-counting-paths-between-nodes" class="nav-link" data-scroll-target="#counting-paths-between-nodes">Counting paths between nodes</a></li>
  <li><a href="#geodesic-paths" id="toc-geodesic-paths" class="nav-link" data-scroll-target="#geodesic-paths">Geodesic Paths</a></li>
  <li><a href="#distance-in-digraphs" id="toc-distance-in-digraphs" class="nav-link" data-scroll-target="#distance-in-digraphs">Distance in Digraphs</a></li>
  <li><a href="#how-to-find-the-shortest-path" id="toc-how-to-find-the-shortest-path" class="nav-link" data-scroll-target="#how-to-find-the-shortest-path">How to find the shortest path?</a></li>
  <li><a href="#connected-components" id="toc-connected-components" class="nav-link" data-scroll-target="#connected-components">Connected components</a></li>
  <li><a href="#laplacian-matrix" id="toc-laplacian-matrix" class="nav-link" data-scroll-target="#laplacian-matrix">Laplacian Matrix</a></li>
  <li><a href="#connectivity" id="toc-connectivity" class="nav-link" data-scroll-target="#connectivity">Connectivity</a></li>
  </ul></li>
  <li><a href="#triadic-characteristics" id="toc-triadic-characteristics" class="nav-link" data-scroll-target="#triadic-characteristics">Triadic characteristics</a>
  <ul class="collapse">
  <li><a href="#triadic-closure" id="toc-triadic-closure" class="nav-link" data-scroll-target="#triadic-closure">Triadic closure</a></li>
  <li><a href="#triadic-balance" id="toc-triadic-balance" class="nav-link" data-scroll-target="#triadic-balance">Triadic balance</a></li>
  </ul></li>
  <li><a href="#assortativity" id="toc-assortativity" class="nav-link" data-scroll-target="#assortativity">Assortativity</a></li>
  <li><a href="#why-are-these-measures-important" id="toc-why-are-these-measures-important" class="nav-link" data-scroll-target="#why-are-these-measures-important">Why are these measures important?</a></li>
  </ul></li>
  <li><a href="#centrality" id="toc-centrality" class="nav-link" data-scroll-target="#centrality">Centrality</a>
  <ul class="collapse">
  <li><a href="#degree-centrality" id="toc-degree-centrality" class="nav-link" data-scroll-target="#degree-centrality">Degree centrality</a>
  <ul class="collapse">
  <li><a href="#normalize-degree-centrality" id="toc-normalize-degree-centrality" class="nav-link" data-scroll-target="#normalize-degree-centrality">Normalize degree centrality</a></li>
  <li><a href="#closeness-centrality" id="toc-closeness-centrality" class="nav-link" data-scroll-target="#closeness-centrality">Closeness centrality</a></li>
  <li><a href="#betweenness-centrality" id="toc-betweenness-centrality" class="nav-link" data-scroll-target="#betweenness-centrality">Betweenness centrality</a></li>
  <li><a href="#flow-betweenness-centrality" id="toc-flow-betweenness-centrality" class="nav-link" data-scroll-target="#flow-betweenness-centrality">Flow betweenness centrality</a></li>
  <li><a href="#edge-betweenness-centrality" id="toc-edge-betweenness-centrality" class="nav-link" data-scroll-target="#edge-betweenness-centrality">Edge betweenness centrality</a></li>
  </ul></li>
  <li><a href="#centralities-a-comparison" id="toc-centralities-a-comparison" class="nav-link" data-scroll-target="#centralities-a-comparison">Centralities: a comparison</a></li>
  <li><a href="#connectivity-based-centralities" id="toc-connectivity-based-centralities" class="nav-link" data-scroll-target="#connectivity-based-centralities">Connectivity based centralities</a>
  <ul class="collapse">
  <li><a href="#eigenvectors-centrality" id="toc-eigenvectors-centrality" class="nav-link" data-scroll-target="#eigenvectors-centrality">Eigenvectors centrality</a></li>
  <li><a href="#katz-centrality" id="toc-katz-centrality" class="nav-link" data-scroll-target="#katz-centrality">Katz centrality</a></li>
  <li><a href="#pagerank" id="toc-pagerank" class="nav-link" data-scroll-target="#pagerank">PageRank</a></li>
  <li><a href="#wrap-up" id="toc-wrap-up" class="nav-link" data-scroll-target="#wrap-up">Wrap up</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#network-statistics-in-r" id="toc-network-statistics-in-r" class="nav-link" data-scroll-target="#network-statistics-in-r">Network statistics in <code>R</code></a>
  <ul class="collapse">
  <li><a href="#centrality-measures-and-their-relationships" id="toc-centrality-measures-and-their-relationships" class="nav-link" data-scroll-target="#centrality-measures-and-their-relationships">Centrality measures and their relationships</a></li>
  </ul></li>
  <li><a href="#degree-distribution-and-network-types" id="toc-degree-distribution-and-network-types" class="nav-link" data-scroll-target="#degree-distribution-and-network-types">Degree distribution and network types</a></li>
  <li><a href="#characterizing-real-networks" id="toc-characterizing-real-networks" class="nav-link" data-scroll-target="#characterizing-real-networks">Characterizing real networks</a></li>
  <li><a href="#random-graphs" id="toc-random-graphs" class="nav-link" data-scroll-target="#random-graphs">Random graphs</a>
  <ul class="collapse">
  <li><a href="#the-degree-distribution" id="toc-the-degree-distribution" class="nav-link" data-scroll-target="#the-degree-distribution">The degree distribution</a></li>
  <li><a href="#clustering" id="toc-clustering" class="nav-link" data-scroll-target="#clustering">Clustering</a></li>
  <li><a href="#average-shortest-path" id="toc-average-shortest-path" class="nav-link" data-scroll-target="#average-shortest-path">Average shortest path</a></li>
  <li><a href="#emergence-of-a-giant-component" id="toc-emergence-of-a-giant-component" class="nav-link" data-scroll-target="#emergence-of-a-giant-component">Emergence of a giant component</a></li>
  <li><a href="#patterns-in-random-networks" id="toc-patterns-in-random-networks" class="nav-link" data-scroll-target="#patterns-in-random-networks">Patterns in random networks</a></li>
  <li><a href="#degrees-of-separation" id="toc-degrees-of-separation" class="nav-link" data-scroll-target="#degrees-of-separation">6 degrees of separation</a></li>
  <li><a href="#small-world" id="toc-small-world" class="nav-link" data-scroll-target="#small-world">Small world</a>
  <ul class="collapse">
  <li><a href="#weak-ties" id="toc-weak-ties" class="nav-link" data-scroll-target="#weak-ties">Weak Ties</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#scale-free-networks" id="toc-scale-free-networks" class="nav-link" data-scroll-target="#scale-free-networks">Scale-free networks</a>
  <ul class="collapse">
  <li><a href="#the-size-of-the-largest-hub" id="toc-the-size-of-the-largest-hub" class="nav-link" data-scroll-target="#the-size-of-the-largest-hub">The size of the largest hub</a></li>
  <li><a href="#preferential-attachment" id="toc-preferential-attachment" class="nav-link" data-scroll-target="#preferential-attachment">Preferential attachment</a></li>
  <li><a href="#robustness-to-errors-and-attacks" id="toc-robustness-to-errors-and-attacks" class="nav-link" data-scroll-target="#robustness-to-errors-and-attacks">Robustness to errors and attacks</a></li>
  </ul></li>
  <li><a href="#community-detection" id="toc-community-detection" class="nav-link" data-scroll-target="#community-detection">Community detection</a>
  <ul class="collapse">
  <li><a href="#implicit-communities" id="toc-implicit-communities" class="nav-link" data-scroll-target="#implicit-communities">Implicit communities</a></li>
  <li><a href="#communities-and-graphs" id="toc-communities-and-graphs" class="nav-link" data-scroll-target="#communities-and-graphs">Communities and graphs</a></li>
  <li><a href="#community-discovery" id="toc-community-discovery" class="nav-link" data-scroll-target="#community-discovery">Community discovery</a></li>
  <li><a href="#fundamental-assumptions" id="toc-fundamental-assumptions" class="nav-link" data-scroll-target="#fundamental-assumptions">Fundamental assumptions</a></li>
  <li><a href="#internal-density" id="toc-internal-density" class="nav-link" data-scroll-target="#internal-density">Internal density</a></li>
  <li><a href="#modularity" id="toc-modularity" class="nav-link" data-scroll-target="#modularity">Modularity</a>
  <ul class="collapse">
  <li><a href="#louvain" id="toc-louvain" class="nav-link" data-scroll-target="#louvain">Louvain</a></li>
  </ul></li>
  <li><a href="#bridge-detection" id="toc-bridge-detection" class="nav-link" data-scroll-target="#bridge-detection">Bridge detection</a>
  <ul class="collapse">
  <li><a href="#girvan-newman" id="toc-girvan-newman" class="nav-link" data-scroll-target="#girvan-newman">Girvan-Newman</a></li>
  <li><a href="#density-versus-bridges" id="toc-density-versus-bridges" class="nav-link" data-scroll-target="#density-versus-bridges">Density versus Bridges</a></li>
  </ul></li>
  <li><a href="#feature-distance" id="toc-feature-distance" class="nav-link" data-scroll-target="#feature-distance">Feature distance</a></li>
  <li><a href="#percolation" id="toc-percolation" class="nav-link" data-scroll-target="#percolation">Percolation</a>
  <ul class="collapse">
  <li><a href="#label-propagation" id="toc-label-propagation" class="nav-link" data-scroll-target="#label-propagation">Label propagation</a></li>
  </ul></li>
  <li><a href="#entity-closeness" id="toc-entity-closeness" class="nav-link" data-scroll-target="#entity-closeness">Entity closeness</a>
  <ul class="collapse">
  <li><a href="#infomap" id="toc-infomap" class="nav-link" data-scroll-target="#infomap">InfoMap</a></li>
  </ul></li>
  <li><a href="#structure-definition" id="toc-structure-definition" class="nav-link" data-scroll-target="#structure-definition">Structure definition</a>
  <ul class="collapse">
  <li><a href="#k-cliques" id="toc-k-cliques" class="nav-link" data-scroll-target="#k-cliques">k-cliques</a></li>
  </ul></li>
  <li><a href="#peculiar-topologies" id="toc-peculiar-topologies" class="nav-link" data-scroll-target="#peculiar-topologies">Peculiar topologies</a>
  <ul class="collapse">
  <li><a href="#community-evaluation-strategies" id="toc-community-evaluation-strategies" class="nav-link" data-scroll-target="#community-evaluation-strategies">Community evaluation strategies</a></li>
  <li><a href="#external-evaluation" id="toc-external-evaluation" class="nav-link" data-scroll-target="#external-evaluation">External Evaluation</a></li>
  </ul></li>
  <li><a href="#r-code-for-communities-detection" id="toc-r-code-for-communities-detection" class="nav-link" data-scroll-target="#r-code-for-communities-detection"><code>R</code> code for communities detection</a></li>
  </ul></li>
  <li><a href="#inferential-statistics-for-complete-networks" id="toc-inferential-statistics-for-complete-networks" class="nav-link" data-scroll-target="#inferential-statistics-for-complete-networks">Inferential statistics for complete networks</a>
  <ul class="collapse">
  <li><a href="#level-of-analysis" id="toc-level-of-analysis" class="nav-link" data-scroll-target="#level-of-analysis">Level of analysis</a></li>
  <li><a href="#statistical-testing-at-group-level" id="toc-statistical-testing-at-group-level" class="nav-link" data-scroll-target="#statistical-testing-at-group-level">Statistical testing at group level</a>
  <ul class="collapse">
  <li><a href="#permutation-or-randomization-test" id="toc-permutation-or-randomization-test" class="nav-link" data-scroll-target="#permutation-or-randomization-test">Permutation or randomization test</a></li>
  </ul></li>
  <li><a href="#statistical-tests-at-the-node-level" id="toc-statistical-tests-at-the-node-level" class="nav-link" data-scroll-target="#statistical-tests-at-the-node-level">Statistical tests at the node level</a>
  <ul class="collapse">
  <li><a href="#network-autocorrelation" id="toc-network-autocorrelation" class="nav-link" data-scroll-target="#network-autocorrelation">Network autocorrelation</a></li>
  </ul></li>
  <li><a href="#statistical-testing-at-the-dyad-level" id="toc-statistical-testing-at-the-dyad-level" class="nav-link" data-scroll-target="#statistical-testing-at-the-dyad-level">Statistical testing at the dyad level</a>
  <ul class="collapse">
  <li><a href="#quadratic-assignment-problem" id="toc-quadratic-assignment-problem" class="nav-link" data-scroll-target="#quadratic-assignment-problem">Quadratic Assignment Problem</a></li>
  <li><a href="#how-are-permutation-are-performed" id="toc-how-are-permutation-are-performed" class="nav-link" data-scroll-target="#how-are-permutation-are-performed">How are permutation are performed?</a></li>
  <li><a href="#qap-regressions" id="toc-qap-regressions" class="nav-link" data-scroll-target="#qap-regressions">QAP regressions</a></li>
  </ul></li>
  <li><a href="#network-inference-in-r" id="toc-network-inference-in-r" class="nav-link" data-scroll-target="#network-inference-in-r">Network inference in <code>R</code></a></li>
  </ul></li>
  <li><a href="#systemic-risk" id="toc-systemic-risk" class="nav-link" data-scroll-target="#systemic-risk">Systemic risk</a>
  <ul class="collapse">
  <li><a href="#interbank-networks-and-their-properties" id="toc-interbank-networks-and-their-properties" class="nav-link" data-scroll-target="#interbank-networks-and-their-properties">Interbank networks and their properties</a>
  <ul class="collapse">
  <li><a href="#core-periphery-network" id="toc-core-periphery-network" class="nav-link" data-scroll-target="#core-periphery-network">Core-periphery network</a></li>
  </ul></li>
  <li><a href="#models-of-shock-propagation" id="toc-models-of-shock-propagation" class="nav-link" data-scroll-target="#models-of-shock-propagation">Models of shock propagation</a>
  <ul class="collapse">
  <li><a href="#default-contagion" id="toc-default-contagion" class="nav-link" data-scroll-target="#default-contagion">Default contagion</a></li>
  <li><a href="#distress-contagion" id="toc-distress-contagion" class="nav-link" data-scroll-target="#distress-contagion">Distress contagion</a></li>
  <li><a href="#ranking-banks-impact-and-vulnerabilty" id="toc-ranking-banks-impact-and-vulnerabilty" class="nav-link" data-scroll-target="#ranking-banks-impact-and-vulnerabilty">Ranking banks: impact and vulnerabilty</a></li>
  <li><a href="#contagion-due-to-overlapping-portfolios" id="toc-contagion-due-to-overlapping-portfolios" class="nav-link" data-scroll-target="#contagion-due-to-overlapping-portfolios">Contagion due to overlapping portfolios</a></li>
  <li><a href="#generational-propagation" id="toc-generational-propagation" class="nav-link" data-scroll-target="#generational-propagation">Generational propagation</a></li>
  </ul></li>
  <li><a href="#combination-of-contagion-mechanisms" id="toc-combination-of-contagion-mechanisms" class="nav-link" data-scroll-target="#combination-of-contagion-mechanisms">Combination of contagion mechanisms</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul></li>
  <li><a href="#exponential-random-graph-models-and-stochastic-actors-oriented-models" id="toc-exponential-random-graph-models-and-stochastic-actors-oriented-models" class="nav-link" data-scroll-target="#exponential-random-graph-models-and-stochastic-actors-oriented-models">Exponential random graph models and stochastic actors oriented models</a>
  <ul class="collapse">
  <li><a href="#ergms" id="toc-ergms" class="nav-link" data-scroll-target="#ergms">ERGMs</a></li>
  <li><a href="#types-of-effect" id="toc-types-of-effect" class="nav-link" data-scroll-target="#types-of-effect">Types of effect</a>
  <ul class="collapse">
  <li><a href="#example-toy-model" id="toc-example-toy-model" class="nav-link" data-scroll-target="#example-toy-model">Example: toy model</a></li>
  </ul></li>
  <li><a href="#maximum-likelihood-estimations-for-ergms" id="toc-maximum-likelihood-estimations-for-ergms" class="nav-link" data-scroll-target="#maximum-likelihood-estimations-for-ergms">Maximum likelihood estimations for ERGMs</a>
  <ul class="collapse">
  <li><a href="#markov-chain-approach" id="toc-markov-chain-approach" class="nav-link" data-scroll-target="#markov-chain-approach">Markov chain approach</a></li>
  <li><a href="#parameter-selection" id="toc-parameter-selection" class="nav-link" data-scroll-target="#parameter-selection">Parameter selection</a></li>
  </ul></li>
  <li><a href="#goodness-of-fit" id="toc-goodness-of-fit" class="nav-link" data-scroll-target="#goodness-of-fit">Goodness of fit</a></li>
  <li><a href="#ergms-in-r" id="toc-ergms-in-r" class="nav-link" data-scroll-target="#ergms-in-r">ERGMs in <code>R</code></a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">EM 1422, Ca’ Foscari University of Venice</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>solar-san </p>
          </div>
  </div>
    
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">September 26, 2023</p>
    </div>
  </div>
    
  </div>
  

</header>

<p><img src="header/NA-Notes_header.png" class="img-fluid"></p>
<hr>
<blockquote class="blockquote">
<p><strong>DISCLAIMER</strong>:</p>
<p>This are personal notes taken while following the lesson of the course in <em>Network Analytics</em>, EM 1422, at Ca’ Foscari University of Venice. Any mistake made is mine: as you might expect, student notes <em>are not</em> peer reviewed and/or endorsed as official materials. I do not own any rights on this material. Feel free to write me at <strong>solar-san@pm.me</strong> if you spot mistakes or have any suggestions. The source code is freely available at <a href="https://github.com/solar-san">GitHub.com</a>. Please share, comment, and leave a star if you use these notes!</p>
</blockquote>
<ul>
<li>Most of the <code>R</code> code is taken from the required textbook, <a href="https://uk.sagepub.com/en-gb/eur/analyzing-social-networks-using-r/book271675"><em>Analyzing Social Networks using <code>R</code></em></a>. The companion website contains useful resources and all code can be retrieved from <a href="https://sites.google.com/view/asnr-2022/home">the companion website</a>.</li>
<li>The pictures and tables in the <a href="https://solar-san.github.io/NA-Notes/docs/Network_Analysis.html#centrality"><strong>Centrality</strong></a> and <a href="https://solar-san.github.io/NA-Notes/docs/Network_Analysis.html#centrality"><strong>Dyadic</strong></a> sections are taken from <a href="https://www.unive.it/data/persone/11535404">prof. Giorgia Minello</a> materials for a course about networks.</li>
</ul>
<p>A special thanks to <a href="https://www.simonerighi.com">prof. Righi</a>, for this awesome course and for allowing me to make this material freely available online.</p>
<p>The final project for this course is available at <a href="">this link</a>.</p>
<section id="intro-network-theory" class="level1">
<h1>Intro: Network Theory</h1>
<blockquote class="blockquote">
<p><strong>First and foremost: <em>network theory</em> is a interdisciplinary science that can be applied in a wide variety of contexts and disciplines, such as <em>archaeology</em>, <em>engineering</em>, <em>social sciences</em>, <em>biology</em>. Networks have properties encoded in their structure that limit or enhance their behaviour.</strong></p>
</blockquote>
<p><em>Measure</em>: it regards <em>information</em> and how it moves across a network. Everything interesting about networks consists in the <em>flow</em> of information: it is therefore of primary interest for social scientists.</p>
<p>For sufficiently small networks, plotting is an essential first step in its analysis; for large networks, only statistical representations are possible.</p>
<p>The point of arrival is to be able to compute <em>p-values</em> (null networks) and meaningful <em>regressions</em> (econometric of networks) on networks.</p>
<blockquote class="blockquote">
<p><strong>What is a network?</strong></p>
<p><strong>It is an abstract representation of interactions between discrete (separated from each others) entities. It is then a model: a simplification of reality.</strong></p>
</blockquote>
<p>These entities are represented as <em>nodes</em>: we abstract from any not important characteristics of these entities and conceptualize them as points. These nodes can be connected; such connections are conceptualized by <em>ties</em> or <em>edges</em>. These can be of many different classes or types (e.g.: reciprocated or not).</p>
<p>Ties and nodes can have a set of <em>attributes</em>; they do not concern the network itself, but are nonetheless characteristics of them. They can be anyhow interesting, even as influences and determinants of the strength, presence or other features of network relations and nodes behaviour.</p>
<blockquote class="blockquote">
<p><strong>We are modelling complex systems: we first need to know how their components interact with each other. A <em>network</em> is a catalogue of a system components (<em>nodes</em>, <em>vertices</em>) and the interaction between them (<em>link</em>, <em>edges</em>). The two main features in such a model are <em>attributes</em> and <em>networks</em>. These characteristics are intertwined in complex way. How much of the behaviour causes the network and how much of the behaviour is caused by the network?</strong></p>
</blockquote>
<p>In other words, is it the network itself that causes a behaviour, or is the behaviour of the individuals that creates the network?</p>
</section>
<section id="networks-and-complex-systems" class="level1">
<h1>Networks and complex systems</h1>
<blockquote class="blockquote">
<p><strong>What is a <em>complex system</em>? It is a system made of many heterogeneous interacting components.</strong></p>
</blockquote>
<p>Networks are a very efficient way to model such a system; however, heterogeneity might pose challenges while modelling using networks. Networks are important when the connection between their discrete elements is not trivial and cannot be expressed by using simple patterns or other mathematical models: complex networks have <em>emerging behaviour</em>, which cannot be expressed as a simple aggregate/pattern between its components.</p>
<p>These complex interconnections lead to fragility: a single point of failure might impact the whole network in unexpected ways, causing a chain of events affecting every interconnected node. There is a <em>fallout effect</em> that can propagate in unexpected ways, which can have serious consequences.</p>
<blockquote class="blockquote">
<p><strong><em>Fragility</em>: small events that seem to impact a small subset of the network can have profound consequences on the whole system, reverberating and cascading through the connections between nodes.</strong></p>
</blockquote>
<p>Failures and behaviour can be modelled by a set of rules, with the aim to predict and forecast. Fragility is a strong issue: if not taken in account, the models are completely useless for predicting and understanding a complex behaviour. In a network, each stress point might reverberate throughout the whole system, causing system-wide breakdowns.</p>
<p>Economic thought is built, classically, on two concepts:</p>
<ol type="1">
<li>Centralized markets.</li>
<li>Games among few people with fixed rules, structures and identities.</li>
</ol>
<p>However, there are many economic interactions where the social context is not a second-order consideration, but is actually a primary driver of behaviours and outcomes, such as <em>trading</em> and <em>exchanging goods and services</em>. Interactions are rarely <em>anonymous</em>, who you interact with is relevant for <em>behaviour</em> and <em>outcomes</em>: e.g., <em>the position of a person in a social network matters for micro outcomes</em>; frequently, the topology of interactions determines the macro outcomes of the system.</p>
<p>Mapping nodes is a fundamental tool to understand and model them: by mapping nodes and connections, weighting the flow of information between them, it is possible to see that most of the times there are <em>patterns</em> emerging. In other words, <em>networks</em> are mostly <em>not random</em>.</p>
<blockquote class="blockquote">
<p><strong>There are many types of networks/graphs depending on their edges:</strong></p>
</blockquote>
<ul>
<li><em>undirected graph</em>: represents symmetric relationships. The existence of a relationship between A and B implies a relationship between B and A.</li>
<li><em>directed graph</em>: represents asymmetric relationships (e.g.: paper A cites B; the inverse is usually not true).</li>
</ul>
<p>A network is called <em>directed</em> (or <em>digraph</em>) if all of its links are directed.; it is called <em>undirected</em> if all of its links are undirected. Some networks can have simultaneously both types of links.</p>
<ul>
<li><p><em>non-weighted graph</em>: where edges are weighted equally.</p></li>
<li><p><em>weighted graph</em>: where edges are weighted differently (e.g.: trade networks).</p></li>
<li><p><em>signed networks</em>: where edges can have positive or negative valence.</p></li>
<li><p><em>multi-layer networks</em>: in which the same entities can have multiple types of relationships (e.g.: family and friends).</p></li>
<li><p><em>hyper-networks</em>: networks in which edges connect more than two vertices.</p></li>
</ul>
<p>This course mainly studies undirected non-weighted single-layer graphs/networks.</p>
</section>
<section id="graph-networks" class="level1">
<h1>Graph &amp; Networks</h1>
<ul>
<li>{Network, node, link}: refers to a <em>real</em> system.</li>
<li>{Graph, vertex, edge}: <em>mathematical</em> representation of a network.</li>
</ul>
<p>Basic networks parameters are:</p>
<ul>
<li><em>The number of nodes</em>, or <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>. Represents the number of components of the system. It is often called the <em>size</em> of the network.
<ul>
<li>To distinguish them, nodes are labelled: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>=</mo><mn>1</mn><mo>,</mo><mn>2</mn><mo>,</mo><mi>.</mi><mi>.</mi><mi>.</mi><mo>,</mo><mi>N</mi></mrow><annotation encoding="application/x-tex">i = 1,2,...,N</annotation></semantics></math>.</li>
<li>A key characteristic of each node is its <em>degree</em>, representing the number of links it has to other nodes.</li>
</ul></li>
<li><em>The number of links</em>, or <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>L</mi><annotation encoding="application/x-tex">L</annotation></semantics></math>, represents the number of interactions between the nodes.
<ul>
<li>They are rarely labelled, as they can be identified through the nodes they connect.</li>
<li>In an <em>undirected</em> network, the total number of links can be expressed as the sum of the node degrees: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mfrac><mn>1</mn><mn>2</mn></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>k</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">
L=  \frac{1}{2} \sum^N_{i=1} k_i
</annotation></semantics></math> The <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">1/2</annotation></semantics></math> corrects for the fact that in the sum each link is counted <em>twice</em>.</li>
<li>In a <em>directed</em> network, instead: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>k</mi><mi>i</mi><mrow><mi>i</mi><mi>n</mi></mrow></msubsup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>k</mi><mi>i</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">
L = \sum^N_{i=1} k^{in}_i = \sum^N_{i=1} k^{out}_i 
</annotation></semantics></math></li>
</ul></li>
</ul>
<p>The <em>average degree</em> for an <em>undirected network</em> is; <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">⟨</mo><mi>k</mi><mo stretchy="false" form="postfix">⟩</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>k</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><mi>L</mi></mrow><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">
\langle k \rangle = \frac {1}{N} \sum^N_{i=1} k_i = \frac {2L} {N}
</annotation></semantics></math></p>
<p>The <em>average degree</em> for a <em>directed network</em> is: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">⟨</mo><msup><mi>k</mi><mrow><mi>i</mi><mi>n</mi></mrow></msup><mo stretchy="false" form="postfix">⟩</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>k</mi><mi>i</mi><mrow><mi>i</mi><mi>n</mi></mrow></msubsup><mo>=</mo><mo stretchy="false" form="prefix">⟨</mo><mi>k</mi><mo stretchy="false" form="postfix">⟩</mo><mo>=</mo><mfrac><mn>1</mn><mi>N</mi></mfrac><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>k</mi><mi>i</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msubsup><mo>=</mo><mfrac><mi>L</mi><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">
\langle k^{in} \rangle = \frac {1}{N} \sum^N_{i=1} k^{in}_i = \langle k \rangle = \frac {1}{N} \sum^N_{i=1} k^{out}_i  = \frac {L}{N}
</annotation></semantics></math></p>
<p>In <em>directed</em> networks it is important to distinguish between:</p>
<ul>
<li><em>incoming degree</em>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>k</mi><mi>i</mi><mrow><mi>i</mi><mi>n</mi></mrow></msubsup><annotation encoding="application/x-tex">k^{in}_i</annotation></semantics></math>: number of nodes that point to node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>.</li>
<li><em>outgoing degree</em>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msubsup><mi>k</mi><mi>i</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msubsup><annotation encoding="application/x-tex">k^{out}_i</annotation></semantics></math>: number of nodes that point from node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> to other nodes.</li>
<li><em>node total degree</em>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mi>i</mi></msub><annotation encoding="application/x-tex">k_i</annotation></semantics></math>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub><mo>=</mo><msubsup><mi>k</mi><mi>i</mi><mrow><mi>i</mi><mi>n</mi></mrow></msubsup><mo>+</mo><msubsup><mi>k</mi><mi>i</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msubsup></mrow><annotation encoding="application/x-tex">
k_i = k^{in}_i + k^{out}_i
</annotation></semantics></math></li>
</ul>
<blockquote class="blockquote">
<p><strong><em>Graphs</em>: graphs are a mathematical concept defined as a set <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>V</mi><mo>,</mo><mi>E</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">G(V, E)</annotation></semantics></math> of:</strong></p>
<ul>
<li><strong>set of vertices (V).</strong></li>
<li><strong>set of edges (E) between vertices.</strong></li>
</ul>
</blockquote>
<p>It is then a set composed of two subsets. It is a mathematical definition: <em>graphs</em> is the specialistic term, while <em>network</em> is used more generally in other disciplines. They can also include:</p>
<blockquote class="blockquote">
<ul>
<li><strong>attributes of vertices and edges.</strong></li>
</ul>
</blockquote>
<p>The <em>degree distribution</em> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>k</mi></msub><annotation encoding="application/x-tex">p_k</annotation></semantics></math> provides the probability that a randomly selected node in the network has degree <em>k</em>. For a network with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> nodes, the degree distribution is the <em>normalised</em> histogram given by: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub><mo>=</mo><mfrac><msub><mi>N</mi><mi>k</mi></msub><mi>N</mi></mfrac></mrow><annotation encoding="application/x-tex">
p_k = \frac{N_k}{N}
</annotation></semantics></math> where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>N</mi><mi>k</mi></msub><annotation encoding="application/x-tex">N_k</annotation></semantics></math> is the number of degree-<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math> nodes. The calculation of most network properties requires to know <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>k</mi></msub><annotation encoding="application/x-tex">p_k</annotation></semantics></math>. The average degree of a network can be re-written as: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false" form="prefix">⟨</mo><mi>k</mi><mo stretchy="false" form="postfix">⟩</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><mo accent="false">∞</mo></munderover><mi>k</mi><msub><mi>p</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">
\langle k \rangle = \sum^{\infty}_{k=0} k p_k
</annotation></semantics></math></p>
<p><strong>The functional form of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>p</mi><mi>k</mi></msub><annotation encoding="application/x-tex">p_k</annotation></semantics></math> determines many network phenomena.</strong></p>
</section>
<section id="computational-representations-of-a-network" class="level1">
<h1>Computational representations of a network</h1>
<p>Simply drawing graphs does not allow to perform computations on them. We need a compact syntax that also allows to perform mathematics on them. The most common representations are:</p>
<ul>
<li><em>Adjacency matrix</em>: a square matrix, where each element of the matrix indicates whether the pairs of vertices are adjacent in the network (e.g.&nbsp;directly connected).</li>
<li><em>Adjacency list/Edge list</em>: a list with two columns, one indicating the point of departure and one the point of arrival of a tie. A third column might be added to indicate the weight associated to each tie.</li>
<li><em>Node list</em>: for each note, the list of its connections is reported.</li>
</ul>
<section id="adjacency-matrix" class="level2">
<h2 class="anchored" data-anchor-id="adjacency-matrix">Adjacency matrix:</h2>
<blockquote class="blockquote">
<p><strong>The <em>adjacency matrix</em> allows to keep track of its links by providing a complete list of them. The adjacency matrix for a network of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> nodes as <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> rows and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> columns.</strong></p>
</blockquote>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">{</mo><mtable><mtr><mtd columnalign="left"><mn>1</mn><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mi>i</mi><mi>f</mi><mspace width="0.222em"></mspace><mrow><mo stretchy="true" form="prefix">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∈</mo><mi>E</mi></mtd></mtr><mtr><mtd columnalign="left"><mn>0</mn><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mi>i</mi><mi>f</mi><mspace width="0.222em"></mspace><mrow><mo stretchy="true" form="prefix">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∉</mo><mi>E</mi></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">
A_{ij} =
\begin{cases}
1 \ \ \ \ if \ (i,j) \in E \\
0 \ \ \ \ if \ (i,j) \notin E
\end{cases}
</annotation></semantics></math> This kind of matrix can have only values 1 or 0 if we are dealing with an <em>unweighed</em> network; moreover, it is a <em>symmetric matrix</em> (links are reciprocated). In case of a <em>undirected</em> network, the matrix is <em>asymmetric</em> while edges can as well either have value 0 or 1 (or <code>NA</code>); the order is important: rows and columns are symmetric and must be ordered in the same way (e.g.: <em>if row 3 contains data about node A its links, then column 3 must contain the same data and be about node A</em>).</p>
<p>The degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mi>i</mi></msub><annotation encoding="application/x-tex">k_i</annotation></semantics></math> of node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> can be obtained directly from the elements of the adjacency matrix. For <em>undirected</em> networks: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub><mo>=</mo><munder><munder><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>A</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow><mo accent="true">⏟</mo></munder><mstyle mathvariant="normal"><mi>S</mi><mi>u</mi><mi>m</mi><mspace width="0.222em"></mspace><mi>b</mi><mi>y</mi><mspace width="0.222em"></mspace><mi>r</mi><mi>o</mi><mi>w</mi></mstyle></munder><mo>=</mo><munder><munder><mrow><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>A</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow><mo accent="true">⏟</mo></munder><mstyle mathvariant="normal"><mi>S</mi><mi>u</mi><mi>m</mi><mspace width="0.222em"></mspace><mi>b</mi><mi>y</mi><mspace width="0.222em"></mspace><mi>c</mi><mi>o</mi><mi>l</mi><mi>u</mi><mi>m</mi><mi>n</mi></mstyle></munder></mrow><annotation encoding="application/x-tex">
k_i  = \underbrace{\sum^N_{j = 1} A_{ji}}_{\mathrm{Sum \ by\ row}} = \underbrace{\sum^N_{i = 1} A_{ji}}_{\mathrm{Sum \ by \ column}}
</annotation></semantics></math> It is then a sum over either the rows or the columns of the matrix.</p>
<p>Given that in an <em>undirected network</em> the number of outgoing links equal the number of incoming links, we have: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>L</mi><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>k</mi><mi>i</mi><mrow><mi>i</mi><mi>n</mi></mrow></msubsup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msubsup><mi>k</mi><mi>i</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msubsup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mi>j</mi></mrow><mi>N</mi></munderover><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
2L = \sum^N_{i = 1} k^{in}_i = \sum^N_{i = 1} k^{out}_i = \sum^N_{ij} A_{ij}
</annotation></semantics></math> In other words, the number of <em>non-zero elements</em> of the adjacency matrix is <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mi>L</mi></mrow><annotation encoding="application/x-tex">2L</annotation></semantics></math>, or twice the number of links.</p>
<p>For <em>directed</em> networks, the sum over the adjacency matrix row and columns provide either the <em>incoming</em> or <em>out coming</em> degrees: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>k</mi><mi>i</mi><mrow><mi>i</mi><mi>n</mi></mrow></msubsup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>A</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo>,</mo><mspace width="0.222em"></mspace><msubsup><mi>k</mi><mi>i</mi><mrow><mi>o</mi><mi>u</mi><mi>t</mi></mrow></msubsup><mo>=</mo><munderover><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>N</mi></munderover><msub><mi>A</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
k^{in}_i = \sum^N_{j = 1} A_{ji}, \ k^{out}_i = \sum^N_{i = 1} A_{ji}
</annotation></semantics></math></p>
<ul>
<li><strong>Advantages</strong>:
<ul>
<li>Systematic representation of all ties, in a compact form.</li>
<li>Algebra can be applied.</li>
</ul></li>
<li><strong>Disadvantages</strong>:
<ul>
<li>If the network is <em>sparse</em> (few connections are active), a lot of space is occupied by <em>useless</em> zeros (representing no ties).</li>
<li>No empty cells can be left in the matrix, otherwise programming languages might misinterpret data.</li>
<li>We necessarily need <em>square matrices</em>.</li>
<li><em>Need to check if</em>:
<ul>
<li><strong>If the network is <em>undirected</em>: is the matrix symmetrical?</strong></li>
<li><strong>Are self nominations possible?</strong> Otherwise, the diagonal must contains only 0s.</li>
<li><strong>Are labels used unique and avoid special characters?</strong></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="edge-list" class="level2">
<h2 class="anchored" data-anchor-id="edge-list">Edge list</h2>
<ul>
<li><strong>Advantages</strong>:
<ul>
<li>Saves computational resources.</li>
<li>Easy to read through.</li>
</ul></li>
<li><strong>Disadvantages</strong>:
<ul>
<li>Matrix algebra cannot be applied directly.</li>
<li><em>Need to check if</em>:
<ul>
<li>The datasets contains 2/3 lines.</li>
<li>Isolates are excluded and will need to be added manually.</li>
<li>Check that both direction of ties (in directed networks) are present in the list if relevant.</li>
<li><strong>Are names/labels used short and without special characters?</strong></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="node-list" class="level2">
<h2 class="anchored" data-anchor-id="node-list">Node list:</h2>
<ul>
<li><strong>Advantages</strong>:
<ul>
<li>Saves computational resources.</li>
</ul></li>
<li><strong>Disadvantages</strong>:
<ul>
<li>Matrix algebra cannot be applied directly.</li>
<li>Sometimes slower for large networks.</li>
<li>Requires more complex data structures (lists).</li>
<li>Need to check if:
<ul>
<li><strong>Are isolates included with an empty line?</strong></li>
<li><strong>Is the first column the name of the node or of the first connection?</strong></li>
<li><strong>Did I include links in both the sender and the receiver list in undirected lists?</strong></li>
<li><strong>Are names/labels used short and without special characters?</strong></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="subgraphs" class="level2">
<h2 class="anchored" data-anchor-id="subgraphs">Subgraphs</h2>
<p>Other meaningful definitions:</p>
<blockquote class="blockquote">
<ul>
<li><p><strong>Network size: the number of nodes (statistical physics/theory of complex networks).</strong></p></li>
<li><p><strong>Density of a network: number of its edges divided by the total number of possible pair of nodes (which is the <em>maximum number of links that could possibly exist in the network</em>).</strong></p></li>
</ul>
</blockquote>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mfrac><mrow><munder><mo>∑</mo><mi>i</mi></munder><munder><mo>∑</mo><mi>j</mi></munder><msub><mi>A</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub></mrow><mrow><mn>2</mn><mi>N</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">
D = \frac{\sum_i \sum_j A_{i, j}}{2 N(N -1)}
</annotation></semantics></math></p>
<blockquote class="blockquote">
<ul>
<li><strong>A network <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mi>′</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>V</mi><mi>′</mi><mo>,</mo><mi>E</mi><mi>′</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">G'=(V', E')</annotation></semantics></math> is a <em>subgraph</em> of network <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>V</mi><mo>,</mo><mi>E</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">G = (V, E)</annotation></semantics></math> if <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mi>′</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>V</mi><mi>′</mi><mo>,</mo><mi>E</mi><mi>′</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>⊆</mo><mi>G</mi><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>V</mi><mo>,</mo><mi>E</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">G'=(V', E') \subseteq G = (V, E)</annotation></semantics></math></strong>.</li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><strong>A <em>complete network</em> is a network that contains all the possible links between its nodes and has therefore density <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>D</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">D = 1</annotation></semantics></math>.</strong></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><strong><em>Clique</em>: it is a complete <em>subgraph</em> in which <em>all the possible ties are formed</em>.</strong></li>
</ul>
</blockquote>
</section>
</section>
<section id="networks-in-r" class="level1">
<h1>Networks in <code>R</code></h1>
<p>These are the packages required to work with networks in <code>R</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(sna)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xUCINET)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(FactoMineR)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ergm)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To operate with <em>adjacency matrix</em> we need to convert each loaded files into an <em>array</em>. Before creating a project, it’s good practice to compute all the data manipulations necessary.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>Friends <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    files_path, </span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Friends.csv"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">header =</span> T, </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">";"</span>, </span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">row.names =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.matrix</span>()</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>Friends</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Ana Ella Isra Petr Sam
Ana    0    2    1    3   2
Ella   1    0    3    1   3
Isra   3    1    0    2   1
Petr   2    1    2    0   1
Sam    3    2    1    1   0</code></pre>
</div>
</div>
<p>To work with a <em>network project</em>, we use the command <code>xCreateProject</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>SmallProject <span class="ot">&lt;-</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xCreateProject</span>(<span class="at">GeneralDescription =</span> <span class="st">"A small 5 people study"</span>,    <span class="co">#description of the project</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">NetworkName =</span> <span class="st">"Friends"</span>,    <span class="co">#name of the network</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">References =</span> <span class="st">""</span>,    <span class="co">#needed to put citations or references</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">NETFILE =</span> Friends,   <span class="co">#name of the data file</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">FileType =</span> <span class="st">"Robject"</span>,    <span class="co">#type of the file</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">InFormatType =</span> <span class="st">"AdjMat"</span>,    <span class="co">#format of the file. In this case, adjacency matrix</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">NetworkDescription=</span><span class="st">"Friendship networks among 5 people with 3=Good friend, 2=Friend and 1=Acquaintance"</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Mode =</span> <span class="fu">c</span>(<span class="st">"People"</span>),   <span class="co">#type of nodes; cells, persons, firms, ...</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Directed =</span> T,</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Loops =</span> F,</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Values =</span> <span class="st">"Ordinal"</span>,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>                 <span class="at">Class =</span> <span class="st">"matrix"</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>                 )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 ------ FUNCTION: xCreateProject ---------------------------


 - Basic checks performed on the argument for "xCreateProject". 

 - Data imported: [ 0 1 3 2 3 2 0 1 1 2 1 3 0 2 1 3 1 2 0 1 2 3 1 1 0 ] and named as: [ Friends ]
 ---------------------------------------------------------------</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>With network projects you need to have a complex data structure in which to store all the information needed to describe it. This becomes especially relevant when working with big projects.</strong></p>
</blockquote>
<p>To access the adjacency matrix:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>SmallProject<span class="sc">$</span>Friends</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Ana Ella Isra Petr Sam
Ana    0    2    1    3   2
Ella   1    0    3    1   3
Isra   3    1    0    2   1
Petr   2    1    2    0   1
Sam    3    2    1    1   0</code></pre>
</div>
</div>
<p>To attach attributes to your network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Attributes <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    files_path,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">"Attributes.csv"</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  ),</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">header =</span> T,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">";"</span>,</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">row.names =</span> <span class="dv">1</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>SmallProject <span class="ot">&lt;-</span> </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xAddAttributesToProject</span>(</span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ProjectName =</span> SmallProject,</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">ATTFILE1 =</span> Attributes,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">FileType =</span> <span class="st">"Robject"</span>,</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mode =</span> <span class="fu">c</span>(<span class="st">"People"</span>),</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">AttributesDescription =</span> <span class="fu">c</span>(</span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>      <span class="st">'Age in years'</span>, <span class="st">'Gender (1 = Male, 2 = Female")'</span>, <span class="st">"Preferred Music"</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 ------ FUNCTION: xAddAttributesToProject ---------------------------

 Getting "dataproject" with name [SmallProject].

 Attribute file [Attributes] imported</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p>**FUNDAMENTAL: network attributes might be stored in a <code>dataframe</code> (<em>adjacency matrices</em> must be stored as <em>arrays</em> instead*).**</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>SmallProject<span class="sc">$</span>Attributes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  NodeName Age Gender  Music
1      Ana  23      1 Reggae
2     Ella  67      1   Rock
3     Isra  45      1    Pop
4     Petr  28      2 Reggae
5      Sam  33      2    Pop</code></pre>
</div>
</div>
<p>Calling the <em>project</em> object prints data frames with all the relevant informations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>SmallProject</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$ProjectInfo
$ProjectInfo$GeneralDescription
[1] "A small 5 people study"

$ProjectInfo$Modes
[1] "People"

$ProjectInfo$AttributesDescription
  Variable   Mode                            Details
1 NodeName People Names of the nodes for mode People
2      Age People                       Age in years
3   Gender People     Gender (1 = Male, 2 = Female")
4    Music People                    Preferred Music

$ProjectInfo$NetworksDescription
  NetworkName
1     Friends
                                                                             Details
1 Friendship networks among 5 people with 3=Good friend, 2=Friend and 1=Acquaintance

$ProjectInfo$References
[1] ""


$Attributes
  NodeName Age Gender  Music
1      Ana  23      1 Reggae
2     Ella  67      1   Rock
3     Isra  45      1    Pop
4     Petr  28      2 Reggae
5      Sam  33      2    Pop

$NetworkInfo
  NetworkName ModeSender ModeReceiver Directed Loops  Values  Class
1     Friends     People       People     TRUE FALSE Ordinal matrix

$Friends
     Ana Ella Isra Petr Sam
Ana    0    2    1    3   2
Ella   1    0    3    1   3
Isra   3    1    0    2   1
Petr   2    1    2    0   1
Sam    3    2    1    1   0</code></pre>
</div>
</div>
<p>We now want to add another network to an existing project:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>Communication <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(files_path, <span class="st">"communication.csv"</span>), </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">header =</span> T,</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">";"</span>,</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">row.names =</span> <span class="dv">1</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.matrix</span>()</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>SmallProject<span class="ot">&lt;-</span><span class="fu">xAddToProject</span>(<span class="at">ProjectName=</span>SmallProject,</span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>                             <span class="at">NetworkName=</span><span class="st">"Communication"</span>,</span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">NETFILE1=</span>Communication,</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>                             <span class="at">FileType=</span><span class="st">"Robject"</span>,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>                             <span class="at">NetworkDescription=</span><span class="st">"Communication network"</span>,</span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Mode=</span><span class="fu">c</span>(<span class="st">"People"</span>),</span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Directed=</span><span class="cn">FALSE</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Loops=</span><span class="cn">FALSE</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Values=</span><span class="st">"Binary"</span>,</span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Class=</span><span class="st">"matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 ------ FUNCTION: xAddToProject ---------------------------

ProjectName: SmallProjectNumber of existing networks: 1
NetworkName: Communication
 - Basic checks performed on the argument for "xAddToProject". 

 - Data imported: [ 0 1 0 1 1 1 0 0 1 0 0 0 0 1 0 1 1 1 0 1 1 0 0 1 0 ] and named: [ Communication ]
 ---------------------------------------------------------------</code></pre>
</div>
</div>
<p>Friends is a <em>valued</em> network, we can <em>dichotomized</em> it by using:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>dichotomized_friend_network <span class="ot">&lt;-</span> <span class="fu">xDichotomize</span>(</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  SmallProject<span class="sc">$</span>Friends,</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">Value=</span><span class="dv">1</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">Type=</span><span class="st">"GT"</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>dichotomized_friend_network</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Ana Ella Isra Petr Sam
Ana    0    1    0    1   1
Ella   0    0    1    0   1
Isra   1    0    0    1   0
Petr   1    0    1    0   0
Sam    1    1    0    0   0</code></pre>
</div>
</div>
<p>The density is an important statistic to describe a network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>density_of_communication<span class="ot">&lt;-</span><span class="fu">xDensity</span>(dichotomized_friend_network)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  .  ------------------------------------------------------------------  
  .   Number of valid cells: 20 
  .   which corresponds to: 100 % of considered cells. 
  .  ------------------------------------------------------------------  </code></pre>
</div>
</div>
<p>To reverse the direction of each tie of a network, you simply need to <em>transpose</em> the adjacency matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>IsFriendOf<span class="ot">&lt;-</span><span class="fu">xTranspose</span>(SmallProject<span class="sc">$</span>Friends)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>IsFriendOf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Ana Ella Isra Petr Sam
Ana    0    1    3    2   3
Ella   2    0    1    1   2
Isra   1    3    0    2   1
Petr   3    1    2    0   1
Sam    2    3    1    1   0</code></pre>
</div>
</div>
<p>For the following part, we switch to the <code>BakerJournals</code> network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>Baker_Journals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$ProjectInfo
$ProjectInfo$ProjectName
[1] "Baker_Journals"

$ProjectInfo$GeneralDescription
[1] "Donald Baker collected data on the citations among 20 social work journals for 1985-1986. The data consist of the number of citations from articles in one journal to articles in another journal. Using hierarchical cluster analysis, he found that the network seems to have a core-periphery structure, and argues that American journals tend to be less likely to involve international literature."

$ProjectInfo$AttributesDescription
NULL

$ProjectInfo$NetworksDescription
[1] "Citations:  Number of citations"

$ProjectInfo$References
[1] "Baker, D. R. (1992). A Structural Analysis of Social Work Journal Network: 1985-1986. Journal of Social Service Research, 15(3-4), 153-168."


$Attributes
NULL

$NetworkInfo
       Name Mode Directed Diagonal Values  Class
1 Citations    A     TRUE    FALSE  Ratio matrix

$CoCitations
     AMH ASW BJSW CAN CCQ CSWJ  CW CYSR  FR IJSW JGSW JSP JSWE PW SCW SSR  SW
AMH   13   0    0   0   0    0   0    0   0    0    0   0    0  0   0   0   3
ASW    0  70    0   0   0    0   0    0   0    0    0   0   18 13   0  21  73
BJSW   0   0   95   0   0    0   0    0   0    0    0   0   13  0   0   0  19
CAN    0   0    0 109   0    0   9    0   0    0    0   0    0  0   6   0   8
CCQ    0   0    0   0  92    0  12    0   0    0    0   0    0  0   3   0   0
CSWJ   0   0    0   0   0   40   0    0   0    0    0   0    0  0  41  20  45
CW     0   0    0   7   0    0 187    6   0    0    0   0   11  7  32  10  58
CYSR   0   0    0  12   5    0  70   26   4    0    0   0    0  6   8  14  28
FR     0   0    0   0   0    0   0    0 205    0    0   0    0  0  18   0   9
IJSW   0   0    0   0   0    0   0    0   0    6    0   0    0  0   0   0   3
JGSW   0   0    0   0   0    0   0    0   0    0    9   0    0  0  18   0  18
JSP    0   0    0   0   0    0   0    0   0    0    0  35    0  0   0   7   0
JSWE   0   9    0   0   0    0   0    0   0    0    0   0  104  0  18  16  58
PW     0   0    0   7   0    0   4    0   0    0    0   0    0  9   0   0   0
SCW    0   8    0   6   0    8  17    0   6    0    6   0   21  0 149  36 124
SSR    0   7    0   0   0    0  17    0   0    0    0   0    9  0  30 105 106
SW     0  15    0   0   0    0  52    0   9    0    0   0   33 19  58  63 366
SWG    0   0    2   0   0    0   0    0   0    0    0   0    9  0   9   7  40
SWHC   0   0    0   0   0    0   0    0   0    0    0   0    0  0  20   0  26
SWRA   0   0    0   0   0    0   8    0   0    0    0   0   24  0   8  39  44
     SWG SWHC SWRA
AMH    0    0    0
ASW    0    0    7
BJSW   0    0    0
CAN    0    0    0
CCQ    0    0    0
CSWJ   0    0    0
CW     0    0    0
CYSR   0    0    6
FR     0    0    0
IJSW   0    0    0
JGSW   0    0    0
JSP    0    0    0
JSWE   0    7   16
PW     0    0    0
SCW    8    6   18
SSR    0    0   25
SW    15   43    8
SWG   41    9    0
SWHC   0   86    0
SWRA   0    0   40</code></pre>
</div>
</div>
<p><code>xSymmetrize</code> allows for <em>symmetrization</em> of a network. In this case, we make the network symmetric by setting the value of ties respectively to <code>Max</code> and <code>Min</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xSymmetrize</span>(Baker_Journals<span class="sc">$</span>CoCitations, <span class="at">Type =</span> <span class="st">"Max"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     AMH ASW BJSW CAN CCQ CSWJ  CW CYSR  FR IJSW JGSW JSP JSWE PW SCW SSR  SW
AMH   13   0    0   0   0    0   0    0   0    0    0   0    0  0   0   0   3
ASW    0  70    0   0   0    0   0    0   0    0    0   0   18 13   8  21  73
BJSW   0   0   95   0   0    0   0    0   0    0    0   0   13  0   0   0  19
CAN    0   0    0 109   0    0   9   12   0    0    0   0    0  7   6   0   8
CCQ    0   0    0   0  92    0  12    5   0    0    0   0    0  0   3   0   0
CSWJ   0   0    0   0   0   40   0    0   0    0    0   0    0  0  41  20  45
CW     0   0    0   9  12    0 187   70   0    0    0   0   11  7  32  17  58
CYSR   0   0    0  12   5    0  70   26   4    0    0   0    0  6   8  14  28
FR     0   0    0   0   0    0   0    4 205    0    0   0    0  0  18   0   9
IJSW   0   0    0   0   0    0   0    0   0    6    0   0    0  0   0   0   3
JGSW   0   0    0   0   0    0   0    0   0    0    9   0    0  0  18   0  18
JSP    0   0    0   0   0    0   0    0   0    0    0  35    0  0   0   7   0
JSWE   0  18   13   0   0    0  11    0   0    0    0   0  104  0  21  16  58
PW     0  13    0   7   0    0   7    6   0    0    0   0    0  9   0   0  19
SCW    0   8    0   6   3   41  32    8  18    0   18   0   21  0 149  36 124
SSR    0  21    0   0   0   20  17   14   0    0    0   7   16  0  36 105 106
SW     3  73   19   8   0   45  58   28   9    3   18   0   58 19 124 106 366
SWG    0   0    2   0   0    0   0    0   0    0    0   0    9  0   9   7  40
SWHC   0   0    0   0   0    0   0    0   0    0    0   0    7  0  20   0  43
SWRA   0   7    0   0   0    0   8    6   0    0    0   0   24  0  18  39  44
     SWG SWHC SWRA
AMH    0    0    0
ASW    0    0    7
BJSW   2    0    0
CAN    0    0    0
CCQ    0    0    0
CSWJ   0    0    0
CW     0    0    8
CYSR   0    0    6
FR     0    0    0
IJSW   0    0    0
JGSW   0    0    0
JSP    0    0    0
JSWE   9    7   24
PW     0    0    0
SCW    9   20   18
SSR    7    0   39
SW    40   43   44
SWG   41    9    0
SWHC   9   86    0
SWRA   0    0   40</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xSymmetrize</span>(Baker_Journals<span class="sc">$</span>CoCitations, <span class="at">Type =</span> <span class="st">"Min"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     AMH ASW BJSW CAN CCQ CSWJ  CW CYSR  FR IJSW JGSW JSP JSWE PW SCW SSR  SW
AMH   13   0    0   0   0    0   0    0   0    0    0   0    0  0   0   0   0
ASW    0  70    0   0   0    0   0    0   0    0    0   0    9  0   0   7  15
BJSW   0   0   95   0   0    0   0    0   0    0    0   0    0  0   0   0   0
CAN    0   0    0 109   0    0   7    0   0    0    0   0    0  0   6   0   0
CCQ    0   0    0   0  92    0   0    0   0    0    0   0    0  0   0   0   0
CSWJ   0   0    0   0   0   40   0    0   0    0    0   0    0  0   8   0   0
CW     0   0    0   7   0    0 187    6   0    0    0   0    0  4  17  10  52
CYSR   0   0    0   0   0    0   6   26   0    0    0   0    0  0   0   0   0
FR     0   0    0   0   0    0   0    0 205    0    0   0    0  0   6   0   9
IJSW   0   0    0   0   0    0   0    0   0    6    0   0    0  0   0   0   0
JGSW   0   0    0   0   0    0   0    0   0    0    9   0    0  0   6   0   0
JSP    0   0    0   0   0    0   0    0   0    0    0  35    0  0   0   0   0
JSWE   0   9    0   0   0    0   0    0   0    0    0   0  104  0  18   9  33
PW     0   0    0   0   0    0   4    0   0    0    0   0    0  9   0   0   0
SCW    0   0    0   6   0    8  17    0   6    0    6   0   18  0 149  30  58
SSR    0   7    0   0   0    0  10    0   0    0    0   0    9  0  30 105  63
SW     0  15    0   0   0    0  52    0   9    0    0   0   33  0  58  63 366
SWG    0   0    0   0   0    0   0    0   0    0    0   0    0  0   8   0  15
SWHC   0   0    0   0   0    0   0    0   0    0    0   0    0  0   6   0  26
SWRA   0   0    0   0   0    0   0    0   0    0    0   0   16  0   8  25   8
     SWG SWHC SWRA
AMH    0    0    0
ASW    0    0    0
BJSW   0    0    0
CAN    0    0    0
CCQ    0    0    0
CSWJ   0    0    0
CW     0    0    0
CYSR   0    0    0
FR     0    0    0
IJSW   0    0    0
JGSW   0    0    0
JSP    0    0    0
JSWE   0    0   16
PW     0    0    0
SCW    8    6    8
SSR    0    0   25
SW    15   26    8
SWG   41    0    0
SWHC   0   86    0
SWRA   0    0   40</code></pre>
</div>
</div>
<p>To analyse and compare networks a <em>correlation</em> measure is employed. It is necessary to transform then into <em>vectors</em> first:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(<span class="fu">c</span>(SmallProject<span class="sc">$</span>Friends),<span class="fu">c</span>(SmallProject<span class="sc">$</span>Communication))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.29116</code></pre>
</div>
</div>
<p>However, in this case, the diagonal is all composed of 0s, which is influencing the computations. This is caused by the fact that in this network people cannot be in a <em>relationship</em> with themselves; then, it is necessary to transform them into <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>T1 <span class="ot">&lt;-</span> SmallProject<span class="sc">$</span>Friends</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(T1) <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>T2 <span class="ot">&lt;-</span> SmallProject<span class="sc">$</span>Communication</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a><span class="fu">diag</span>(T2) <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(<span class="fu">c</span>(T1),<span class="fu">c</span>(T2),<span class="at">use=</span><span class="st">"complete.obs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.07537784</code></pre>
</div>
</div>
<p>Another interesting computation is to take attributes of a network nodes and transform then into another separated network: in this example, we are playing with the <em>age</em> attributes and we are interested in its <em>absolute difference</em> among individuals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>agediff <span class="ot">&lt;-</span> <span class="fu">xAttributeToNetwork</span>(SmallProject<span class="sc">$</span>Attributes[,<span class="dv">2</span>], <span class="at">Type =</span> <span class="st">"AbsDiff"</span>)<span class="sc">*</span><span class="dv">1</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">xNormalize</span>(agediff, <span class="at">Type =</span> <span class="st">"Max"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1] [,2]      [,3]      [,4]      [,5]
[1,] 0.0000000    1 0.5000000 0.1136364 0.2272727
[2,] 1.0000000    0 0.5000000 0.8863636 0.7727273
[3,] 1.0000000    1 0.0000000 0.7727273 0.5454545
[4,] 0.1282051    1 0.4358974 0.0000000 0.1282051
[5,] 0.2941176    1 0.3529412 0.1470588 0.0000000</code></pre>
</div>
</div>
<p>The <code>xNormalize</code> network can help with <em>dichotomize</em>, because it allows you to spot the natural <em>cut-off</em> point in your data.</p>
<p>The shortest path among nodes (<em>geodesic distance</em>) can be computed with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xGeodesicDistance</span>(SmallProject<span class="sc">$</span>Communication)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     Ana Ella Isra Petr Sam
Ana    0    1    2    1   1
Ella   1    0    2    1   2
Isra   2    2    0    1   2
Petr   1    1    1    0   1
Sam    1    2    2    1   0</code></pre>
</div>
</div>
<p>Each matrix element represent the distance among the network nodes. In this networks, for example, you need to cross <em>two</em> different ties to move from <code>Ella</code> to <code>Isra</code>.</p>
<p>To store your project for later use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(SmallProject, <span class="at">file =</span> <span class="fu">paste0</span>(files_path, <span class="st">"ClassProject.RData"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To work with the <code>sna</code> library, you can convert your project by calling the <code>as.network</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>snafile.n <span class="ot">&lt;-</span> <span class="fu">as.network</span>(SmallProject<span class="sc">$</span>Friends, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>snafile.n</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> Network attributes:
  vertices = 5 
  directed = TRUE 
  hyper = FALSE 
  loops = FALSE 
  multiple = FALSE 
  bipartite = FALSE 
  total edges= 20 
    missing edges= 0 
    non-missing edges= 20 

 Vertex attribute names: 
    vertex.names 

No edge attributes</code></pre>
</div>
</div>
<p>With <code>igraph</code>, instead, call <code>graph_from_adjacency_matrix</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>igraph_file.i <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(SmallProject<span class="sc">$</span>Friends,</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"directed"</span>), <span class="at">diag =</span> <span class="cn">FALSE</span>)</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>igraph_file.i</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH 0f0edc5 DN-- 5 36 -- 
+ attr: name (v/c)
+ edges from 0f0edc5 (vertex names):
 [1] Ana -&gt;Ella Ana -&gt;Ella Ana -&gt;Isra Ana -&gt;Petr Ana -&gt;Petr Ana -&gt;Petr
 [7] Ana -&gt;Sam  Ana -&gt;Sam  Ella-&gt;Ana  Ella-&gt;Isra Ella-&gt;Isra Ella-&gt;Isra
[13] Ella-&gt;Petr Ella-&gt;Sam  Ella-&gt;Sam  Ella-&gt;Sam  Isra-&gt;Ana  Isra-&gt;Ana 
[19] Isra-&gt;Ana  Isra-&gt;Ella Isra-&gt;Petr Isra-&gt;Petr Isra-&gt;Sam  Petr-&gt;Ana 
[25] Petr-&gt;Ana  Petr-&gt;Ella Petr-&gt;Isra Petr-&gt;Isra Petr-&gt;Sam  Sam -&gt;Ana 
[31] Sam -&gt;Ana  Sam -&gt;Ana  Sam -&gt;Ella Sam -&gt;Ella Sam -&gt;Isra Sam -&gt;Petr</code></pre>
</div>
</div>
<section id="how-to-work-with-edge-lists" class="level2">
<h2 class="anchored" data-anchor-id="how-to-work-with-edge-lists">How to work with edge lists</h2>
<p><code>xUCINET</code> can import only adjacency matrices; a workaround could the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>hp5edges <span class="ot">&lt;-</span> <span class="fu">read.table</span>(</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    files_path, <span class="st">'Friends_edgelist.csv'</span></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    ), </span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sep =</span> <span class="st">';'</span>, </span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">header =</span> F</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>hp5edges <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    V1   V2 V3
1  Ana Ella  2
2  Ana Isra  1
3  Ana Petr  3
4  Ana  Sam  2
5 Ella  Ana  1
6 Ella Isra  3</code></pre>
</div>
</div>
<p>After some data preparation, the code is quite straightforward:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(hp5edges) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"from"</span>,<span class="st">"to"</span>,<span class="st">"w"</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>hp5edgesmat <span class="ot">&lt;-</span> <span class="fu">as.matrix</span>(hp5edges) <span class="co">#igraph wants our data in matrix format</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>hp5net <span class="ot">&lt;-</span> <span class="fu">graph_from_edgelist</span>(hp5edgesmat[,<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>], <span class="at">directed=</span><span class="cn">TRUE</span>)</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>MyAdj <span class="ot">&lt;-</span> <span class="fu">as_adjacency_matrix</span>(</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  hp5net,</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"both"</span>),</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">attr =</span> <span class="cn">NULL</span>,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">names =</span> <span class="cn">TRUE</span>,</span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">sparse =</span> <span class="cn">FALSE</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>One of the most used tools to visualize network is called <code>Pajek</code>, which needs the <code>igraph</code> library to work. It is essentially a list of nodes and edges.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>yeast_igraph <span class="ot">&lt;-</span> <span class="fu">read_graph</span>(</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>    files_path, <span class="st">'YeastS.net'</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">format =</span> <span class="fu">c</span>(<span class="st">"pajek"</span>)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> </span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_adjacency_matrix</span>(<span class="at">type=</span> <span class="st">'both'</span>, <span class="at">attr =</span> <span class="cn">NULL</span>, <span class="at">names =</span> T, <span class="at">sparse =</span> F)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A classic visualization of a complex network is:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(yeast_igraph, <span class="at">gmode =</span> <span class="st">'graph'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
</section>
<section id="data-visualization-how-to-study-networks" class="level1">
<h1>Data visualization: how to study networks</h1>
<p>After importing data in <code>R</code> to build a project, we can start to study it: there are two different approaches.</p>
<ol type="1">
<li>Data visualization: observing a network and organizing it can lead to insights about its dynamic and the underlying complex system.</li>
</ol>
<ul>
<li>It often works properly only for <em>small</em> networks, with 10-100 nodes and a few edges.</li>
</ul>
<ol start="2" type="1">
<li>Statistical properties: they characterize the structure of the network and are useful to abstract from the present cases to create models of networks structures and compare different networks.</li>
</ol>
<ul>
<li>It is the best method to deal with large networks.</li>
</ul>
<p>In visualizing a network the position in which we place the nodes relative to each other is important to obtain clarity. There are many options: these methods are useful to associate position and information.</p>
<ul>
<li>Create a <em>circle</em> of equally separated nodes. This is usually the first approach.</li>
<li>Use a <em>categorical attribute</em> to plot clusters similar nodes.</li>
<li>Use a <em>continuous</em> attribute to assign them a coordinate in the visualization space.</li>
<li>Optimizing node locations according to some algorithms; in this case, the aim is to enhance visualization and avoid overlapping.</li>
</ul>
<p>When using a <em>weighted</em> network, <em>dichotomization</em> is essential to achieve a meaningful visualization. Remember that setting the dichotomization level is a fundamental aspect of studying a network and the optimal level depends on the task at hand.</p>
<section id="optimization-algorithms" class="level2">
<h2 class="anchored" data-anchor-id="optimization-algorithms">Optimization algorithms</h2>
<p>The two most used algorithm, used when the position of the nodes is <em>not relevant to the analysis</em> and we want to have a clear representation of a network are:</p>
<ol type="1">
<li>Fruchterman and Reingold (1991)</li>
</ol>
<blockquote class="blockquote">
<p><strong>It considers the network as a collection of <em>magnets</em> and <em>springs</em>. All the springs exert the same force and all the magnets have the same <em>polarity</em>: the former tend to push each other apart, while the springs keep them together.</strong></p>
</blockquote>
<p>The system starts from a random position and you simply wait for the system to reach a level of minimal <em>entropy</em>, or a state of <em>equilibrium</em>. An iterative process is used to determine that state.</p>
<p>The resulting network has ties which have a similar (or equal) length and <em>unconnected nodes</em> are positioned far from each others.</p>
<ol start="2" type="1">
<li>Kamada Kaway (1989)</li>
</ol>
<blockquote class="blockquote">
<p><strong>Only springs forces are present; <em>geodesic distance</em> is computed and is used to determine the power of the attraction between two pair of nodes.</strong></p>
</blockquote>
<p>Again, the system is in equilibrium as it reaches its minimum energy level. The resulting network has densely connected set of nodes placed close to each other.</p>
<blockquote class="blockquote">
<p><strong>With either algorithm there is no unique optimal solution, starting from random positions: this means that there might be <em>multiple local minima</em>, some of them undesirable.</strong></p>
</blockquote>
</section>
<section id="plotting-graphs-in-r" class="level2">
<h2 class="anchored" data-anchor-id="plotting-graphs-in-r">Plotting graphs in <code>R</code></h2>
<p>Some information about the dataset (already loaded with <code>xUCINET</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>Krackhardt_HighTech<span class="sc">$</span>ProjectInfo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$ProjectName
[1] "Krackhardt_HighTech."

$GeneralDescription
[1] "These are data collected by David Krackhardt among the managers of a high-tech company. The company manufactured high-tech equipment on the West Coast of the United States and had just over 100 employees with 21 managers. Contains three types of network relations and four attributes."

$AttributesDescription
[1] "Age:        the managers age (in years)"                                                                                    
[2] "Tenure:     the length of service or tenure (in years)"                                                                     
[3] "Level:      the level in the corporate hierarchy (coded 1=CEO, 2=Vice President, 3=Manager)"                                
[4] "Department: a nominal coding for the department (coded 1, 2, 3, 4, with the CEO in department 0, i.e., not in a department)"

$NetworksDescription
[1] "Advice:     who the manager went to for advice"                        
[2] "Friendship: who the manager considers a friend"                        
[3] "ReportTo:   whom the manager reported to, taken from company documents"

$References
[1] "Krackhardt D. (1987). Cognitive social structures. Social Networks, 9, 104-134."                                          
[2] "Wasserman S and K Faust (1994). Social Network Analysis: Methods and Applications. Cambridge University Press, Cambridge."</code></pre>
</div>
</div>
<p>First, we want to look at the <em>friendship</em> network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>Krackhardt_HighTech<span class="sc">$</span>Friendship</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19
A01   0   1   0   1   0   0   0   1   0   0   0   1   0   0   0   1   0   0   0
A02   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0
A03   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1
A04   1   1   0   0   0   0   0   1   0   0   0   1   0   0   0   1   1   0   0
A05   0   1   0   0   0   0   0   0   1   0   1   0   0   1   0   0   1   0   1
A06   0   1   0   0   0   0   1   0   1   0   0   1   0   0   0   0   1   0   0
A07   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A08   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A09   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A10   0   0   1   0   1   0   0   1   1   0   0   1   0   0   0   1   0   0   0
A11   1   1   1   1   1   0   0   1   1   0   0   1   1   0   1   0   1   1   1
A12   1   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0
A13   0   0   0   0   1   0   0   0   0   0   1   0   0   0   0   0   0   0   0
A14   0   0   0   0   0   0   1   0   0   0   0   0   0   0   1   0   0   0   0
A15   1   0   1   0   1   1   0   0   1   0   1   0   0   1   0   0   0   0   1
A16   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A17   1   1   1   1   1   1   1   1   1   1   1   1   0   1   1   1   0   0   1
A18   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A19   1   1   1   0   1   0   0   0   0   0   1   1   0   1   1   0   0   0   0
A20   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1   0
A21   0   1   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1   1   0
    A20 A21
A01   0   0
A02   0   1
A03   0   0
A04   0   0
A05   0   1
A06   0   1
A07   0   0
A08   0   0
A09   0   0
A10   1   0
A11   0   0
A12   0   1
A13   0   0
A14   0   0
A15   0   0
A16   0   0
A17   1   1
A18   0   0
A19   1   0
A20   0   0
A21   0   0</code></pre>
</div>
</div>
<p>We first want to <em>symmetrize</em> this network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">#method 1</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin<span class="ot">&lt;-</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)<span class="sc">*</span><span class="fu">t</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="co">#method 2</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin2<span class="ot">&lt;-</span><span class="fu">xSymmetrize</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship,<span class="at">Type=</span><span class="st">"Min"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Are they the same?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin <span class="sc">-</span> Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
</div>
<p>Yep.</p>
<p>Let’s look at all the objects contained in the network data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(Krackhardt_HighTech)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ProjectInfo"        "Attributes"         "NetworkInfo"       
[4] "Advice"             "Friendship"         "ReportTo"          
[7] "Friendship_SymMin"  "Friendship_SymMin2"</code></pre>
</div>
</div>
<p>We can use the <code>gplot()</code> function in <code>sna</code> to visualize the network, where we specify how the points/nodes should be positioned in the 2-dimensional space. Here we position them in a circle (<code>mode=“circle”</code>):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin, <span class="at">mode=</span><span class="st">"circle"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>We can immediately see that event though we symmetrized the network, we have a representation of a <em>directed</em> network, even though by construction we do not have built one. We need to specify that we are not working with a directed network, which is the <em>default</em> option:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin, <span class="at">mode=</span><span class="st">"circle"</span>, <span class="at">gmode=</span><span class="st">"graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p><code>gmode</code> helps in solving the issue: the options are + <em>graph</em>: undirected, + <em>digraph</em> (default): directed, + <em>twomode</em>: twomode.</p>
<p>To reduce the dimension of the nodes, we can use the argument <code>vertex.cex</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin, <span class="at">mode=</span><span class="st">"circle"</span>, <span class="at">gmode=</span><span class="st">"graph"</span>,<span class="at">vertex.cex=</span>.<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>To enhance the visualization, with such a small network, <em>labels</em> can be added to nodes.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin,</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,           <span class="co"># type of network: undirected</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">mode=</span><span class="st">"circle"</span>,           <span class="co"># how the nodes are positioned</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,           <span class="co"># the size of the node shapes</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>,      <span class="co"># to add the node labels</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,             <span class="co"># to position the labels below the node shapes</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">8</span>,            <span class="co"># to decrease the size of the node labels</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)       <span class="co"># to make the colour of the ties/edges 30% black and 70% white </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>We can already see that while some nodes are particularly connected, some are not: we can also check whether there are some signs of error in our code or in the data, which might require correction of further cleaning.</p>
<p>In this case, while putting nodes in a circle works, we can start to look at different types of visualization.</p>
<p>We will use another database:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>Wolfe_Primates<span class="sc">$</span>ProjectInfo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$ProjectName
[1] "Wolfe_Primates."

$GeneralDescription
[1] "These data represent 3 months of interactions among a troop of monkeys, observed in the wild by Linda Wolfe as they sported by a river in Ocala, Florida."

$AttributesDescription
[1] "Gender:   1=male, 2=female"                       
[2] "Age:      age in years"                           
[3] "Rank:     rank in the troop, with 1 being highest"

$NetworksDescription
[1] "JointPresence: Joint presence at the river was coded as an interaction and these were summed within all pairs"
[2] "Kinship:       Indicates the putative kin relationships among the animals: 18 may be the granddaughter of 19" 

$References
NULL</code></pre>
</div>
</div>
<p>This dataset is useful because we have <code>age</code> and <code>rank</code> which are attributes that might be clearly used to produce an informative visualization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>Wolfe_Primates<span class="sc">$</span>Attributes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Gender Age Rank
A01      1  15    1
A02      1  10    2
A03      1  10    3
A04      1   8    4
A05      1   7    5
A06      2  15   10
A07      2   5   11
A08      2  11    6
A09      2   8   12
A10      2   9    9
A11      2  16    7
A12      2  10    8
A13      2  14   18
A14      2   5   19
A15      2   7   20
A16      2  11   13
A17      2   7   14
A18      2   5   15
A19      2  15   16
A20      2   4   17</code></pre>
</div>
</div>
<p>Ideally we would like highly ranked individuals on the top of the figure, and then in decreasing order. By default however a rank assign low values to top positions. As a solution, we can reverse the order:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>Wolfe_Primates<span class="sc">$</span>Attributes<span class="ot">&lt;-</span><span class="fu">cbind</span>(Wolfe_Primates<span class="sc">$</span>Attributes,<span class="at">Rank_Rev=</span><span class="fu">max</span>(Wolfe_Primates<span class="sc">$</span>Attributes[,<span class="dv">3</span>])<span class="sc">+</span><span class="dv">1</span><span class="sc">-</span>Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Rank)</span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>Wolfe_Primates<span class="sc">$</span>Attributes</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Gender Age Rank Rank_Rev
A01      1  15    1       20
A02      1  10    2       19
A03      1  10    3       18
A04      1   8    4       17
A05      1   7    5       16
A06      2  15   10       11
A07      2   5   11       10
A08      2  11    6       15
A09      2   8   12        9
A10      2   9    9       12
A11      2  16    7       14
A12      2  10    8       13
A13      2  14   18        3
A14      2   5   19        2
A15      2   7   20        1
A16      2  11   13        8
A17      2   7   14        7
A18      2   5   15        6
A19      2  15   16        5
A20      2   4   17        4</code></pre>
</div>
</div>
<p>The network data are valued and represent how often two monkeys are spotted together:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>Wolfe_Primates<span class="sc">$</span>JointPresence</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19
A01   0   2  10   4   5   5   9   7   4   3   3   7   3   2   5   1   4   1   0
A02   2   0   5   1   3   1   4   2   6   2   5   4   3   2   2   6   3   1   1
A03  10   5   0   8   9   5  11   7   8   8  14  17   9  11  11   5   9   4   6
A04   4   1   8   0   4   0   3   4   2   3   5   3  11   4   7   0   4   3   3
A05   5   3   9   4   0   3   5   7   4   3   5   6   3   4   4   1   2   1   3
A06   5   1   5   0   3   0   5   2   3   2   2   4   4   3   1   1   2   0   1
A07   9   4  11   3   5   5   0   5   4   6   3   9   5   5   4   2   6   3   2
A08   7   2   7   4   7   2   5   0   3   0   3   4   2   1   3   0   1   1   1
A09   4   6   8   2   4   3   4   3   0   1   3   2   4   5   4   3   4   1   3
A10   3   2   8   3   3   2   6   0   1   0   4   7   5   5   7   2   2   3   3
A11   3   5  14   5   5   2   3   3   3   4   0   9   3   4   4   2   4   2   3
A12   7   4  17   3   6   4   9   4   2   7   9   0   7   7   8   3   7   2   4
A13   3   3   9  11   3   4   5   2   4   5   3   7   0   8  11   3   8   2   5
A14   2   2  11   4   4   3   5   1   5   5   4   7   8   0   8   1   5   4   4
A15   5   2  11   7   4   1   4   3   4   7   4   8  11   8   0   2   5   2   2
A16   1   6   5   0   1   1   2   0   3   2   2   3   3   1   2   0   6   1   0
A17   4   3   9   4   2   2   6   1   4   2   4   7   8   5   5   6   0   4   3
A18   1   1   4   3   1   0   3   1   1   3   2   2   2   4   2   1   4   0   2
A19   0   1   6   3   3   1   2   1   3   3   3   4   5   4   2   0   3   2   0
A20   1   1   5   0   3   2   2   0   2   2   1   3   3   1   1   1   3   1   6
    A20
A01   1
A02   1
A03   5
A04   0
A05   3
A06   2
A07   2
A08   0
A09   2
A10   2
A11   1
A12   3
A13   3
A14   1
A15   1
A16   1
A17   3
A18   1
A19   6
A20   0</code></pre>
</div>
</div>
<p>This is clearly an <em>undirected</em> network.</p>
<p>If we try to plot it without dichotomizing:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Wolfe_Primates<span class="sc">$</span>JointPresence)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-38-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>We obtain a very dense network and, without specifying a position for the nodes, they are put at random.</p>
<p>First, we need to find a good dichotomization threshold: 7 co-occurrences seems like a good level. To see why, let’s create a <code>table</code> of the connections:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(Wolfe_Primates<span class="sc">$</span>JointPresence)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 0  1  2  3  4  5  6  7  8  9 10 11 14 17 
38 52 60 72 58 42 16 20 14 12  2 10  2  2 </code></pre>
</div>
</div>
<p>We are interested only in the most significant connections. The choice has to be made by making a strong theoretical assumption or by a sort of trial-and-error to check whether different thresholds might bring different insights. Be however sure that the results are not correlated with a particular visualization of the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Wolfe_Primates<span class="sc">$</span>JointPresence<span class="sc">&gt;</span><span class="dv">6</span>,                     <span class="co"># </span><span class="al">NOTE</span><span class="co">: This is an an alternative way of dichotomizing "on the fly"</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,                                      <span class="co"># type of network: undirected</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">coord=</span>Wolfe_Primates<span class="sc">$</span>Attributes[,<span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">4</span>)],           <span class="co"># coordinates to be use</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,                                      <span class="co"># the size of the node shapes</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Gender<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">8</span>, <span class="co"># a vector which is used to define the colour of each node (0=white and 8=grey)</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>,                                 <span class="co"># to add the node labels</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,                                        <span class="co"># to position the labels below the node shapes</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">7</span>,                                       <span class="co"># to decrease the size of the node labels to 50% of the default</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)                                  <span class="co"># to make the colour of the ties/edges 30% black and 70% white </span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a><span class="fu">arrows</span>(.<span class="dv">2</span>, .<span class="dv">2</span>, (<span class="fu">max</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Age)<span class="sc">+</span><span class="fu">min</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Age))<span class="sc">+</span>.<span class="dv">2</span>, .<span class="dv">2</span>, <span class="at">length =</span> <span class="fl">0.1</span>)</span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a><span class="fu">arrows</span>(.<span class="dv">2</span>, .<span class="dv">2</span>, .<span class="dv">2</span>, (<span class="fu">max</span>(Wolfe_Primates<span class="sc">$</span>Attributes[,<span class="dv">2</span>])<span class="sc">+</span><span class="fu">min</span>(Wolfe_Primates<span class="sc">$</span>Attributes[,<span class="dv">2</span>])), <span class="at">length =</span> <span class="fl">0.1</span>)</span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>(<span class="dv">0</span>, (<span class="fu">max</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Rank)<span class="sc">+</span><span class="fu">min</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Rank))<span class="sc">-</span>.<span class="dv">5</span>, <span class="at">labels=</span><span class="st">"Rank"</span>,</span>
<span id="cb70-15"><a href="#cb70-15" aria-hidden="true" tabindex="-1"></a>     <span class="at">cex=</span><span class="fl">0.8</span>, <span class="at">pos=</span><span class="dv">4</span>)</span>
<span id="cb70-16"><a href="#cb70-16" aria-hidden="true" tabindex="-1"></a><span class="fu">text</span>((<span class="fu">max</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Age)<span class="sc">+</span><span class="fu">min</span>(Wolfe_Primates<span class="sc">$</span>Attributes<span class="sc">$</span>Age)),.<span class="dv">2</span>, <span class="at">labels=</span><span class="st">"Age"</span>,</span>
<span id="cb70-17"><a href="#cb70-17" aria-hidden="true" tabindex="-1"></a>     <span class="at">cex=</span><span class="fl">0.8</span>, <span class="at">pos=</span><span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Note that we are using <code>age</code> (y-axis) and <code>rev_Rank</code> (x-axis) as coordinates for nodes. Moreover, node colour is dependent on the gender; this is then a <em>multivariate</em> graphical representation of the graph.</p>
<blockquote class="blockquote">
<p>We can see that <em>older males</em> are put on the top of the rank. Rank is correlated with age and gender is fundamental in detemining the position in the rank.</p>
</blockquote>
</section>
<section id="using-a-nominal-attribute-to-generate-coordinates" class="level2">
<h2 class="anchored" data-anchor-id="using-a-nominal-attribute-to-generate-coordinates">Using a nominal attribute to generate coordinates</h2>
<p>We will study the <code>Krackhardt_HighTech</code>: we wish to plot nodes belonging to the same department in the same group. When we want to use a nominal/categorical variable (such as Department) to position those nodes closer to each other who belong to the same category, we will use a trick. The default setting for plotting uses an algorithm that positions nodes close to each other if they are connected (see later). So what if we would create a matrix where we would have a value 1 when two nodes belong to the same category and 0 if they do not and we would use this to generate the positions of the nodes in the figure? We can then use these as coordinates for drawing the nodes in a graph containing the real network.</p>
<p>We first need to generate the matrix containing same department, which we will call <code>MATRIX_A2</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="co">#First, create a matrix with a list of departments</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a><span class="co">#and copy them in columns.</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>MATRIX_A1<span class="ot">&lt;-</span><span class="fu">matrix</span>(</span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Department,</span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>(</span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    Krackhardt_HighTech<span class="sc">$</span>Friendship</span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>],</span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">dim</span>(</span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>    Krackhardt_HighTech<span class="sc">$</span>Friendship</span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    )[<span class="dv">1</span>]</span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a><span class="co">#if the two values are equal, </span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a><span class="co">#it means that two people are in the same department.</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>MATRIX_A2<span class="ot">&lt;-</span>(MATRIX_A1<span class="sc">==</span><span class="fu">t</span>(MATRIX_A1))<span class="sc">*</span><span class="dv">1</span> </span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>MATRIX_A2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13]
 [1,]    1    1    0    1    0    0    0    0    0     0     0     0     0
 [2,]    1    1    0    1    0    0    0    0    0     0     0     0     0
 [3,]    0    0    1    0    1    0    0    0    1     0     0     0     1
 [4,]    1    1    0    1    0    0    0    0    0     0     0     0     0
 [5,]    0    0    1    0    1    0    0    0    1     0     0     0     1
 [6,]    0    0    0    0    0    1    0    1    0     0     0     1     0
 [7,]    0    0    0    0    0    0    1    0    0     0     0     0     0
 [8,]    0    0    0    0    0    1    0    1    0     0     0     1     0
 [9,]    0    0    1    0    1    0    0    0    1     0     0     0     1
[10,]    0    0    0    0    0    0    0    0    0     1     1     0     0
[11,]    0    0    0    0    0    0    0    0    0     1     1     0     0
[12,]    0    0    0    0    0    1    0    1    0     0     0     1     0
[13,]    0    0    1    0    1    0    0    0    1     0     0     0     1
[14,]    0    0    1    0    1    0    0    0    1     0     0     0     1
[15,]    0    0    1    0    1    0    0    0    1     0     0     0     1
[16,]    1    1    0    1    0    0    0    0    0     0     0     0     0
[17,]    0    0    0    0    0    1    0    1    0     0     0     1     0
[18,]    0    0    0    0    0    0    0    0    0     1     1     0     0
[19,]    0    0    1    0    1    0    0    0    1     0     0     0     1
[20,]    0    0    1    0    1    0    0    0    1     0     0     0     1
[21,]    0    0    0    0    0    1    0    1    0     0     0     1     0
      [,14] [,15] [,16] [,17] [,18] [,19] [,20] [,21]
 [1,]     0     0     1     0     0     0     0     0
 [2,]     0     0     1     0     0     0     0     0
 [3,]     1     1     0     0     0     1     1     0
 [4,]     0     0     1     0     0     0     0     0
 [5,]     1     1     0     0     0     1     1     0
 [6,]     0     0     0     1     0     0     0     1
 [7,]     0     0     0     0     0     0     0     0
 [8,]     0     0     0     1     0     0     0     1
 [9,]     1     1     0     0     0     1     1     0
[10,]     0     0     0     0     1     0     0     0
[11,]     0     0     0     0     1     0     0     0
[12,]     0     0     0     1     0     0     0     1
[13,]     1     1     0     0     0     1     1     0
[14,]     1     1     0     0     0     1     1     0
[15,]     1     1     0     0     0     1     1     0
[16,]     0     0     1     0     0     0     0     0
[17,]     0     0     0     1     0     0     0     1
[18,]     0     0     0     0     1     0     0     0
[19,]     1     1     0     0     0     1     1     0
[20,]     1     1     0     0     0     1     1     0
[21,]     0     0     0     1     0     0     0     1</code></pre>
</div>
</div>
<p>We now generate the coordinates using the new matrix MATRIX_A2 and store the coordinates of the graph as a new object (COORD_A2):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>COORD_A2 <span class="ot">&lt;-</span> <span class="fu">gplot</span>(MATRIX_A2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-42-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>As we can see in the graph, the result is what we wanted: nodes from the same department are positioned close to each other. We now can use these coordinates (stored in the object <code>COORD_A2</code>) in the same way we used two continuous attributes before to define the <em>x</em> and <em>y</em> axes (<code>coord=COORD_A2</code>) and obtain a graph for the <em>friendship network</em> where nodes are positioned according to department:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>((Krackhardt_HighTech<span class="sc">$</span>Friendship)<span class="sc">*</span><span class="fu">t</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship), </span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">coord=</span>COORD_A2,</span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,</span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">7</span>,</span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-43-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>While the nodes did not move, we can now visualize the relationship among departments. For example, we can now see that <code>A11</code> is a fundamental element in establishing connections among separated departments.</p>
<p>We could use the same approach to plot another network: the <em>advice</em> network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>((Krackhardt_HighTech<span class="sc">$</span>Advice)<span class="sc">*</span><span class="fu">t</span>(Krackhardt_HighTech<span class="sc">$</span>Advice),</span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">coord=</span>COORD_A2,</span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,</span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">7</span>,</span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-44-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>By using the same coordinates, we can <em>compare</em> and contrast the flow of information among different networks.</p>
</section>
<section id="plotting-with-optimization-algorithms" class="level2">
<h2 class="anchored" data-anchor-id="plotting-with-optimization-algorithms">Plotting with optimization algorithms</h2>
<p><em>Fruchterman and Reingold</em> (1991) is the default in <code>SNA</code> package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(ASNR_Fig07x11,</span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,</span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">9</span>,</span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-45-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p><code>mode="kamadakawai"</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(ASNR_Fig07x11,</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">mode=</span><span class="st">"kamadakawai"</span>,</span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,</span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">9</span>,</span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-46-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<blockquote class="blockquote">
<p><strong>There is not a <em>best</em> algorithm: it all depends on your data and objective.</strong></p>
</blockquote>
<p>They usually help with more complex networks:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship<span class="sc">*</span><span class="fu">t</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship),</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,</span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">9</span>,</span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-47-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>But, with the <em>advice</em> network, visualization is far less useful.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Advice<span class="sc">*</span><span class="fu">t</span>(Krackhardt_HighTech<span class="sc">$</span>Advice),</span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">1</span>,</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">9</span>,</span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-48-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Let’s see an example with a large <em>collaboration</em> network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>))</span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Borgatti_Scientists504<span class="sc">$</span>Collaboration<span class="sc">&gt;</span><span class="dv">3</span>,</span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">mode=</span><span class="st">"kamadakawai"</span>,</span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>.<span class="dv">8</span>,</span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey70"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-49-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="embedding-node-attributes" class="level2">
<h2 class="anchored" data-anchor-id="embedding-node-attributes">Embedding node attributes</h2>
<p>When we analyse a graph visually, we might want to include as much information as possible in the visual representation. There are a few tricks which can be used to include further dimensionality of a graph. We might want to add information about the nodes:</p>
<ul>
<li>Shapes</li>
<li>Size of the dots</li>
<li>Colours</li>
<li>Labels (again, size and colour)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin, </span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey30"</span>,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.lwd=</span>.<span class="dv">4</span>,</span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Tenure<span class="sc">/</span><span class="dv">20</span><span class="sc">+</span><span class="dv">1</span>, <span class="co"># node dimension is dependent on an attribute</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span><span class="st">"white"</span>,</span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>,</span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-50-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Here, node dimension is a function of the <em>tenure</em>.</p>
<p>Categorical variables can be represented by colours and shapes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship_SymMin, </span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">mode=</span><span class="st">"fruchtermanreingold"</span>,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">jitter=</span>F,</span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey30"</span>,</span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.lwd=</span>.<span class="dv">4</span>,</span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span>Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Tenure<span class="sc">/</span><span class="dv">20</span><span class="sc">+</span><span class="dv">1</span>,</span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span><span class="dv">1</span><span class="sc">+</span>(Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Level<span class="sc">==</span><span class="dv">2</span>)<span class="sc">+</span>(Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Level<span class="sc">==</span><span class="dv">3</span>)<span class="sc">*-</span><span class="dv">1</span>,</span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.sides=</span><span class="dv">3</span><span class="sc">+</span>(Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Level<span class="sc">==</span><span class="dv">2</span>)<span class="sc">+</span>(Krackhardt_HighTech<span class="sc">$</span>Attributes<span class="sc">$</span>Level<span class="sc">==</span><span class="dv">3</span>)<span class="sc">*</span><span class="dv">50</span>,</span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>,</span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-51-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
</section>
<section id="representing-valued-networks" class="level1">
<h1>Representing valued networks</h1>
<p>A useful computation might consist in adding values to the ties regarding weights. We will use the <code>colorRampPalette</code> to create a palette of colours to visualize information; in our case, we will extract and use <em>tenure years</em> and visualize it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>Tenure <span class="ot">&lt;-</span> (Borgatti_Scientists504<span class="sc">$</span>Attributes<span class="sc">$</span>Years)</span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="co"># I normalize and discretize the tenure levels between 0 and 10</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a>TenureA <span class="ot">&lt;-</span> (<span class="fu">round</span>(<span class="dv">10</span><span class="sc">*</span>(Tenure)<span class="sc">/</span><span class="fu">max</span>((Tenure))))</span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co"># return functions that interpolate a set of given colours to create new colour palettes</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>colfunc <span class="ot">&lt;-</span> <span class="fu">colorRampPalette</span>(<span class="fu">c</span>(<span class="st">"yellow"</span>, <span class="st">"red"</span>)) </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>COLWB <span class="ot">&lt;-</span> <span class="fu">colfunc</span>(<span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>colorRampPalette</code> takes two values as the extreme of your range of colours and interpolates the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> intermediate colours in the range. We can assign a colour to each level of the variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>TenureA2 <span class="ot">&lt;-</span> TenureA</span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">0</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">1</span>]</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">1</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">2</span>]</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">2</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">3</span>]</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">3</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">4</span>]</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">4</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">5</span>]</span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">5</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">6</span>]</span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">6</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">6</span>]</span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">7</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">7</span>]</span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">8</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">7</span>]</span>
<span id="cb84-11"><a href="#cb84-11" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">9</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">7</span>]</span>
<span id="cb84-12"><a href="#cb84-12" aria-hidden="true" tabindex="-1"></a>TenureA2[TenureA<span class="sc">==</span><span class="dv">10</span>] <span class="ot">&lt;-</span> COLWB[<span class="dv">7</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then plot the graph using the colour to add another dimension to the visualization:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Borgatti_Scientists504<span class="sc">$</span>Collaboration<span class="sc">&gt;</span><span class="dv">3</span>,</span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">mode=</span><span class="st">"kamadakawai"</span>,</span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey80"</span>,</span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.lwd=</span>.<span class="dv">2</span>, </span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span>TenureA2,</span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span><span class="dv">1</span><span class="fl">+.7</span><span class="sc">*</span>(<span class="dv">2</span><span class="sc">-</span>Borgatti_Scientists504<span class="sc">$</span>Attributes<span class="sc">$</span>Sex), </span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.sides=</span>(Borgatti_Scientists504<span class="sc">$</span>Attributes<span class="sc">$</span>Sex<span class="dv">-1</span>)<span class="sc">*</span><span class="dv">47</span><span class="sc">+</span><span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-54-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Note that the vertex shapes and sizes show the sex.</p>
<p>Padgett shows that Medici centrality in a series of networks (trade, marriages) explains their raise to power: relying on degree centrality, we can define the size of the labels with <code>label.cex</code>. To increase visibility we removed the node shapes. To compute the <em>degree</em>, we use the <code>sna::degree</code> function, which will in this case return the number of marriages that connects families as the size of the node.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>PFM_Degree<span class="ot">&lt;-</span>sna<span class="sc">::</span><span class="fu">degree</span>(Padgett_FlorentineFamilies<span class="sc">$</span>Marriage)</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Padgett_FlorentineFamilies<span class="sc">$</span>Marriage, </span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey80"</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.lwd=</span><span class="fl">1.2</span>,</span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span><span class="dv">0</span>,</span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span><span class="st">"white"</span>,</span>
<span id="cb86-9"><a href="#cb86-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>,</span>
<span id="cb86-10"><a href="#cb86-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">5</span>,</span>
<span id="cb86-11"><a href="#cb86-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>PFM_Degree<span class="sc">/</span><span class="dv">14</span><span class="fl">+.45</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-55-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>To effectively substitute the nodes, they are set with dimension 0, allowing labels to substitute them.</p>
<p>Also ties can represent useful information. In this case ties that go in two directions can be represented as straight lines with two arrows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Newcomb_Fraternity<span class="sc">$</span>PreferenceT00<span class="sc">&lt;</span><span class="dv">4</span>,</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"digraph"</span>, <span class="co"># not that we changed the mode</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">#layout</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">jitter=</span>F,</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">#ties</span></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey30"</span>,</span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.lwd=</span><span class="dv">1</span>,</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">arrowhead.cex=</span>.<span class="dv">6</span>,</span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>      <span class="co">#nodes</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span><span class="st">"gold"</span>, </span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span><span class="fl">1.4</span>,</span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a>      <span class="co">#labels</span></span>
<span id="cb87-14"><a href="#cb87-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb87-15"><a href="#cb87-15" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">5</span>,</span>
<span id="cb87-16"><a href="#cb87-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-56-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Or by two curvy lines</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Newcomb_Fraternity<span class="sc">$</span>PreferenceT00<span class="sc">&lt;</span><span class="dv">4</span>,</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">gmode=</span><span class="st">"digraph"</span>,</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>      <span class="co">#layout</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">jitter =</span> F,</span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>      <span class="co">#ties</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.col=</span><span class="st">"grey30"</span>,</span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.lwd=</span><span class="dv">1</span>,</span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">usecurve=</span>T, <span class="co"># Adding this parameter</span></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">edge.curve=</span>.<span class="dv">09</span>, </span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">arrowhead.cex=</span>.<span class="dv">6</span>,</span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a>      <span class="co">#nodes</span></span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span><span class="st">"gold"</span>, </span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.cex=</span><span class="fl">1.4</span>,</span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a>      <span class="co">#labels</span></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a>      <span class="at">displaylabels=</span><span class="cn">TRUE</span>, </span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.pos=</span><span class="dv">5</span>,</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-57-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>One last thing. Frequently a project requires to plot multiple types of ties in the same network; for example, to represent both antagonistic or friendly relationship among a network of people. This kind of information is usually stored in different networks, which are then stored in different <em>adjacency matrices</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>HBG <span class="ot">&lt;-</span> Hawthorne_BankWiring<span class="sc">$</span>Game <span class="co"># Positive ties</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>HBA <span class="ot">&lt;-</span> Hawthorne_BankWiring<span class="sc">$</span>Antagonistic <span class="co"># Negative ties</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We need to rewrite the code so that: if the relation is only positive, it has colour green (<code>3</code>), only negative has colour red (<code>2</code>), while both is black (<code>1</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>HB <span class="ot">&lt;-</span> (<span class="dv">2</span><span class="sc">*</span>HBG<span class="sc">+</span>HBA)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>HBc <span class="ot">&lt;-</span> (HBA<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span>(HBG<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">1</span><span class="sc">+</span>(HBA<span class="sc">==</span><span class="dv">0</span>)<span class="sc">*</span>(HBG<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">3</span><span class="sc">+</span>(HBA<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span>(HBG<span class="sc">==</span><span class="dv">0</span>)<span class="sc">*</span><span class="dv">2</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="co">#Change tie width so it is also visible in black &amp; white</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>HBl <span class="ot">&lt;-</span> (HBA<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span>(HBG<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">5</span><span class="sc">+</span>(HBA<span class="sc">==</span><span class="dv">0</span>)<span class="sc">*</span>(HBG<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span><span class="dv">3</span><span class="sc">+</span>(HBA<span class="sc">==</span><span class="dv">1</span>)<span class="sc">*</span>(HBG<span class="sc">==</span><span class="dv">0</span>)<span class="sc">*</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I am now ready to represent the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mar=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>))</span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(HB, <span class="at">jitter =</span> F, <span class="at">gmode=</span><span class="st">"graph"</span>, <span class="at">displaylabels=</span><span class="cn">TRUE</span>, <span class="at">label.pos=</span><span class="dv">5</span>, </span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">vertex.col=</span><span class="st">"grey90"</span>, <span class="at">edge.lwd=</span>HBl,</span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">label.cex=</span>.<span class="dv">7</span>, <span class="at">vertex.cex=</span><span class="fl">1.4</span>, <span class="at">edge.col=</span>HBc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-60-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</section>
<section id="statistical-properties-of-networks" class="level1">
<h1>Statistical properties of networks</h1>
<p>These statistical properties are used to characterize networks.</p>
<ul>
<li>Monadic (e.g.&nbsp;concerning the single nodes):
<ul>
<li>degree</li>
<li>centrality measures</li>
</ul></li>
<li>Dyadic (e.g.&nbsp;concerning the relationship between two nodes):
<ul>
<li>path,</li>
<li>walks,</li>
<li>connectivity</li>
</ul></li>
<li>That concern groups of nodes:
<ul>
<li>connected components</li>
<li>clustering</li>
<li>assortativity</li>
<li>communities</li>
<li>average shortest path</li>
<li>diameter</li>
</ul></li>
</ul>
<section id="monadic" class="level2">
<h2 class="anchored" data-anchor-id="monadic">Monadic</h2>
<blockquote class="blockquote">
<p>We are talking about the characterization of <em>nodes</em>.</p>
</blockquote>
<p>We use the <em>degree</em>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>: the number of edges incident to a vertex.</p>
<ul>
<li>a node with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k=0</annotation></semantics></math> is <em>isolated.</em></li>
<li>a node with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">k = 1</annotation></semantics></math> is a <em>leaf</em>, or <em>terminal</em> node.</li>
<li>a node with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>&gt;</mo><mo>&gt;</mo><mo stretchy="false" form="prefix">⟨</mo><mi>k</mi><mo stretchy="false" form="postfix">⟩</mo></mrow><annotation encoding="application/x-tex">k &gt;&gt; \langle k \rangle</annotation></semantics></math> is an <em>hub.</em></li>
</ul>
<p>For directed networks:</p>
<ul>
<li><em>In-degree</em>: the number of directed edges that point to a vertex.</li>
<li><em>Out-degree</em>: the number of directed edges that start from a vertex.</li>
</ul>
<p>For <em>undirected, unweighed</em> networks, the degree of a node is the row-sum (or, equivalently, the column-sum) of its <em>rows/columns</em> in the adjacency matrix.</p>
<p>For <em>undirected, weighted</em> networks, the degree of a node is the row-sum (or equivalently the column-sum) of the non-zero elements in its row (or column) in the adjacency matrix.</p>
<ul>
<li>Summing the weights on a row (column) we can also get the so-called <em>Node Strength</em>.</li>
</ul>
<p>For <em>directed</em> networks:</p>
<ul>
<li>the <em>out-degree</em> is the row-sum of their row in the adjacency matrix.</li>
<li>the <em>in-degree</em> is the column-sum of their column in the adjacency matrix.</li>
</ul>
<p>To compute the <em>degree</em> in <code>R</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xDegreeCentrality</span>(Krackhardt_HighTech<span class="sc">$</span>Advice)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Degree nDegree
A01      6    0.30
A02      3    0.15
A03     15    0.75
A04     12    0.60
A05     15    0.75
A06      1    0.05
A07      8    0.40
A08      8    0.40
A09     13    0.65
A10     14    0.70
A11      3    0.15
A12      2    0.10
A13      6    0.30
A14      4    0.20
A15     20    1.00
A16      4    0.20
A17      5    0.25
A18     17    0.85
A19     11    0.55
A20     12    0.60
A21     11    0.55</code></pre>
</div>
</div>
<p>This command prints the origin and each degree; moreover, we also have the <em>average strength of the connection of that node</em> associated to it. Note that in undirected network, it automatically computes the <em>out-degree</em>; to obtain the <em>in-degree</em>, we need to first <em>transpose</em> the matrix.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xDegreeCentrality</span>(<span class="fu">t</span>(Krackhardt_HighTech<span class="sc">$</span>Advice))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Degree nDegree
A01     13    0.65
A02     18    0.90
A03      5    0.25
A04      8    0.40
A05      5    0.25
A06     10    0.50
A07     13    0.65
A08     10    0.50
A09      4    0.20
A10      9    0.45
A11     11    0.55
A12      7    0.35
A13      4    0.20
A14     10    0.50
A15      4    0.20
A16      8    0.40
A17      9    0.45
A18     15    0.75
A19      4    0.20
A20      8    0.40
A21     15    0.75</code></pre>
</div>
</div>
</section>
<section id="dyadic" class="level2">
<h2 class="anchored" data-anchor-id="dyadic">Dyadic</h2>
<blockquote class="blockquote">
<ul>
<li><strong><em>Walk</em>: a sequence of nodes, where each node is adjacent to the next one.</strong></li>
</ul>
</blockquote>
<ul>
<li>The length of a walk is the number of edges in it.</li>
<li>A walk is closed if its first and last vertices coincide.</li>
</ul>
<blockquote class="blockquote">
<ul>
<li><strong><em>Path</em>: a walk that does not repeat nodes or edges.</strong></li>
</ul>
</blockquote>
<p>Finding properties about these aspects is a really important aspect of characterizing a network.</p>
<blockquote class="blockquote">
<ul>
<li><strong><em>Trail</em>: an open walk in which no <em>edge</em> is repeated, but a <em>vertex</em> can be repeated.</strong></li>
</ul>
</blockquote>
<p><img src="Figures/Screenshot%202023-02-16%20at%2013.15.01.png" title="This picture is taken prof. Giorgia Minello slides, Ca' Foscari." class="img-fluid"></p>
<blockquote class="blockquote">
<ul>
<li><strong><em>Circuit</em>: is a closed trail in which there are no repeated <em>edges</em>, but we can have repeated <em>nodes</em>, other than the first <em>vertex</em> which should be the same as the last.</strong></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><strong><em>Cycle</em>: is a closed path with at least three <em>edges</em>, that is there are no repeated <em>edges</em>, in which the first and last <em>nodes</em> are the same, but otherwise all nodes are distinct.</strong></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><strong><em>Eulerian path</em>: it is a path that traverses each edge in a network exactly once. If, the starting and ending vertices are the same it is called an Euler <em>circuit</em> (or Euler <em>tour</em>).</strong></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><strong><em>Hamiltonian path</em>: it is a path that visits each vertex exactly once. <em>Hamilton</em> cycles are <em>Hamilton</em> paths that start and stop at the same vertex.</strong></li>
</ul>
</blockquote>
<p>In contrast to Euler tours, there is no known efficient procedure by which one can determine whether a graph is Hamiltonian or not - that makes the issue of (non)Hamiltonian graphs difficult.</p>
<section id="counting-paths-between-nodes" class="level3">
<h3 class="anchored" data-anchor-id="counting-paths-between-nodes">Counting paths between nodes</h3>
<p>One of the most important characteristic of a network are its paths; we can use the adjacency matrix to compute the number of paths leading from one node to the other. We need to raise it to the power of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math> (length of the path): the number of different paths of length <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>r</mi><annotation encoding="application/x-tex">r</annotation></semantics></math> from <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>v</mi><mi>i</mi></msub><annotation encoding="application/x-tex">v_i</annotation></semantics></math> to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>v</mi><mi>j</mi></msub><annotation encoding="application/x-tex">v_j</annotation></semantics></math> (vertices) equals the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>i</mi><mo>,</mo><mi>j</mi><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(i,j)</annotation></semantics></math>th entry of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>A</mi><mi>r</mi></msup><annotation encoding="application/x-tex">A^r</annotation></semantics></math>, where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">r&gt;0</annotation></semantics></math> is a positive integer. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>N</mi><mrow><mi>i</mi><mi>j</mi></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></msubsup><mo>=</mo><msub><mrow><mo stretchy="true" form="prefix">[</mo><msup><mi>A</mi><mi>n</mi></msup><mo stretchy="true" form="postfix">]</mo></mrow><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding="application/x-tex">
N^{(n)}_{ij} = [A^n]_{ij}
</annotation></semantics></math></p>
<p>Moreover: if</p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>A</mi><mrow><mi>u</mi><mi>v</mi></mrow><mi>n</mi></msubsup><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A^n_{uv} = 0</annotation></semantics></math> there are no walks of length <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> going from <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi><annotation encoding="application/x-tex">u</annotation></semantics></math> to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math>.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>A</mi><mrow><mi>u</mi><mi>v</mi></mrow><mi>n</mi></msubsup><mo>&gt;</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">A^n_{uv} &gt; 0</annotation></semantics></math> is exactly the number of such walks.</li>
</ul>
</section>
<section id="geodesic-paths" class="level3">
<h3 class="anchored" data-anchor-id="geodesic-paths">Geodesic Paths</h3>
<blockquote class="blockquote">
<ul>
<li><strong><em>Geodesic path</em>: a path that is a sequence of vertices connected by edges between vertices <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>u</mi><annotation encoding="application/x-tex">u</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math> with the fewest possible edges. It is the path between two vertices such that <em>no shorter path exists</em>. A geodesic path is also called a <em>shortest path</em> or a <em>graph geodesic</em>.</strong></li>
</ul>
</blockquote>
<p>There is no geodesic path between two vertices if the vertices are not connected by any route through the network; if so, the geodesic distance is <em>infinite</em> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>∞</mi><annotation encoding="application/x-tex">\infty</annotation></semantics></math>) by convention. Geodesic paths are not necessarily unique as it is possible to have two or more paths of equal length between a given pair of vertices.</p>
<blockquote class="blockquote">
<ul>
<li><strong><em>Geodesic distance</em>, also called <em>shortest distance</em>, is the length of the geodesic path. It is the shortest network distance between the vertices in question. In other words, the distance between two vertices in a graph is the number of edges in the shortest path connecting them.</strong></li>
</ul>
</blockquote>
<p>An important measure is the <em>average</em> geodesic distance computed among all the nodes: it can tell you how fast is the flow of information between nodes.</p>
<blockquote class="blockquote">
<ul>
<li><strong><em>Average Shortest Path Length</em>: the average number of steps along the shortest paths for all possible pairs of network nodes. It is a measure of the efficiency of information or mass transport on a network.</strong></li>
</ul>
</blockquote>
<blockquote class="blockquote">
<ul>
<li><strong><em>Eccentricity</em>: the eccentricity of a vertex is its shortest path distance from the farthest node in the graph.</strong></li>
</ul>
</blockquote>
<p>It tells you the maximum distance that might separate two nodes and tells the average maximum distance that information have to travel to reach the extreme areas of a network.</p>
<blockquote class="blockquote">
<ul>
<li><strong><em>Radius</em>: the graph radius is the minimum among all the maximum distances between a vertex to all other vertices. A radius of the graph exists only if it has the diameter.</strong></li>
</ul>
</blockquote>
</section>
<section id="distance-in-digraphs" class="level3">
<h3 class="anchored" data-anchor-id="distance-in-digraphs">Distance in Digraphs</h3>
<p>In directed graphs each path needs to follow the direction of the arrows. In a digraph the distance from node A to B (on an AB path) is generally different from the distance from node B to A (on a BCA path).</p>
</section>
<section id="how-to-find-the-shortest-path" class="level3">
<h3 class="anchored" data-anchor-id="how-to-find-the-shortest-path">How to find the shortest path?</h3>
<blockquote class="blockquote">
<p><strong>Graph geodesics may be found using a <em>Breadth-first</em> search or using <em>Dijkstra</em>’s algorithm.</strong></p>
</blockquote>
<p>The average shortest path can work as a proxy for the <em>speed</em> at which information travels between nodes and along the network. When we are dealing with bigger graphs, we need methods to solve the problem in an algorithmic view, since visual analysis is not feasible.</p>
<ul>
<li><p><em>Breadth-first</em> search: you start from the node of interest and start exploring the network, moving one node at a time and exploring all nodes in the network.</p></li>
<li><p><em>Dijkstra</em>’s algorithm:</p>
<ol type="1">
<li>Mark the ending vertex with a distance of zero. Designate this vertex as current and record the distance in <code>[]</code> after the vertex name.</li>
<li>Find all vertices leading to the current vertex. Calculate their distances to the end. Since we already know the distance the current vertex, mark the distance to the end (now, current vertex).</li>
</ol>
<ul>
<li>Note that once you visited a node, you do not need to visit it again.</li>
</ul>
<ol start="3" type="1">
<li>Move to the vertex with the shortest distance; set is as the starting point, then add its distance to its neighbours.</li>
</ol>
<ul>
<li>Beware that travelling to the same node from different starting point might yield different distances.</li>
</ul>
<ol start="4" type="1">
<li>The shortest path will be the one that generated the minimum distance.</li>
</ol></li>
</ul>
<p>Some remarks about <em>Dijkstra</em>’s algorithm:</p>
<ul>
<li>It is an <em>optimal</em> algorithm, meaning that it always produces the actual shortest path.</li>
<li>It is <em>efficient</em>, meaning that it can be implemented in a reasonable amount of time; in this case, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msqrt><mi>V</mi></msqrt><annotation encoding="application/x-tex">\sqrt{V}</annotation></semantics></math>, or the number of nodes.</li>
<li>It takes around <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msup><mi>V</mi><mn>2</mn></msup><annotation encoding="application/x-tex">V^2</annotation></semantics></math> calculations, where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>V</mi><annotation encoding="application/x-tex">V</annotation></semantics></math> is the number of vertices in a graph.</li>
</ul>
<p>This algorithm is the default choice in <code>R</code> when computing the shortest distance. It is also used to compute the <em>average shortest path</em>.</p>
<blockquote class="blockquote">
<p><strong>It is possible that there is no path at all between a given pair of vertices in a network: these are called <em>disconnected networks</em>. The implication is that some areas are not connected to the rest of the network. This property can change over time.</strong></p>
</blockquote>
</section>
<section id="connected-components" class="level3">
<h3 class="anchored" data-anchor-id="connected-components">Connected components</h3>
<p>The adjacency matrix of a network with several components can be written in a <em>block-diagonal form</em>: all non-zero element are confined in sub-matrices (<em>squares</em>), with all other elements being zero.</p>
<blockquote class="blockquote">
<p><strong>The vast majority of real networks host most of their nodes in a single connected component, also known as <em>GCC</em> (Giant Connected Component).</strong></p>
</blockquote>
</section>
<section id="laplacian-matrix" class="level3">
<h3 class="anchored" data-anchor-id="laplacian-matrix">Laplacian Matrix</h3>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mtable><mtr><mtd columnalign="right"><msub><mi>L</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">{</mo><mtable><mtr><mtd columnalign="left"><mstyle mathvariant="normal"><mi>d</mi><mi>e</mi><mi>g</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>v</mi><mi>i</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mi>i</mi><mi>f</mi><mspace width="0.222em"></mspace><mi>i</mi><mo>=</mo><mi>j</mi></mtd></mtr><mtr><mtd columnalign="left"><mo>−</mo><mn>1</mn><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mi>i</mi><mi>f</mi><mspace width="0.222em"></mspace><mi>i</mi><mo>≠</mo><mi>j</mi><mspace width="0.222em"></mspace><mi>a</mi><mi>n</mi><mi>d</mi><mspace width="0.222em"></mspace><msub><mi>v</mi><mi>i</mi></msub><mspace width="0.222em"></mspace><mi>i</mi><mi>s</mi><mspace width="0.222em"></mspace><mi>a</mi><mi>d</mi><mi>j</mi><mi>a</mi><mi>c</mi><mi>e</mi><mi>n</mi><mi>t</mi><mspace width="0.222em"></mspace><mi>t</mi><mi>o</mi><mspace width="0.222em"></mspace><msub><mi>v</mi><mi>j</mi></msub></mtd></mtr><mtr><mtd columnalign="left"><mn>0</mn><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mi>o</mi><mi>t</mi><mi>h</mi><mi>e</mi><mi>r</mi><mi>w</mi><mi>i</mi><mi>s</mi><mi>e</mi></mtd></mtr></mtable></mrow></mtd></mtr></mtable><annotation encoding="application/x-tex">
\begin{aligned}
L_{i,j} = 
\begin{cases}
\mathrm{deg}(v_i) \ \ \ \  if \ i=j \\
-1 \ \ \ \ \ \ \ \  if \ i \neq j \ and \ v_i \ is \ adjacent \ to \ v_j\\
0 \ \ \ \ \ \ \ \ \ \ \ otherwise
\end{cases}
\end{aligned}
</annotation></semantics></math></p>
<p>Or, equivalently, the matrix:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>L</mi><mo>=</mo><mi>D</mi><mo>−</mo><mi>A</mi></mrow><annotation encoding="application/x-tex">
L = D - A
</annotation></semantics></math></p>
</section>
<section id="connectivity" class="level3">
<h3 class="anchored" data-anchor-id="connectivity">Connectivity</h3>
<p>A directed graph is <em>strongly connected</em> if there is a path from <em>a</em> to <em>b</em> and from <em>b</em> to <em>a</em> whenever both are vertices in a graph. A directed graph is <em>weakly connected</em> if there is a path between any two vertices in the underlying undirected graph.</p>
<blockquote class="blockquote">
<p><strong>All this indicators and measures will be used to study the statistical properties of networks at scale.</strong></p>
</blockquote>
</section>
</section>
<section id="triadic-characteristics" class="level2">
<h2 class="anchored" data-anchor-id="triadic-characteristics">Triadic characteristics</h2>
<blockquote class="blockquote">
<p><strong><em>Local clustering</em>: clustering associated with a given individual.</strong></p>
</blockquote>
<p>In other words, we are counting and <em>computing all close triads</em> of elements all connected to each other and dividing it by all the connections of a given node (<em>open triads</em>). It is a <em>normalized</em> measure.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>c</mi><mi>i</mi></msub><mo>=</mo><mfrac><mrow><mo stretchy="true" form="prefix">|</mo><mo stretchy="false" form="prefix">{</mo><msub><mi>e</mi><mrow><mi>j</mi><mi>k</mi></mrow></msub><mo>:</mo><msub><mi>v</mi><mi>j</mi></msub><mo>,</mo><msub><mi>v</mi><mi>k</mi></msub><mo>∈</mo><msub><mi>N</mi><mi>i</mi></msub><mi>&amp;</mi><msub><mi>e</mi><mrow><mi>j</mi><mi>k</mi></mrow></msub><mo>∈</mo><mi>E</mi><mo stretchy="false" form="postfix">}</mo><mo stretchy="true" form="postfix">|</mo></mrow><mrow><msub><mi>k</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>k</mi><mi>i</mi></msub><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">
c_i = \frac {| \{ e_{jk} : v_j, v_k \in N_i \&amp; e_{jk} \in E\} |} {k_i(k_i -1)}
</annotation></semantics></math></p>
<p>The <em>average clustering of a network</em> can also be computed.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>C</mi><mo accent="true">‾</mo></mover><mo>=</mo><mfrac><mn>1</mn><mi>n</mi></mfrac><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>c</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">
\bar{C} = \frac {1}{n} \sum_i c_i
</annotation></semantics></math></p>
<section id="triadic-closure" class="level3">
<h3 class="anchored" data-anchor-id="triadic-closure">Triadic closure</h3>
<blockquote class="blockquote">
<p><strong>The <em>triadic closure</em> is the tendency, especially in social system, to <em>close triangles</em>. The tendency to connect is stronger among three nodes, if two of them are already connected.</strong></p>
</blockquote>
<p>This implies that real social networks tend to have a large number of closed triangles and thus a high <em>average clustering</em>; such effect might be caused by:</p>
<ul>
<li><em>Trust-transitivity</em>.</li>
<li><em>Enhanced opportunities</em></li>
<li><em>Decreasing interaction costs</em>.</li>
</ul>
</section>
<section id="triadic-balance" class="level3">
<h3 class="anchored" data-anchor-id="triadic-balance">Triadic balance</h3>
<p>A key dynamic process in <em>signed</em> networks: closed triads tend to be stable if they involve an <em>odd</em> number of positive relations. Unbalanced triads tend to evolve to a balanced one, by changing one interaction signs or opening the triad.</p>
<p>It is a very powerful dynamic which shapes the topology of networks.</p>
</section>
</section>
<section id="assortativity" class="level2">
<h2 class="anchored" data-anchor-id="assortativity">Assortativity</h2>
<blockquote class="blockquote">
<p><strong>It measures the tendency of nodes to be connected with other nodes with similar degree.</strong></p>
</blockquote>
<ul>
<li><em>Positive</em> assortativity: high degree nodes tend to be connected with high degree nodes (and low degree nodes with low degree nodes).</li>
<li><em>Negative</em> assortativity (<em>dissortativity</em>): high degree nodes tend to be connected with low degree nodes.</li>
</ul>
<p>Social networks are typically <em>assortative</em>, which technological networks <em>dissortative.</em></p>
<p>It can be quantified using the Pearson coefficient (<em>correlation</em>) of the degrees of adjacent nodes.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>r</mi><mo>=</mo><mfrac><mrow><munder><mo>∑</mo><mrow><mi>i</mi><mi>j</mi></mrow></munder><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>−</mo><mfrac><mrow><msub><mi>k</mi><mi>i</mi></msub><msub><mi>k</mi><mi>j</mi></msub></mrow><mrow><mn>2</mn><mi>E</mi></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>k</mi><mi>i</mi></msub><msub><mi>k</mi><mi>j</mi></msub></mrow><mrow><munder><mo>∑</mo><mrow><mi>i</mi><mi>j</mi></mrow></munder><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>δ</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>−</mo><mfrac><mrow><msub><mi>k</mi><mi>i</mi></msub><msub><mi>k</mi><mi>j</mi></msub></mrow><mrow><mn>2</mn><mi>E</mi></mrow></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><msub><mi>k</mi><mi>i</mi></msub><msub><mi>k</mi><mi>j</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">
r = \frac {\sum_{ij}(A_{ij} - \frac{k_ik_j}{2E} )k_ik_j}{\sum_{ij}(A_{ij}\delta_{ij} - \frac{k_ik_j}{2E})k_ik_j}
</annotation></semantics></math></p>
<p>The assortativity can be computed only for nodes with a <em>given</em> degree and it is possible to visualize the general tendency of your network in the <em>slope</em> of the following function, which looks at the average nearest neighbour degree of nodes with given degree:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mrow><mi>n</mi><mi>n</mi></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mn>1</mn><msub><mi>N</mi><mi>k</mi></msub></mfrac><munder><mo>∑</mo><mi>i</mi></munder><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>δ</mi><mrow><msub><mi>k</mi><mi>i</mi></msub><mo>,</mo><mi>k</mi></mrow></msub><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mn>1</mn><mi>k</mi></mfrac><munder><mo>∑</mo><mi>j</mi></munder><msub><mi>A</mi><mrow></mrow></msub><mi>i</mi><mi>j</mi><msub><mi>k</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">
k_{nn}(k) = \frac {1}{N_k} \sum_i \left [ \delta_{k_i, k} \left ( \frac{1}{k} \sum _j A_{}ij k_j\right ) \right ]
</annotation></semantics></math></p>
<p>This is equivalent to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mi>k</mi><mo>&gt;</mo></mrow><annotation encoding="application/x-tex">&lt;k&gt;</annotation></semantics></math>, which is the <em>conditional probability</em> that an edge of node with degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math> points to a node with degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mi>′</mi></mrow><annotation encoding="application/x-tex">k′</annotation></semantics></math>.</p>
<blockquote class="blockquote">
<p><strong>Computing this variables and statistical measures for different networks allow to create classifications and opens the way for more analysis.</strong></p>
</blockquote>
</section>
<section id="why-are-these-measures-important" class="level2">
<h2 class="anchored" data-anchor-id="why-are-these-measures-important">Why are these measures important?</h2>
<ul>
<li><em>Average Shortest Path</em>:
<ul>
<li>It is a good indication of how fast information, diseases, goods, et. spread in the network.</li>
</ul></li>
<li><em>Clustering</em>:
<ul>
<li>Connected triads are important in social networks.</li>
<li>In social networks clustering tends to be high, due to triadic closure
<ul>
<li><em>“If A is connected with B and with C it is very likely that B and C are themselves connected with each other”</em>.</li>
</ul></li>
<li>Important social phenomenon happen on triads, e.g.&nbsp;<em>triadic balance</em>:
<ul>
<li>“The friend of my friend is my friend”, “The enemy of my enemy is my friend”, “The friend of my enemy is my enemy”</li>
<li>A triad is balanced if the number of +s is odd.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="centrality" class="level1">
<h1>Centrality</h1>
<p>We measure nodes importance using so-called <em>centrality</em>: it is a proxy to capture which are the <em>most important node</em>. It has nothing to do with <em>position</em> in a network. There are different possible definitions, each measure varying by context and purpose. It is a local measure, relative to the <em>rest</em> of the network: it is not expressing a global property.</p>
<ul>
<li><em>Metric</em> for network analysis.</li>
<li><em>Element-based</em>.
<ul>
<li>It can be used to <em>rank</em> individuals in a network, inducing a centrality ranking on the nodes not based on the nature of the node.</li>
</ul></li>
<li>Topological measure that scores nodes by their importance as a part of the big network.</li>
</ul>
<p>Centrality measures are widely used:</p>
<ul>
<li>You can target central individuals with marketing or other preventive measures.</li>
<li>You can attack/defend differently central nodes (e.g.&nbsp;strategical infrastructures).</li>
<li>Epidemiology control (e.g., target prostitutes with s.t.d. prevention campaigns).</li>
<li>Power in exchange networks.</li>
</ul>
<p>The key question is:</p>
<blockquote class="blockquote">
<p><strong>Who’s important, based on their network position?</strong></p>
</blockquote>
<p>This depends on the context and purpose of the measure.</p>
<p>In each of the following networks, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math> as higher centrality than <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math> according to a particular measure. In other words, position (e.g.&nbsp;<em>choke points</em>) in a network matters when considering centrality.</p>
<p>It is always possible, once fixed a contest, to measure or distance from a <em>focal</em> node (a node which is particularly important). An example of this is the <em>Erdös number</em>.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figures/Screenshot%202023-02-20%20at%2011.46.48.png" title="This picture is taken prof. Giorgia Minello slides, Ca' Foscari." class="img-fluid figure-img"></p>
</figure>
</div>
<section id="degree-centrality" class="level2">
<h2 class="anchored" data-anchor-id="degree-centrality">Degree centrality</h2>
<blockquote class="blockquote">
<p><strong><em>Node degree</em> is one of the basic centrality measures: it is equal to the number of node neighbours.</strong></p>
</blockquote>
<p>A high degree centrality value of a given node implies that the node has many neighbours:</p>
<ul>
<li>It is then closely related to its neighbours (in weighted similarity graphs).</li>
<li>However, this measure does not capture cascade effects, such as <em>“I am more important if my neighbours are important”</em>.</li>
</ul>
<p>How many neighbours does a node have? Often it is enough to find important nodes, but not always.</p>
<ul>
<li>Twitter users could have most contacts which are spam-bots.</li>
<li>The webpages/Wikipedia pages with most links are often lists of references.</li>
</ul>
<blockquote class="blockquote">
<p><strong>In other words, the centrality is relative to the task and measure you want to obtain.</strong></p>
</blockquote>
<p>Moreover, it is just a <em>local</em> measure of the importance of a node within a graph: node degree is local, not <em>global</em> and therefore it does not show us the global picture.</p>
<section id="normalize-degree-centrality" class="level3">
<h3 class="anchored" data-anchor-id="normalize-degree-centrality">Normalize degree centrality</h3>
<blockquote class="blockquote">
<p><strong>The <em>normalized degree centrality</em> is the degree divided by the maximum possible degree, expressed as a percentage. The normalized values should only be used for binary data.</strong></p>
</blockquote>
<p>The degree centrality thesis reads as follows:</p>
<ul>
<li>A node is important if it has many neighbours, or, in the directed case, if there are many other nodes that link to it, or if it links to many other nodes.</li>
<li>If the network is directed, we have two versions of the measure:
<ul>
<li>In-degree is the number of in-coming links, or the number of predecessor nodes.</li>
<li>Out-degree is the number of out-going links, or the number of successor nodes.</li>
</ul></li>
</ul>
<p>Typically, we are interested in <em>in-degree</em>, since in-links are given by other nodes in the network, while <em>out-links</em> are determined by the node itself.</p>
</section>
<section id="closeness-centrality" class="level3">
<h3 class="anchored" data-anchor-id="closeness-centrality">Closeness centrality</h3>
<p>Since in each network is improbable to be connected to every other peer, we need the concept of <em>closeness centrality</em>, which measures the topology of a node and its position relative to other nodes and the <em>center</em> of the network. In other words: <em>one wants to be in the “middle” of things, not too far from the center.</em> A shop, for example, might wish to be positioned close to every destination as it makes it easy to reach from its customers.</p>
<p>For this use case, closeness centrality would be a good metric to choose your location since it measures the average path length. We want to understand which nodes have an easier life in sending information to other nodes.</p>
<p>To compute it:</p>
<ul>
<li>Calculate all shortest paths starting from that node to every possible destination in the network.</li>
<li>Sum these distances to obtain the <em>total distance</em> measure.</li>
<li>Take the average of this value by dividing it by the number of all possible destinations, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><annotation encoding="application/x-tex">(n-1)</annotation></semantics></math>.</li>
<li>Take the opposite (<em>inverse</em>) of what we have just computed.</li>
</ul>
<blockquote class="blockquote">
<p><strong>The closeness centrality of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math> is nothing more than its inverse average path length.</strong></p>
</blockquote>
<ul>
<li><em>Farness</em>: average of length of shortest paths to all other nodes.</li>
<li><em>Closeness</em>: inverse of the <em>Farness</em> (normalized by the number of nodes).</li>
</ul>
<p>The mathematical definition is: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mn>1</mn><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></mfrac><munder><mo>∑</mo><mrow><mi>j</mi><mo>≠</mo><mi>i</mi></mrow></munder><msub><mi>d</mi><mrow><mi>j</mi><mi>i</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">
C_i = \left (  \frac {1}{n-1} \sum_{j \neq i} d_{ji} \right )^{-1}
</annotation></semantics></math></p>
<p>The higher your closeness centrality value, the more your node is close to other nodes in your network: the highest value is 1. Two limitations however are associated with this measure:</p>
<ol type="1">
<li>It spans a very small dynamic range: in most networks, the range (<em>max - min</em>) is small.</li>
<li>In disconnected graph, centrality is zero for all nodes.</li>
</ol>
</section>
<section id="betweenness-centrality" class="level3">
<h3 class="anchored" data-anchor-id="betweenness-centrality">Betweenness centrality</h3>
<p>We want to use the whole topology to define the centrality of a node: it is one of the most important measures. <em>Betweenness</em> counts <em>paths</em>: we still calculate all shortest paths between al possible pairs of origins and destinations, although we count the <em>number of paths passing through</em> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math> of which <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math> is <em>neither an origin nor a destination</em>. Such a measure then works as a proxy of the relevance of a node in a network connections and its relevance in the spread of information.</p>
<blockquote class="blockquote">
<p><strong>The main assumption is that important vertices are bridges over which information flows. If information spreads via shortest paths, important nodes are found on many shortest paths.</strong></p>
</blockquote>
<p>We wish to measure the percentage of shortest path where our node lies in them. A node with high betweenness centrality may have considerable influence over the information passing between other nodes: it is a much better measure of <em>influence</em> over the whole network, not only at a local level.</p>
<p>Nodes with a high BC are also called <em>network broker</em>: the network structure is dependent on its presence and so is the flow of information.</p>
<blockquote class="blockquote">
<p><strong>How to compute: it is the proportion of shortest paths between all other pairs of nodes that the given node lies on.</strong></p>
</blockquote>
<p>However, the shortest path is not necessarily <em>unique</em>.</p>
<blockquote class="blockquote">
<p><strong>If there are <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> alternative paths not passing through the node, then the path contributes only <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">1/n</annotation></semantics></math> to the node’s centrality.</strong></p>
</blockquote>
<p>Another issue regards <em>hubs</em>: in the context of a network, a hub is a node with a large degree, meaning it has connections with many other nodes. However, even though they might have a high BC, this is not necessarily implying that they work as <em>brokers</em>.</p>
<blockquote class="blockquote">
<p><strong>How many paths would become longer if node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math> would disappear from the network? How much is the network structure dependent on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>v</mi><mi>’</mi></mrow><annotation encoding="application/x-tex">v’</annotation></semantics></math>s presence?</strong></p>
</blockquote>
<p>Since real world networks have hubs which are closer to most nodes, the shortest paths will use them often.</p>
<ul>
<li>As a result, betweenness centrality distributes over many orders of magnitude, just like the degree.</li>
<li>Unlike the degree, it considers more complex information than simply the number of connections.</li>
</ul>
<p>The betweenness centrality of a node scales with the number of pairs of nodes in the network: we can find different measures, such as <em>standardized, normalized, scaled</em> betweenness centrality.</p>
<blockquote class="blockquote">
<p><strong>Scaled formula:</strong></p>
</blockquote>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>B</mi><mi>C</mi><mi>′</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>i</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mrow><mi>B</mi><mi>C</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>i</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo>−</mo><mn>2</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">]</mo></mrow><mi>/</mi><mn>2</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">
BC'(i) = \frac {BC(i)}{[(N-1)(N-2)]/2}
</annotation></semantics></math></p>
<p>Its values are typically distributed over a wide range: its maximum value occurs when the vertex lies on the shortest path between every other pair of vertices, such as in <em>stars networks</em>.</p>
<p>If the graph is <em>not connected</em>, it is by convention set to 0 for unreachable pairs. Betweenness centrality shares with closeness a drawback: computational complexity, which means that for large structure it is not possible to compute.</p>
</section>
<section id="flow-betweenness-centrality" class="level3">
<h3 class="anchored" data-anchor-id="flow-betweenness-centrality">Flow betweenness centrality</h3>
<blockquote class="blockquote">
<p><strong>Used generally for information flow</strong>.</p>
</blockquote>
<p>Betweenness only uses geodesic paths: yet, information can also flow on longer paths. While betweenness focuses just on the geodesic, flow betweenness centrality focuses on how information might flow through many different paths. The flow betweenness is a measure of the contribution of a vertex to all possible maximum flows.</p>
<p>The flow approach to centrality assumes that actors will use all the pathways that connect them. For each actor, the measure reflects the number of times the actor is in a flow (any flow) between all other pairs of actors (generally, as a ratio of the total flow betweenness that does not involve the actor).</p>
</section>
<section id="edge-betweenness-centrality" class="level3">
<h3 class="anchored" data-anchor-id="edge-betweenness-centrality">Edge betweenness centrality</h3>
<p>In addition to calculating betweenness measures for actors, we can also calculate betweenness measures for edges.</p>
<blockquote class="blockquote">
<p><strong>Edge betweenness is the degree to which an edge makes other connections possible.</strong></p>
</blockquote>
</section>
</section>
<section id="centralities-a-comparison" class="level2">
<h2 class="anchored" data-anchor-id="centralities-a-comparison">Centralities: a comparison</h2>
<p>Which centrality measure is really useful? It depends on the <em>objective</em>, which is <em>what we want to measure</em>.</p>
<ul>
<li>In a friendship network, <em>degree centrality</em> would correspond to who is the most popular kid. This might be important for certain questions.</li>
<li><em>Closeness centrality</em> would correspond to who is closest to the rest of the group, so this would be relevant if we wanted to understand who to inform or influence for information to spread to the rest of the network.</li>
<li><em>Betweenness</em> would be relevant if the thought experiment was which individuals would have to be taken out of the network in order to break the network into separate clusters.</li>
</ul>
<blockquote class="blockquote">
<p><strong>Note that none of them is a wrong measure, they just reveal different features: this means that it is usually a good practice to compute a set of them. Moreover, each centrality measure is a proxy of an underlying network process. If such a process is irrelevant for the network then the centrality measure makes no sense.</strong></p>
</blockquote>
<p>They are best used to <em>explore</em> a network.</p>
<p><img src="Figures/Screenshot%202023-02-21%20at%2011.21.41.png" title="This picture is taken prof. Giorgia Minello slides, Ca' Foscari." class="img-fluid"></p>
</section>
<section id="connectivity-based-centralities" class="level2">
<h2 class="anchored" data-anchor-id="connectivity-based-centralities">Connectivity based centralities</h2>
<section id="eigenvectors-centrality" class="level3">
<h3 class="anchored" data-anchor-id="eigenvectors-centrality">Eigenvectors centrality</h3>
<blockquote class="blockquote">
<p><strong>An <em>eigenvector</em> is a vector whose direction remains unchanged when a linear transformation is applied to it.</strong></p>
</blockquote>
<p><em>Are you connected to important nodes?</em></p>
<ul>
<li>Having more friends does not by itself guarantee that someone is more important.</li>
<li>Having more important friends provides a stronger signal.</li>
</ul>
<p>This kind of connections also considers the <em>importance</em> of other nodes. In a network, this however implies a <em>recursive</em> problem.</p>
<blockquote class="blockquote">
<p><strong>Relationships with more important nodes confer more importance than relationships with less important nodes.</strong></p>
</blockquote>
<p>The <em>eigenvector centrality</em> is computed by calculating an eigenvector on the adjacency matrix: it is a generalization of the degree centrality and characterizes the global prominence of a vertex in a graph. The main idea is to compute the centrality of a node as a function of the centralities of its neighbours: the centrality of a node is proportional to the sum of scores of its neighbours.</p>
<blockquote class="blockquote">
<p><strong>The eigenvector centrality of each node is given by the entries of the leading <em>eigenvector</em> (the one corresponding to the largest <em>eigenvalue</em>). It is extremely useful, one of the most common ones used for non-directed networks: however, it does not work in <em>acyclic</em> (directed) networks, unless we are in a network in which every node can be reached: we need only one <em>weakly</em> connected component.</strong></p>
</blockquote>
</section>
<section id="katz-centrality" class="level3">
<h3 class="anchored" data-anchor-id="katz-centrality">Katz centrality</h3>
<p>A major problem with eigenvector centrality arises when it deals with <em>directed graphs</em>: each of the nodes pass some of its importance to its peers; in directed networks, some node will only be able to send out <em>importance</em> and not to receive it.</p>
<blockquote class="blockquote">
<p><strong>EC works well only if the graph is (strongly) connected.</strong></p>
</blockquote>
<p>Katz centrality works around this problem by giving a small amount of centrality for <em>free</em>, the minimum of centrality a node can transfer to other nodes by referring to them.</p>
<blockquote class="blockquote">
<ul>
<li>Degree centrality of node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> measures the local influence of a node.</li>
<li>Eigenvector centrality measures the global influence of a node within the network.</li>
<li>Katz centrality covers both the local and global influence of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>.</li>
</ul>
<p><strong>A node is important if it is linked from other important nodes or if it is highly linked.</strong></p>
</blockquote>
<p>No vertex has zero centrality and will contribute at least <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>β</mi><annotation encoding="application/x-tex">\beta</annotation></semantics></math> to other vertices centrality: the main issue is that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math> (<em>dampening factor</em>) and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>β</mi><annotation encoding="application/x-tex">\beta</annotation></semantics></math> should be chosen before the computation:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub><mo>=</mo><mi>α</mi><munder><mo>∑</mo><mi>j</mi></munder><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><msub><mi>x</mi><mi>j</mi></msub><mo>+</mo><mi>β</mi></mrow><annotation encoding="application/x-tex">
x_i = \alpha \sum_j A_{ij} x_j + \beta
</annotation></semantics></math></p>
<p>It is recommended to choose <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math> between 0 and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi>/</mi><mi>ρ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>A</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">1/\rho(A)</annotation></semantics></math>, where <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>ρ</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>A</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\rho(A)</annotation></semantics></math> is the largest eigenvalue of A.</p>
<blockquote class="blockquote">
<p><strong>It is a matter of relative weights. When you increase <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>α</mi><annotation encoding="application/x-tex">\alpha</annotation></semantics></math>, you are increasing the importance of being connected to important individuals. Decreasing, you are giving more weight to the importance of being connected.</strong></p>
</blockquote>
<p>The main issue with this measure is: when a node becomes very central in a network, it passes its centrality to all its outgoing links, making all those nodes very popular. However, they might not be important. As a solution, We can divide the value of passed centrality by the number of outgoing links, e.g., out degree of that node. This way, each connected neighbour gets a fraction of the source node’s centrality.</p>
<p>If your node connection has a high centrality, you will receive only a small proportion of it.</p>
</section>
<section id="pagerank" class="level3">
<h3 class="anchored" data-anchor-id="pagerank">PageRank</h3>
<p>To reduce the danger of fake or biased central nodes Larry Page and Sergey Brin invented a new centrality measure that flattens the effect of hub connection using a damping factor.</p>
<ul>
<li>The importance of a Web page relies on the importance of other Web pages pointing to it.</li>
<li>The PageRank of a page is the sum of the PageRanks of all pages pointing to it.</li>
<li>The importance of the fact that one relevant Web page is pointing to another depends on the initial number of recommendations on the first page.</li>
</ul>
<p>The importance of a page is rescaled by a factor depending on the <em>out-degree</em> of a node.</p>
</section>
<section id="wrap-up" class="level3">
<h3 class="anchored" data-anchor-id="wrap-up">Wrap up</h3>
<blockquote class="blockquote">
<ul>
<li><strong>If graph is undirected, use Eigen Vector Centrality.</strong></li>
<li><strong>If graph is directed, using Katz or PageRank is dependent upon the situation.</strong></li>
<li><strong>If you want nodes that are extremely central to highly influence its neighbours, then use Katz; else, use <em>PageRank.</em></strong></li>
</ul>
</blockquote>
</section>
</section>
</section>
<section id="network-statistics-in-r" class="level1">
<h1>Network statistics in <code>R</code></h1>
<p>All the basic libraries contains all the functions needed. The analysis will begin with the <code>Krackhardt_HighTech</code> and the network regarding work relationships in a high-tech firm. We will use in particular the <em>friendship</em> network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>Krackhardt_HighTech<span class="sc">$</span>NetworkInfo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Name Mode Directed Diagonal Values  Class
1     Advice    A     TRUE    FALSE Binary matrix
2 Friendship    A     TRUE    FALSE Binary matrix
3   ReportTo    A     TRUE    FALSE Binary matrix</code></pre>
</div>
</div>
<p>Note that it is a <em>directed</em> network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>Krackhardt_HighTech<span class="sc">$</span>Friendship</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19
A01   0   1   0   1   0   0   0   1   0   0   0   1   0   0   0   1   0   0   0
A02   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0
A03   0   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1
A04   1   1   0   0   0   0   0   1   0   0   0   1   0   0   0   1   1   0   0
A05   0   1   0   0   0   0   0   0   1   0   1   0   0   1   0   0   1   0   1
A06   0   1   0   0   0   0   1   0   1   0   0   1   0   0   0   0   1   0   0
A07   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A08   0   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A09   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A10   0   0   1   0   1   0   0   1   1   0   0   1   0   0   0   1   0   0   0
A11   1   1   1   1   1   0   0   1   1   0   0   1   1   0   1   0   1   1   1
A12   1   0   0   1   0   0   0   0   0   0   0   0   0   0   0   0   1   0   0
A13   0   0   0   0   1   0   0   0   0   0   1   0   0   0   0   0   0   0   0
A14   0   0   0   0   0   0   1   0   0   0   0   0   0   0   1   0   0   0   0
A15   1   0   1   0   1   1   0   0   1   0   1   0   0   1   0   0   0   0   1
A16   1   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A17   1   1   1   1   1   1   1   1   1   1   1   1   0   1   1   1   0   0   1
A18   0   1   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0   0
A19   1   1   1   0   1   0   0   0   0   0   1   1   0   1   1   0   0   0   0
A20   0   0   0   0   0   0   0   0   0   0   1   0   0   0   0   0   0   1   0
A21   0   1   0   0   0   0   0   0   0   0   0   1   0   0   0   0   1   1   0
    A20 A21
A01   0   0
A02   0   1
A03   0   0
A04   0   0
A05   0   1
A06   0   1
A07   0   0
A08   0   0
A09   0   0
A10   1   0
A11   0   0
A12   0   1
A13   0   0
A14   0   0
A15   0   0
A16   0   0
A17   1   1
A18   0   0
A19   1   0
A20   0   0
A21   0   0</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-65-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>From such a visualization we can immediately see that some links are not reciprocated.</p>
<p>Density is one of the first statistics that we will use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xDensity</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  .  ------------------------------------------------------------------  
  .   Number of valid cells: 420 
  .   which corresponds to: 100 % of considered cells. 
  .  ------------------------------------------------------------------  </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.2428571</code></pre>
</div>
</div>
<p>This means that 24% of all possible diads are connected by a directed link.</p>
<p>We will compute the distance between each pair of nodes in the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xGeodesicDistance</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19
A01   0   1   3   1   3   3   3   1   3   3   3   1   4   3   3   1   2   2   3
A02   1   0   3   2   3   3   3   2   3   3   3   2   4   3   3   2   2   1   3
A03   2   2   0   3   2   3   2   3   3   4   2   2   3   1   2   3   3   3   1
A04   1   1   2   0   2   2   2   1   2   2   2   1   3   2   2   1   1   2   2
A05   2   1   2   2   0   2   2   2   1   2   1   2   2   1   2   2   1   2   1
A06   2   1   2   2   2   0   1   2   1   2   2   1   3   2   2   2   1   2   2
A07 Inf Inf Inf Inf Inf Inf   0 Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf
A08   2   2   3   1   3   3   3   0   3   3   3   2   4   3   3   2   2   3   3
A09 Inf Inf Inf Inf Inf Inf Inf Inf   0 Inf Inf Inf Inf Inf Inf Inf Inf Inf Inf
A10   2   2   1   2   1   3   3   1   1   0   2   1   3   2   3   1   2   2   2
A11   1   1   1   1   1   2   2   1   1   2   0   1   1   2   1   2   1   1   1
A12   1   2   2   1   2   2   2   2   2   2   2   0   3   2   2   2   1   2   2
A13   2   2   2   2   1   3   3   2   2   3   1   2   0   2   2   3   2   2   2
A14   2   3   2   3   2   2   1   3   2   4   2   3   3   0   1   3   3   3   2
A15   1   2   1   2   1   1   2   2   1   3   1   2   2   1   0   2   2   2   1
A16   1   1   4   2   4   4   4   2   4   4   4   2   5   4   4   0   3   2   4
A17   1   1   1   1   1   1   1   1   1   1   1   1   2   1   1   1   0   2   1
A18   2   1   4   3   4   4   4   3   4   4   4   3   5   4   4   3   3   0   4
A19   1   1   1   2   1   2   2   2   2   3   1   1   2   1   1   2   2   2   0
A20   2   2   2   2   2   3   3   2   2   3   1   2   2   3   2   3   2   1   2
A21   2   1   2   2   2   2   2   2   2   2   2   1   3   2   2   2   1   1   2
    A20 A21
A01   3   2
A02   3   1
A03   2   3
A04   2   2
A05   2   1
A06   2   1
A07 Inf Inf
A08   3   3
A09 Inf Inf
A10   1   2
A11   2   2
A12   2   1
A13   3   2
A14   3   3
A15   2   2
A16   4   2
A17   1   1
A18   4   2
A19   1   2
A20   0   3
A21   2   0</code></pre>
</div>
</div>
<p>This is a non-symmetric network: because some of the links are not reciprocated; furthermore, some nodes do not have a connection with others, as expressed by the place-holder <code>Inf</code>.</p>
<p>We can then compute the <em>components</em>: for the <em>strong</em> components:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xComponents</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  .  == == == == == == == == == == == == == == == == == == ==  
  .   Minimum component size considered: 1 
  .  == == == == == == == == == == == == == == == == == == ==  </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                         Value
Number of nodes           21.0
Number of components       3.0
Min componentsize          1.0
Max componentsize         19.0
ComponentRatio             0.1
Mean of componentsizes     7.0
Median of componentsizes   1.0</code></pre>
</div>
</div>
<p>Strong components is the maximal subset of nodes that you can reach from any node in the set, following the direction of the edges. The weak component instead does assumes direction:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xComponents</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship, <span class="at">Type =</span> <span class="st">'weak'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  .  == == == == == == == == == == == == == == == == == == ==  
  .   Minimum component size considered: 1 
  .  == == == == == == == == == == == == == == == == == == ==  </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                         Value
Number of nodes             21
Number of components         1
Min componentsize           21
Max componentsize           21
ComponentRatio               0
Mean of componentsizes      21
Median of componentsizes    21</code></pre>
</div>
</div>
<p>The number of components is 1 because <em>direction</em> is not an issue; only <em>connection</em> between nodes is.</p>
<p>In other words:</p>
<ul>
<li>The component ratio is a measure used in network analysis that characterizes the size of the largest connected component in a network relative to the total number of nodes in the network.</li>
<li>Specifically, the component ratio is defined as the ratio of the number of nodes in the largest connected component to the total number of nodes in the network.</li>
<li>For example, if a network has 100 nodes and the largest connected component contains 80 nodes, the component ratio would be 0.8.</li>
</ul>
<p><em>Connectedness</em> measures the proportion of nodes that you can reach from any other node, irrespective of how long it takes, which is equivalent to the proportion of pairs of nodes that are located in the same component.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xConnectedness</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  .  ------------------------------------------------------------------  
  .   Number of valid cells: 420 
  .   which corresponds to: 100 % of considered cells. 
  .  ------------------------------------------------------------------  </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.9047619</code></pre>
</div>
</div>
<p>Reciprocity is a measure of <em>symmetry</em> in a network connections: how many diads are reciprocated?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xReciprocity</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                            Value
Valid Dyads           210.0000000
%Valid Dyads          100.0000000
Density (valid dyads)   0.2428571
Mutual                 23.0000000
Asymmetric             56.0000000
Null                  131.0000000
DyadReciprocity         0.2911392
ArcReciprocity          0.4509804</code></pre>
</div>
</div>
<p>Transforming a directed network in an undirected network is called <em>simmetrization</em>. The method changes with the characteristic of the starting network: 1. You might keep only the arcs that are reciprocated (<code>Type = 'Max'</code>). 2. You might keep everything as long as a direction is present, but you introduce also the other direction in the network (<code>Type = 'Min'</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>SymNetwork<span class="ot">&lt;-</span><span class="fu">xSymmetrize</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship,<span class="at">Type =</span> <span class="st">"Min"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Transitivity provides information about the clustering of the network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a>Clus<span class="ot">&lt;-</span><span class="fu">xTransitivity</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a>Clus</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                                 [,1]
Valid triplets           7980.0000000
%Valid triplets             1.0000000
Density (valid triplets)    0.2428571
ij=1 &amp; jk=1 &amp; ik=1*       219.0000000
ij=1 &amp; jk=1 &amp; ik=0*       256.0000000
ij=1 &amp; jk=0 &amp; ik=1        575.0000000
ij=0 &amp; jk=1 &amp; ik=1        273.0000000
ij=0 &amp; jk=0 &amp; ik=1        871.0000000
ij=1 &amp; jk=0 &amp; ik=0        888.0000000
ij=0 &amp; jk=1 &amp; ik=0       1190.0000000
ij=0 &amp; jk=0 &amp; ik=0       3708.0000000
*TransitivityIndex          0.4610526</code></pre>
</div>
</div>
<p>We get all the valid data points in the network representation and the clustering value for each triplets (both <em>closed</em> and <em>open triads</em>). The transitivity index is the proportion between the actual triads and the potential ones (which are related to nodes degrees).</p>
<section id="centrality-measures-and-their-relationships" class="level3">
<h3 class="anchored" data-anchor-id="centrality-measures-and-their-relationships">Centrality measures and their relationships</h3>
<p>Degree centrality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a>DC<span class="ot">&lt;-</span><span class="fu">xDegreeCentrality</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a>DC</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Degree nDegree
A01      5    0.25
A02      3    0.15
A03      2    0.10
A04      6    0.30
A05      7    0.35
A06      6    0.30
A07      0    0.00
A08      1    0.05
A09      0    0.00
A10      7    0.35
A11     13    0.65
A12      4    0.20
A13      2    0.10
A14      2    0.10
A15      8    0.40
A16      2    0.10
A17     18    0.90
A18      1    0.05
A19      9    0.45
A20      2    0.10
A21      4    0.20</code></pre>
</div>
</div>
<p>The function always compute the <em>out-degree</em>. To obtain the <em>in-degree</em>, I will need to transpose the input matrix.</p>
<ul>
<li><code>Degree</code>: absolute value.</li>
<li><code>nDegree</code> is the <em>normalised degree</em> of a node.</li>
</ul>
<p>Closeness centrality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb122"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xClosenessCentrality</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    FreemanCloseness nFreemanCloseness ReciprocalCloseness nReciprocalCloseness
A01               48         0.4166667           10.416667            0.5208333
A02               50         0.4000000            9.416667            0.4708333
A03               49         0.4081633            9.250000            0.4625000
A04               35         0.5714286           12.833333            0.6416667
A05               33         0.6060606           13.500000            0.6750000
A06               35         0.5714286           12.833333            0.6416667
A07              120         0.1666667            0.000000            0.0000000
A08               54         0.3703704            8.083333            0.4041667
A09              120         0.1666667            0.000000            0.0000000
A10               37         0.5405405           12.833333            0.6416667
A11               27         0.7407407           16.500000            0.8250000
A12               37         0.5405405           11.833333            0.5916667
A13               43         0.4651163           10.166667            0.5083333
A14               50         0.4000000            9.083333            0.4541667
A15               33         0.6060606           13.833333            0.6916667
A16               64         0.3125000            7.783333            0.3891667
A17               22         0.9090909           19.000000            0.9500000
A18               69         0.2898551            6.616667            0.3308333
A19               32         0.6250000           14.333333            0.7166667
A20               44         0.4545455           10.000000            0.5000000
A21               37         0.5405405           11.833333            0.5916667
    ValenteForemanCloseness nValenteForemanCloseness
A01                      72                     0.72
A02                      70                     0.70
A03                      71                     0.71
A04                      85                     0.85
A05                      87                     0.87
A06                      85                     0.85
A07                       0                     0.00
A08                      66                     0.66
A09                       0                     0.00
A10                      83                     0.83
A11                      93                     0.93
A12                      83                     0.83
A13                      77                     0.77
A14                      70                     0.70
A15                      87                     0.87
A16                      56                     0.56
A17                      98                     0.98
A18                      51                     0.51
A19                      88                     0.88
A20                      76                     0.76
A21                      83                     0.83</code></pre>
</div>
</div>
<p>There are many outputs, because there are many different measurements for this statistic: we need to use the <em>Valente’s foreman closeness</em>, which is based on the concept that information flows more efficiently through the shortest paths in a network, and it measures how close a node is to all other nodes in the network. Specifically, the foreman closeness of a node is the reciprocal of the sum of the shortest path distances between that node and all other nodes in the network. This measure is particularly useful for identifying nodes that are important for information dissemination in a network, as they are more likely to be located along the shortest paths.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb124"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a>CC<span class="ot">&lt;-</span><span class="fu">xClosenessCentrality</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)[,<span class="dv">6</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Betweenness centrality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a>BC<span class="ot">&lt;-</span><span class="fu">xBetweennessCentrality</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)[,<span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We can then make a ranking of each node by considering the different definitions of centrality considered so far:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb126"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a>DCOrder<span class="ot">&lt;-</span> <span class="fu">order</span>(DC)</span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a>BCOrder<span class="ot">&lt;-</span> <span class="fu">order</span>(BC)</span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>CCOrder<span class="ot">&lt;-</span> <span class="fu">order</span>(CC)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(BCOrder,DCOrder)</span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">'Betweeness vs Degree Centrality'</span>)</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-79-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb128"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CCOrder,DCOrder)</span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">'Closeness vs Degree Centrality'</span>)</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-80-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(BCOrder,CCOrder, <span class="at">pch =</span> )</span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">'Betwenness vs Closeness Centrality'</span>)</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-81-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>To go further with our analysis, we need different tools: first, we need to transform our network in a <code>igraph</code> object.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb130"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a>Friends<span class="ot">&lt;-</span><span class="fu">graph_from_adjacency_matrix</span>(</span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a>  Krackhardt_HighTech<span class="sc">$</span>Friendship,</span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"directed"</span>), <span class="co"># "undirected", "max", "min", "upper", "lower", "plus"</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">weighted =</span> <span class="cn">NULL</span>,</span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">diag =</span> <span class="cn">FALSE</span>,</span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">add.colnames =</span> <span class="fu">names</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship),</span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">add.rownames =</span> <span class="cn">NA</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(Friends)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Class 'igraph'  hidden list of 10
 $ : num 21
 $ : logi TRUE
 $ : num [1:102] 0 0 0 0 0 1 1 1 2 2 ...
 $ : num [1:102] 1 3 7 11 15 0 17 20 13 18 ...
 $ : NULL
 $ : NULL
 $ : NULL
 $ : NULL
 $ :List of 4
  ..$ : num [1:3] 1 0 1
  ..$ : Named list()
  ..$ :List of 1
  .. ..$ name: chr [1:21] "A01" "A02" "A03" "A04" ...
  ..$ : Named list()
 $ :&lt;environment: 0x15292ffb0&gt; </code></pre>
</div>
</div>
<p>The advantage of using this format is that it is compatible with many applications. We might be interested to know which nodes belong to which components.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb132"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="fu">components</span>(Friends, <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"strong"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$membership
A01 A02 A03 A04 A05 A06 A07 A08 A09 A10 A11 A12 A13 A14 A15 A16 A17 A18 A19 A20 
  1   1   1   1   1   1   3   1   2   1   1   1   1   1   1   1   1   1   1   1 
A21 
  1 

$csize
[1] 19  1  1

$no
[1] 3</code></pre>
</div>
</div>
<p><code>csize</code> is the size distribution for the components of the network.</p>
<p>Katz centrality in R:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb134"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a>PR<span class="ot">&lt;-</span> <span class="fu">page_rank</span>(</span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a>  Friends,</span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">algo =</span> <span class="fu">c</span>(<span class="st">"prpack"</span>),</span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vids =</span> <span class="fu">V</span>(Friends),</span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">directed =</span> <span class="cn">TRUE</span>,</span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">damping =</span> <span class="fl">0.85</span>,</span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">personalized =</span> <span class="cn">NULL</span>,</span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> <span class="cn">NULL</span>,</span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">options =</span> <span class="cn">NULL</span></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>PROrder <span class="ot">&lt;-</span> <span class="fu">order</span>(PR<span class="sc">$</span>vector)</span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>PROrder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 13 10  6 20  3  9  5  7 19 15 14 11 16  8 17 12 21 18  4  1  2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb136"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(DCOrder,PROrder)</span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">'Degree vs PageRank Centrality'</span>)</span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-85-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CCOrder,PROrder)</span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">'Closeness vs PageRank Centrality'</span>)</span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-86-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb138"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(BCOrder,PROrder)</span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="fu">title</span>(<span class="st">'Betwenness vs PageRank Centrality'</span>)</span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a><span class="fu">abline</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="at">col=</span><span class="dv">2</span>,<span class="at">lty=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-87-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>We can also move from <em>disaggregate measurements</em> to <em>aggregated measures</em> such as clustering:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>  Friends,</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"undirected"</span>),</span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vids =</span> <span class="cn">NULL</span>, <span class="co"># null if you want to compute the global index or the local for all nodes</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> <span class="cn">NULL</span>,</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">isolates =</span> <span class="fu">c</span>(<span class="st">"NaN"</span>)</span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.4714946</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">transitivity</span>(</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>  Friends,</span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="fu">c</span>(<span class="st">"local"</span>),</span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vids =</span> <span class="cn">NULL</span>, <span class="co"># null if you want to compute the global index or the local for all nodes</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> <span class="cn">NULL</span>,</span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">isolates =</span> <span class="fu">c</span>(<span class="st">"NaN"</span>)</span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 0.6111111 0.4666667 0.6666667 0.7142857 0.4444444 0.4285714 0.6666667
 [8] 0.7000000 0.6666667 0.2857143 0.3736264 0.4642857 1.0000000 0.6666667
[15] 0.5833333 0.7000000 0.3594771 0.5000000 0.5555556 0.5000000 0.5333333</code></pre>
</div>
</div>
<p>Diameter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="fu">diameter</span>(Friends, <span class="at">directed =</span> <span class="cn">TRUE</span>, <span class="at">unconnected =</span> <span class="cn">TRUE</span>, <span class="at">weights =</span> <span class="cn">NULL</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
<p>Assortativity is another powerful measures, because <em>hierarchical relations</em> are fundamental in a friendship network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="fu">assortativity_degree</span>(Friends, <span class="at">directed =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] -0.1888936</code></pre>
</div>
</div>
</section>
</section>
<section id="degree-distribution-and-network-types" class="level1">
<h1>Degree distribution and network types</h1>
<p>We have seen different measures: we can then study the characteristic of a network in a larger scale.</p>
<blockquote class="blockquote">
<p><strong>Degree distribution: it characterizes how ties are distributed among nodes.</strong></p>
</blockquote>
<p>We can classify networks:</p>
<ol type="1">
<li><em>Regular lattices</em> or <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>-regular graphs: it is a network where all nodes have the same degree. Each node have the same number of connection as the others.</li>
</ol>
<ul>
<li>They are interesting because they characterize networks in which each element is in the same relative position. Some topologies are more structured than others. Usually distance is fundamental and structure is fundamental in shaping such a network.</li>
</ul>
<ol start="2" type="1">
<li>Erdös-Reyni random networks: where nodes have a degree typically close to the average degree.</li>
</ol>
<ul>
<li>In this case, hubs are absent.</li>
</ul>
<ol start="3" type="1">
<li>Scale-free network: where the degree distribution follows a power law.</li>
</ol>
<ul>
<li>Some nodes are much more connected than the average, while the most nodes have very few connections comparatively.</li>
<li>The average degree is not representative of the network any more.</li>
</ul>
<blockquote class="blockquote">
<p><strong>Degree distribution:</strong></p>
</blockquote>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k \geq 0</annotation></semantics></math>: is the degree of a node</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ρ</mi><mi>k</mi></msub><annotation encoding="application/x-tex">\rho_k</annotation></semantics></math> is the fraction of the nodes having degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>.
<ul>
<li>It is the probability that a node chosen at random has degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>.</li>
</ul></li>
<li>The set of quantities <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>ρ</mi><mi>k</mi></msub><annotation encoding="application/x-tex">\rho_k</annotation></semantics></math>k with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>≥</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">k \geq 0</annotation></semantics></math> is the degree distribution of a network.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>×</mo><msub><mi>ρ</mi><mi>k</mi></msub></mrow><annotation encoding="application/x-tex">N \times \rho_k</annotation></semantics></math> tells us the number of vertices with degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>.</li>
</ul>
<p>As we will see the degree distribution is important to characterize a network, but does not provide us with all information about it. This is usually the first thing to be computed, but further statistics are required to actually understand a network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>DC <span class="ot">&lt;-</span> <span class="fu">xDegreeCentrality</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship)[,<span class="dv">1</span>]</span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">table</span>((DC)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-92-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(DC, <span class="at">col =</span> <span class="st">'gold'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-93-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
<p>Note that we have <em>out-degree</em>; to obtain the <em>in-degree</em>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>Indegrees <span class="ot">&lt;-</span> Krackhardt_HighTech<span class="sc">$</span>Friendship <span class="sc">|&gt;</span> <span class="fu">t</span>() <span class="sc">|&gt;</span> <span class="fu">xDegreeCentrality</span>()</span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Indegrees, <span class="at">col =</span> <span class="st">'dodgerblue'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-94-1.png" class="img-fluid figure-img" width="480"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="characterizing-real-networks" class="level1">
<h1>Characterizing real networks</h1>
<p>In social sciences the objective is mainly to characterize and model real social networks and their evolutions. Real networks tend to:</p>
<ul>
<li>Have very small average shortest paths.
<ul>
<li>Small compared to the number of nodes and grows slowly with the size of the network.</li>
</ul></li>
<li>Have high clustering coefficients.
<ul>
<li>This is the number of triangles (closed/possible): it is very high and decreases slowly with the size of the network.</li>
<li>Triadic closure mechanism is not compatible with pure chance.</li>
</ul></li>
<li>We have a heavily skewed degree distribution.
<ul>
<li>We observe a few huge hubs and many terminal nodes.</li>
</ul></li>
</ul>
<p>We wish to build models that allow us to build networks and assess their topological characteristics. We will compare then <em>archetypal</em> networks with real ones to contrast and compare their structure. One of the key mechanism to study whether a given pattern in a network is truly a feature or a fluke is to measure <em>probability</em> and use an abstract model as <em>benchmark</em>.</p>
</section>
<section id="random-graphs" class="level1">
<h1>Random graphs</h1>
<blockquote class="blockquote">
<p>We will focus on Erdös-Renyi random graphs, which is a very useful benchmark.</p>
</blockquote>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>G</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>,</mo><mi>p</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">G(n, p)</annotation></semantics></math> denotes the undirected Erdös-Reyni graph with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> nodes and where:
<ul>
<li>Every edge is formed with probability <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">[</mo><mn>0</mn><mo>,</mo><mn>1</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">p \in [0,1]</annotation></semantics></math>.</li>
</ul></li>
</ul>
<p>In other words: every <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">I_{ij}</annotation></semantics></math> between arbitrarily chosen nodes <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">{</mo><mtable><mtr><mtd columnalign="left"><mn>1</mn><mspace width="1.0em"></mspace><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mspace width="0.222em"></mspace><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>b</mi><mi>i</mi><mi>l</mi><mi>i</mi><mi>t</mi><mi>y</mi><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mrow><mo stretchy="true" form="prefix">(</mo><mi>p</mi><mo stretchy="true" form="postfix">)</mo></mrow></mtd></mtr><mtr><mtd columnalign="left"><mn>0</mn><mspace width="1.0em"></mspace><mi>w</mi><mi>i</mi><mi>t</mi><mi>h</mi><mspace width="0.222em"></mspace><mi>p</mi><mi>r</mi><mi>o</mi><mi>b</mi><mi>a</mi><mi>b</mi><mi>i</mi><mi>l</mi><mi>i</mi><mi>t</mi><mi>y</mi><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mspace width="0.222em"></mspace><mrow><mo stretchy="true" form="prefix">(</mo><mn>1</mn><mo>−</mo><mi>p</mi><mo stretchy="true" form="postfix">)</mo></mrow></mtd></mtr></mtable></mrow></mrow><annotation encoding="application/x-tex">
I_{ij} =
\begin{cases}
1 \quad with \ probability \ \ \ (p) \\
0 \quad with \ probability \ \ \ (1-p)
\end{cases}
</annotation></semantics></math> This means that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>I</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">I_{ij}</annotation></semantics></math> is a <em>Bernoulli random variable</em>.</p>
<p>Given that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>I</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>∼</mo><mstyle mathvariant="script"><mi>ℬ</mi><mi>ℯ</mi><mi>𝓇</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><mi>p</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">I_{ij} \sim \mathcal{Ber}(p)</annotation></semantics></math>, the expected number of edges in the network is simply: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathvariant="double-struck"><mi>𝔼</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><mo>∑</mo><msub><mi>I</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mrow><mi>n</mi><mo>×</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mn>2</mn></mfrac><mi>p</mi></mrow><annotation encoding="application/x-tex">
\mathbb{E} \left (\sum I_{ij} \right ) = \frac {n \times (n - 1)}{2} p
</annotation></semantics></math></p>
<p>By the <em>Weak Law of Large Numbers</em>, if <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> diverges all nodes will have a degree close to the average value.</p>
<blockquote class="blockquote">
<p><strong>In other words, the probability to observe the absence of connection when the network grows large tends to zero; all nodes will have degree will converge to average, with little variance.</strong></p>
</blockquote>
<section id="the-degree-distribution" class="level2">
<h2 class="anchored" data-anchor-id="the-degree-distribution">The degree distribution</h2>
<p>We can then define the probability distribution function of a given network:</p>
<ul>
<li>Consider <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math> as the <em>random variable</em> representing the degree of a node.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math> is a binomial random variable, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>K</mi><mo>∼</mo><mstyle mathvariant="script"><mi>ℬ</mi><mi>𝒾</mi><mi>𝓃</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>,</mo><mi>p</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">K \sim \mathcal{Bin}(n, p)</annotation></semantics></math>.</li>
<li>As <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">n \to \infty</annotation></semantics></math>, the degree distribution becomes a Poisson distribution.</li>
</ul>
<p>We can then compute the probability that a random network presents nodes of degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>K</mi><annotation encoding="application/x-tex">K</annotation></semantics></math>.</p>
</section>
<section id="clustering" class="level2">
<h2 class="anchored" data-anchor-id="clustering">Clustering</h2>
<ul>
<li>In a random network the probability that two of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>’s neighbours link to each other is <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>.</li>
<li>To calculate <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>C</mi><mi>i</mi></msub><annotation encoding="application/x-tex">C_i</annotation></semantics></math> for a node in a random network we need to estimate the expected number of links <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>L</mi><mi>i</mi></msub><annotation encoding="application/x-tex">L_i</annotation></semantics></math> between the node’s <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mi>i</mi></msub><annotation encoding="application/x-tex">k_i</annotation></semantics></math> neighbours.</li>
<li>There are <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>k</mi><mi>i</mi></msub><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mi>/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">k_i (k_i − 1)/2</annotation></semantics></math> possible links between the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mi>i</mi></msub><annotation encoding="application/x-tex">k_i</annotation></semantics></math> neighbours of node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>. The <em>local clustering coefficient</em> is: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>C</mi><mi>i</mi></msub><mo>=</mo><mfrac><mover><mi>k</mi><mo accent="true">‾</mo></mover><mi>n</mi></mfrac><mo>=</mo><mi>p</mi></mrow><annotation encoding="application/x-tex">
C_i = \frac {\bar{k}} {n} = p
</annotation></semantics></math></li>
</ul>
<blockquote class="blockquote">
<p><strong>Note that links and nodes are created <em>randomly</em> and <em>independently</em>. The main idea is that the clustering of a large random network tends to be vanishingly small for large networks. if we generate bigger and bigger graphs with fixed average degree, the average clustering will become negligible.</strong></p>
</blockquote>
</section>
<section id="average-shortest-path" class="level2">
<h2 class="anchored" data-anchor-id="average-shortest-path">Average shortest path</h2>
<p>In this kind of network, each node will have a degree closed to the average one. Given a characteristic degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>k</mi><mo accent="true">‾</mo></mover><annotation encoding="application/x-tex">\bar{k}</annotation></semantics></math> if we explore the network we are limited by the characteristic of this networks, in which there are few triangles and local clusters and most nodes are found in the last step <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mover><mi>k</mi><mo accent="true">‾</mo></mover><mi>h</mi></msup><mo>∼</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">\bar{k}^h \sim n</annotation></semantics></math>. Most of the nodes are reached in the last iteration: only the last steps are actually relevant, as they will contain most of the nodes in the networks.</p>
<ul>
<li>The average shortest path, is then<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>=</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mover><mi>k</mi><mo accent="true">‾</mo></mover></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mfrac><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac><mo>=</mo><mfrac><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mo stretchy="false" form="prefix">(</mo><mi>p</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac><mo>=</mo><mi>O</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
h = log_{\bar{k}} (n) = \frac {log(n)} {log(\bar{k})} = \frac{log(n)} {log(p(n-1)} = O(log(n))
</annotation></semantics></math></li>
</ul>
<p>The shortest path then scales with some function of the <em>logarithm</em> of nodes: very slowly, as it only grows with orders of magnitude with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">n \to \infty</annotation></semantics></math>. Even in a very large (random) network we are only a few hops apart.</p>
<blockquote class="blockquote">
<p><strong>In a random graph, the diameter, which is the length of the shortest path between the most distanced nodes, scales as a logarithmic function of the number of nodes <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>.</strong></p>
</blockquote>
</section>
<section id="emergence-of-a-giant-component" class="level2">
<h2 class="anchored" data-anchor-id="emergence-of-a-giant-component">Emergence of a giant component</h2>
<p>A giant component is the one with the most number of connections. This is especially important in social networks: you have small groups scattered around a single clustering component with a high number of connection. To simplify, we are looking only at the largest one.</p>
<blockquote class="blockquote">
<p><strong>Giant component (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>N</mi><mi>G</mi></msub><annotation encoding="application/x-tex">N_G</annotation></semantics></math>): a maximal connected subgraph containing most of the nodes.</strong></p>
</blockquote>
<p>How does a giant component emerge from a random network? We need to consider the <em>probability distribution</em> of links among nodes, starting by considering the two extreme cases:</p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">p = 0</annotation></semantics></math>: we have for sure that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\bar{k} =0</annotation></semantics></math> and all nodes are isolated.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">p = 1</annotation></semantics></math>: we have for sure that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>=</mo><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\bar {k}= n-1</annotation></semantics></math>. All nodes are directly connected.</li>
</ul>
<blockquote class="blockquote">
<p><strong>In other words, we need to understand <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>g</mi></msub><mi>/</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">N_g/n</annotation></semantics></math> growth as a <em>mapping</em> or <em>function</em> of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>.</strong></p>
</blockquote>
<p>A single link can be critical to prompt the emergence of a giant connected component. The key variable is the average degree <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>k</mi><mo accent="true">‾</mo></mover><annotation encoding="application/x-tex">\bar{k}</annotation></semantics></math>, as in random networks every node as a degree close to it. We can then distinguish different cases:</p>
<ol type="1">
<li><em>Sub-critical</em>: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>&lt;</mo><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0 &lt; \bar{k} &lt; 1</annotation></semantics></math>. Small number of links. Most components are tiny compared to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>.</li>
<li><em>Critical</em>: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\bar{k} = 1</annotation></semantics></math>. However (with some maths) we can find that the largest component is now much larger than in the previous phase<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. Different components sizes coexist. Size distribution: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mi>r</mi><mi>o</mi><mi>b</mi><mi>s</mi><mo>=</mo><msup><mi>s</mi><mrow><mo>−</mo><mfrac><mn>3</mn><mn>2</mn></mfrac></mrow></msup></mrow><annotation encoding="application/x-tex">Probs = s^{ - \frac {3}{2}}</annotation></semantics></math><a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>. In this case we have a single large component.</li>
<li><em>Super-critical</em>: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\bar{k} &gt; 1</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mi>G</mi><mi>/</mi><mi>n</mi><mo>∼</mo><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">NG /n \sim \bar{k} − 1</annotation></semantics></math>. The giant component is formed and contains a sizeable proportion of nodes. Isolated components are much smaller. Large components are rare.</li>
</ol>
<p>If we reach enough connections:</p>
<ol start="4" type="1">
<li><em>Connected</em>: <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>&gt;</mo><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\bar{k} &gt; log(n)</annotation></semantics></math>. All links are absorbed by the giant component. <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>N</mi><mi>G</mi></msub><mo>=</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">N_G = n</annotation></semantics></math>.</li>
</ol>
<p>The logarithm of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> is a small number compared to <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>: the average degree is still very low, so we are still looking at a very sparse network, which implies that you do not need a large number of connections to have a fully connected network.</p>
<p>To ensure that a network is connected then you have to set the average number <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>k</mi><mo accent="true">‾</mo></mover><annotation encoding="application/x-tex">\bar{k}</annotation></semantics></math> greater than <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">log(n)</annotation></semantics></math>. Note also that the giant component emerges through a phase transition, as <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\bar{k} = 1</annotation></semantics></math> works as a threshold.</p>
<blockquote class="blockquote">
<p><strong>The fact that we need at least one link per node to observe a giant component is not unexpected. Indeed, for a giant component to exist, each of its nodes must be linked to at least one other node. It is somewhat counter-intuitive, however, that one link is sufficient for its emergence.</strong></p>
</blockquote>
</section>
<section id="patterns-in-random-networks" class="level2">
<h2 class="anchored" data-anchor-id="patterns-in-random-networks">Patterns in random networks</h2>
<p>We can define <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><msup><mi>N</mi><mi>z</mi></msup></mrow><annotation encoding="application/x-tex">p = N^z</annotation></semantics></math>, which is the probability of a link to exist between two nodes, with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>z</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">[</mo><mo>−</mo><mi>∞</mi><mo>,</mo><mn>0</mn><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">z \in [-\infty, 0]</annotation></semantics></math> as a tuning parameter. As we vary <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>z</mi><annotation encoding="application/x-tex">z</annotation></semantics></math>, we obtain suddenly key properties of random graphs.</p>
<blockquote class="blockquote">
<p><strong>A graph has a given property <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math> if the probability of having <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math> approaches 1 as <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>→</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">N \to \infty</annotation></semantics></math> (for large graphs either all random graphs have <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Q</mi><annotation encoding="application/x-tex">Q</annotation></semantics></math> or none has). Several interesting thresholds have been identified, for this whole class of random graphs.</strong></p>
</blockquote>
<p>However, this does not happen: real networks are not random. Many of the modelling assumptions from which we obtain a random network are not realistic, which means that our model cannot explain properly the behaviour of a real network.</p>
<p><img src="Figures/Screenshot%202023-02-27%20at%2011.33.21.png" class="img-fluid"></p>
</section>
<section id="degrees-of-separation" class="level2">
<h2 class="anchored" data-anchor-id="degrees-of-separation">6 degrees of separation</h2>
<blockquote class="blockquote">
<p><strong>Choose any two individuals anywhere on Earth, you will find a path of at most <em>six acquaintances</em> between them.</strong></p>
</blockquote>
<p>Real networks tend to have <em>short path lengths</em>: even though measuring this is not trivial, empirical studies have confirmed this statement. Moreover, real networks tend to have <em>high clustering</em> (friend of friends are typically friends) but <em>very small average path lengths</em> (growing with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>N</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">log(N)</annotation></semantics></math>).</p>
<p><strong>How do we build a model fitting together these two elements?</strong></p>
</section>
<section id="small-world" class="level2">
<h2 class="anchored" data-anchor-id="small-world">Small world</h2>
<blockquote class="blockquote">
<p><strong>Watts and Strogatz (1998) <em>small world</em> model formulates a possible explanation.</strong></p>
</blockquote>
<p>We consider a <em>lattice</em> with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> nodes and join each node to its neighbours <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math> or fewer hops (<em>lattice spacings</em>) away. For each edge, with probability <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>p</mi><annotation encoding="application/x-tex">p</annotation></semantics></math>, move one end of that edge to a new location chosen uniformly at random from the lattice. In other words, rewiring some of the links at random, erasing it and re-connecting to a randomly chosen different node creates short-cuts. The main result is that few short cuts shorten a lot of shortest paths, while the clustering is almost completely untouched.</p>
<blockquote class="blockquote">
<p><strong>We are now considering statistical properties from the perspective of the <em>whole network</em>, considering in particular the fact that real networks, stemming from complex systems, are not random.</strong></p>
</blockquote>
<p>With this very simple model we are able to create a solid model fit relative to many real networks. This kind of networks combine two social networks characteristics:</p>
<ul>
<li><em>Homophily</em>: the tendency to associate to those similar to ourselves (high clustering).</li>
<li><em>Weak ties</em>: the links to acquaintances that connect us to parts of the network that would otherwise be far away (short path lengths).</li>
</ul>
<section id="weak-ties" class="level3">
<h3 class="anchored" data-anchor-id="weak-ties">Weak Ties</h3>
<p>There are some link that connect you to far away parts in the network, creating shorter paths along the network. Their generations follows complex rules, which are difficult to figure out and model; however, the resulting network show the existence of deeper order.</p>
<p>In social sciences one important example of this deeper order is <em>the importance of weak ties</em>.</p>
<p>We have at least two types of social interactions:</p>
<ul>
<li>One with close friends, family, etc.: in this case, everyone is connected with everyone else and interact with the same frequency with each others.</li>
<li>One with acquaintances: much less likely to know one another and with less frequent interactions.
<ul>
<li>Moreover, these people are less likely to know the other connections.</li>
</ul></li>
</ul>
<p>These two social interactions classes have different effect on the network and its component.</p>
<blockquote class="blockquote">
<p><strong>The strength of <em>weak ties</em>: <em>most people find jobs through weak links (acquaintances) instead of close friends and strong connections</em></strong>.</p>
</blockquote>
<p><strong>Why does this happen?</strong></p>
<ul>
<li>In a closely knitted group information is typically shared, travels fast and therefore is extremely difficult to get new information from strong ties.
<ul>
<li>Groups are <em>clicks</em>.</li>
</ul></li>
<li>Weak ties, instead, allow <em>fresh</em> information to spread, which is not readily available otherwise.</li>
<li>From the topological point of view, a new weak tie creates a very large number of <em>new open triads </em>and bridging across groups creates the opportunity to act as a <em>gate-keeper</em> of information.
<ul>
<li>Each new person connected to a weak tie creates open triads and creates the possibility of joining together previously unconnected groups.</li>
</ul></li>
</ul>
<p><strong>Why cannot we just form one large strongly connected group?</strong></p>
<p>Open triads tend to close, so we need to ask why we do not have one strongly connected group over time?</p>
<ul>
<li><em>Dunbar</em> (1992): we are limited as humans on the amount of people we can recognise, interact and maintain strong connection with, because of <em>physical limitations</em> on our social abilities.
<ul>
<li>We cannot have more that approximately 150 strong ties and we spend most of our connection time with only 5 people.</li>
<li>Before cities existed, we had the same limited communities; this number can be thought as a <em>constant</em> over time.</li>
<li>This is also confirmed by analysis of social networks such as <em>Facebook</em>: the relationship between strong and weak ties is the same on-line and offline.</li>
<li>Past 150 connections, all we have weak ties, which are also responsible in bringing information, diseases and other unexpected events inside a closely connected groups.</li>
</ul></li>
</ul>
</section>
</section>
</section>
<section id="scale-free-networks" class="level1">
<h1>Scale-free networks</h1>
<p>Weak ties are able to capture fundamental elements of a small world network, but we still need to deal with the skewed nodes distribution and the fact that real networks are not random.</p>
<blockquote class="blockquote">
<p><strong>How is this distribution created?</strong></p>
</blockquote>
<p>The key example is the <em>World Wide Web</em><a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>. With an estimated size of over <em>one trillion documents</em>, the Web is the largest network humanity has ever built: modelling it as a <em>random network</em> creates a very poor fitting.</p>
<p>Researchers however figured out that on a <em>log-log</em> scale the fit seems to follow a <em>straight line</em>, indicating that it could be fitted with a power law such as: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>p</mi><mi>k</mi></msub><mo>=</mo><msup><mi>k</mi><mrow><mo>−</mo><mi>γ</mi></mrow></msup></mrow><annotation encoding="application/x-tex">
p_k = k^{-\gamma}
</annotation></semantics></math> or: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><msub><mi>p</mi><mi>k</mi></msub><mo>=</mo><mo>−</mo><mi>γ</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">
log p_k = -\gamma log k
</annotation></semantics></math></p>
<p>The distribution is then not random, but it follows a <em>power law</em>: networks which follow this law are called <em>scale-free networks</em>.</p>
<p><strong>Why are they called scale-free? They do not have a <em>characteristic scale</em>: their average degree is not representative of their distribution.</strong></p>
<p>When looking at the degree distribution, we notice that most nodes have a very few links, but there is a non negligible probability of observing hubs (nodes with high degree). For some values, moreover, the distribution diverge in <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math>.</p>
<p>Not all networks are scale-free in both in and out degrees. For example, there is a boundary on the number of people that each individual can know well enough to be aware of their job, which means that there is a <em>bell shaped distribution of out-degrees</em>; the opposite is not true: the in-degree distribution is not true<a href="#fn5" class="footnote-ref" id="fnref5" role="doc-noteref"><sup>5</sup></a>.</p>
<p>Power-law distributions are really important in sociology and economics. Scale-free networks are characterized by the emergence of <em>hubs</em>. They key difference is that random network we have a probability of observing hubs which is basically zero, while in scale-free networks the distribution of observing nodes with a high degree is not negligible.</p>
<section id="the-size-of-the-largest-hub" class="level2">
<h2 class="anchored" data-anchor-id="the-size-of-the-largest-hub">The size of the largest hub</h2>
<p>The size of the largest hubs depends polynomially on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>. It can be computed as: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><msub><mi>k</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><mo>×</mo><msup><mi>N</mi><mfrac><mn>1</mn><mrow><mi>γ</mi><mo>−</mo><mn>1</mn></mrow></mfrac></msup></mrow><annotation encoding="application/x-tex">
k_{max} = k_{min} \times N^{\frac {1}{{\gamma -1}}}
</annotation></semantics></math></p>
<p>The larger the network, the larger the hub; moreover, given the polynomial dependence on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><annotation encoding="application/x-tex">k_{max}</annotation></semantics></math> can be several orders of magnitude larger than <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>k</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><annotation encoding="application/x-tex">k_{min}</annotation></semantics></math></p>
<p>The concept of absence of scale can be expressed mathematically by considering the <em>moment</em> of its <em>distribution</em>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><msup><mi>k</mi><mi>μ</mi></msup><mo accent="true">‾</mo></mover><mo>=</mo><msubsup><mo>∫</mo><msub><mi>k</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow></msub><msub><mi>k</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub></msubsup><msup><mi>k</mi><mi>μ</mi></msup><mi>p</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>k</mi><mo stretchy="true" form="postfix">)</mo></mrow><mspace width="0.222em"></mspace><mi>d</mi><mi>k</mi><mo>=</mo><mi>C</mi><mfrac><mrow><msubsup><mi>k</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow><mrow><mi>μ</mi><mo>−</mo><mi>γ</mi><mo>+</mo><mn>1</mn></mrow></msubsup><mo>−</mo><msubsup><mi>k</mi><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow><mrow><mi>μ</mi><mo>−</mo><mi>γ</mi><mo>+</mo><mn>1</mn></mrow></msubsup></mrow><mrow><mi>μ</mi><mo>−</mo><mi>γ</mi><mo>+</mo><mn>1</mn></mrow></mfrac></mrow><annotation encoding="application/x-tex">
\bar{k^\mu} = \int_{k_{min}}^{k_{max}} k^{\mu} p(k) \ dk = C \frac {k^{\mu - \gamma + 1}_{max}- k^{\mu - \gamma + 1}_{min}}{\mu - \gamma + 1}
</annotation></semantics></math></p>
<p>For most SF networks <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>&lt;</mo><mi>γ</mi><mo>≤</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 &lt; γ \leq 3</annotation></semantics></math>, so:</p>
<ul>
<li>The 1-st moment (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\mu = 1</annotation></semantics></math>) is finite.</li>
<li>the higher moments (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>μ</mi><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\mu &gt; 1</annotation></semantics></math>) diverge.</li>
</ul>
<p>In networks characterized by this power law distribution an information such as the average is <em>useless</em>, as <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>σ</mi><annotation encoding="application/x-tex">\sigma</annotation></semantics></math> is at least a couple of order of magnitude higher thus giving birth to the scale-free property.</p>
<blockquote class="blockquote">
<p><strong>In other words, the average degree is not indicative of the information flow inside the network and how its connections are shaped.</strong></p>
</blockquote>
<p><strong>Do hubs affect the small world property?</strong></p>
<p>This aspect is dependent on the exponent <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>γ</mi><annotation encoding="application/x-tex">\gamma</annotation></semantics></math> of the power-law. Progressively increasing it, we move from a huge hubs to small hubs; the latter connect a large number of nodes.</p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi><mo>&lt;</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\gamma &lt; 2</annotation></semantics></math> (<em>non-graphical</em>): it cannot be build, such networks do not exists in reality.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">\gamma = 2</annotation></semantics></math> (<em>anomalous regime</em>): the degree of the biggest hub grows linearly with the system size.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>&lt;</mo><mi>γ</mi><mo>&lt;</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 &lt; \gamma &lt; 3</annotation></semantics></math> (<em>ultra-small world</em>): the average shortest path grows, but very slowly.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\gamma = 3</annotation></semantics></math> (<em>critical point</em>): at this point the standard deviation of the distribution does not diverge any more.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>γ</mi><mo>&gt;</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">\gamma &gt; 3</annotation></semantics></math>: in this case we still have a scale and we progressively get to distribution in which hubs have less and less importance as brokers and therefore we are losing the small world property.</li>
</ul>
<p>Scale-free networks are at least <em>small world</em> and we are almost always close to a hub; most social and economic networks have <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>2</mn><mo>&lt;</mo><mi>γ</mi><mo>&lt;</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">2 &lt; \gamma &lt; 3</annotation></semantics></math> (<em>ultra-small world</em>).</p>
</section>
<section id="preferential-attachment" class="level2">
<h2 class="anchored" data-anchor-id="preferential-attachment">Preferential attachment</h2>
<p><strong>Why do scale-free networks emerge?</strong></p>
<p>Hubs should not emerge in random networks: however, most networks are born <em>over time</em>, dynamically; new nodes are created in time and form attachments to existing nodes.</p>
<p>Nodes are born over time and indexed by their date of birth and assume that the system starts with a group of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>m</mi><annotation encoding="application/x-tex">m</annotation></semantics></math> nodes all connected to one another. Each node upon birth forms <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>m</mi><annotation encoding="application/x-tex">m</annotation></semantics></math> (undirected) edges with pre-existing nodes. The new node attaches to nodes with probabilities proportional to their degrees: the probability of creating new links is proportional the degree. This concept is called <em>preferential attachment</em>.</p>
<p>Since there are <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">tm</annotation></semantics></math> total links at time <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> in the system, it follows that: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><munderover><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>t</mi></munderover><msub><mi>k</mi><mi>j</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>2</mn><mi>t</mi><mi>m</mi></mrow><annotation encoding="application/x-tex">
\sum^t_{j=1} k_j(t) = 2tm
</annotation></semantics></math></p>
<p>So the probability that node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> gets a new link in time <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>t</mi><annotation encoding="application/x-tex">t</annotation></semantics></math> is <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mfrac><mrow><msub><mi>k</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mrow><mn>2</mn><mi>t</mi></mrow></mfrac><annotation encoding="application/x-tex">\frac {k_i(t)}{2t}</annotation></semantics></math>. We can describe the <em>evolution</em> of degrees as the solution of a differential equation. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>k</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mi>m</mi><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><mi>t</mi><mi>i</mi></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mrow><mn>1</mn><mi>/</mi><mn>2</mn></mrow></msup></mrow><annotation encoding="application/x-tex">
k_i(t) = m \left (\frac{t}{i} \right )^{1/2}
</annotation></semantics></math></p>
<p>Leading to the following density function: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>d</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><mn>2</mn><msup><mi>m</mi><mn>2</mn></msup><msup><mi>d</mi><mrow><mo>−</mo><mn>3</mn></mrow></msup></mrow><annotation encoding="application/x-tex">
P(d) = 2m^2d^{−3}
</annotation></semantics></math></p>
<p>This density has the following properties:</p>
<ol type="1">
<li>The diameter grows slower than the one of a random network.</li>
<li>The clustering coefficient decreases slower than the one of a random network.</li>
</ol>
<p>The preferential attachment model is a better model to simulate growing social networks: it has a high degree of clustering and an average shortest path; it works as a powerful model of a real social network.</p>
</section>
<section id="robustness-to-errors-and-attacks" class="level2">
<h2 class="anchored" data-anchor-id="robustness-to-errors-and-attacks">Robustness to errors and attacks</h2>
<p>As <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>→</mo><mi>∞</mi></mrow><annotation encoding="application/x-tex">n \to \infty</annotation></semantics></math> hubs become very large and very important, but they are numerically very few: SF networks are very robust to random errors. In other words, the probability of hitting by chance an hub is negligible (if a random website goes down nobody notices). However, if the elimination targets hubs, just a few attacks might significantly hurt the network functionality.</p>
</section>
</section>
<section id="community-detection" class="level1">
<h1>Community detection</h1>
<p>When dealing with a real social network a fundamental question is whether there are <em>sub-groups</em> that can be treated as an <em>unicum</em>, or a subset in which <em>connection are stronger relatively to the rest of the network</em>.</p>
<p>Social communities, in particular, can be characterized by different aspects:</p>
<ol type="1">
<li>Community members understand that they are its members.</li>
<li>Non-members understand who the community members are.</li>
<li>Community members often have more interactions with each other than with non-members.</li>
</ol>
<p>Communities can also be called: groups, clusters, or cohesive subgroups.</p>
<section id="implicit-communities" class="level2">
<h2 class="anchored" data-anchor-id="implicit-communities">Implicit communities</h2>
<blockquote class="blockquote">
<p><strong>There exist implicit communities: individuals are rarely all members of the same explicit community. People can be part of the same communities even without <em>formally</em> declaring it.</strong></p>
</blockquote>
<p>Examples are:</p>
<ul>
<li>In <em>protein-protein</em> interaction networks, communities are likely to group proteins having the same specific function within the cell.</li>
<li>In the World Wide Web, communities may correspond to groups of pages dealing with the same or related topics.</li>
<li>In metabolic networks, communities may be related to functional modules such as cycles and pathways.</li>
<li>Food webs: communities may identify compartments.</li>
</ul>
<p>Analysing communities helps understanding users, because they usually form groups based on their interests. Groups moreover provide a clear global view of user interaction and some behaviours are only observable in a group setting and not on an individual level.</p>
</section>
<section id="communities-and-graphs" class="level2">
<h2 class="anchored" data-anchor-id="communities-and-graphs">Communities and graphs</h2>
<blockquote class="blockquote">
<p><strong>Communities are groups of nodes densely connected to each other and sparsely connected to nodes outside the community.</strong></p>
</blockquote>
<p>Having this definition, we can perform the following tasks:</p>
<ul>
<li>Community detection: discover implicit communities.</li>
<li>Community evolution: studying temporal evolution of communities.</li>
<li>Community evaluation: evaluating detected communities.</li>
</ul>
<p>A community, moreover, can be considered as a summary of the whole network: this allows for immediate visualizations and understanding; to conclude, it can be also a useful tool to reveal some properties without releasing any individual information.</p>
</section>
<section id="community-discovery" class="level2">
<h2 class="anchored" data-anchor-id="community-discovery">Community discovery</h2>
<p>The topological definition is very general; the community discovery problem involves first defining what a community is in a specific way and different definition might lead to different clusters which are therefore <em>context dependent</em>.</p>
<blockquote class="blockquote">
<p><strong>The aim of <em>community discovery algorithms</em> is to identify mesoscale<a href="#fn6" class="footnote-ref" id="fnref6" role="doc-noteref"><sup>6</sup></a> topologies hidden within complex network structures.</strong></p>
</blockquote>
<p>The process of finding clusters of nodes (<em>communities</em>) is fundamental because, ideally, will allow you to find strong internal connections within a group and weak connections between different communities. We would like to find completely disjoint communities, without interaction between them.</p>
<blockquote class="blockquote">
<p><strong>The actual process is similar to <em>clustering</em>, which consists in the task of dividing data points into groups such that data points in the same groups are more like other data points in the same group than those in other groups.</strong></p>
</blockquote>
<p>However, there is a main difference:</p>
<ul>
<li>Clustering:
<ul>
<li>Data is often non-linked (matrix rows).</li>
<li>Clustering works on the distance or similarity matrix.</li>
<li>If you use k-means with adjacency matrix rows, you are only considering the <em>ego-centric</em> network.</li>
</ul></li>
<li>Community detection:
<ul>
<li>Data is linked (a graph).</li>
<li>Network data tends to be discrete, leading to algorithms using the graph property <em>directly</em>.
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>k</mi><annotation encoding="application/x-tex">k</annotation></semantics></math>-clique, quasi-clique, or edge-betweenness.</li>
</ul></li>
</ul></li>
</ul>
<p>A taxonomy of approach can be conceptualised, based on the characteristic of a network.</p>
<ul>
<li>Analyse:
<ul>
<li>Directed/Undirected graphs</li>
<li>Weighted/Un-weighted graphs</li>
<li>Multidimensional graphs</li>
</ul></li>
<li>Produce:
<ul>
<li>Overlapping Communities</li>
<li>Fuzzy Communities</li>
<li>Hierarchical Communities</li>
<li>Nested Communities</li>
</ul></li>
</ul>
<p>We can group standard algorithms in the following families (each element of the table a different one):</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="Figures/Screenshot%202023-03-02%20at%2012.53.28.png" class="img-fluid figure-img" style="width:70.0%"></p>
</figure>
</div>
</section>
<section id="fundamental-assumptions" class="level2">
<h2 class="anchored" data-anchor-id="fundamental-assumptions">Fundamental assumptions</h2>
<p>We are assuming that:</p>
<ul>
<li>The community structure is uniquely encoded in the wiring diagram of the overall network.</li>
<li>A community corresponds to a connected subgraph.</li>
<li>Communities are locally dense neighbourhoods of a network.</li>
</ul>
</section>
<section id="internal-density" class="level2">
<h2 class="anchored" data-anchor-id="internal-density">Internal density</h2>
<p>Graph <em>density</em> represents the ratio between the edges present in a graph and the maximum number of edges that the graph can contain, that is the number of edges in a network over the total possible number of edges that can exist given the number of nodes.</p>
<ul>
<li><p>Directed: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo>=</mo><mfrac><mrow><mn>2</mn><mrow><mo stretchy="true" form="prefix">|</mo><mi>E</mi><mo stretchy="true" form="postfix">|</mo></mrow></mrow><mrow><mrow><mo stretchy="true" form="prefix">|</mo><mi>V</mi><mo stretchy="true" form="postfix">|</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">|</mo><mi>V</mi><mo stretchy="true" form="postfix">|</mo></mrow><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">
\eta = \frac {2 |E|}{|V|(|V| -1)}
</annotation></semantics></math></p></li>
<li><p>Undirected: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>η</mi><mo>=</mo><mfrac><mrow><mo stretchy="true" form="prefix">|</mo><mi>E</mi><mo stretchy="true" form="postfix">|</mo></mrow><mrow><mrow><mo stretchy="true" form="prefix">|</mo><mi>V</mi><mo stretchy="true" form="postfix">|</mo></mrow><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mo stretchy="true" form="prefix">|</mo><mi>V</mi><mo stretchy="true" form="postfix">|</mo></mrow><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">
\eta = \frac {|E|}{|V|(|V| -1)}
</annotation></semantics></math></p></li>
</ul>
<p>In this case, we are trying to recognise communities as <em>sets of densely connected entities</em>: each community should have a number of edges significantly higher than what it is expected from a <em>random graph.</em></p>
<p>To measure this density, we need to define a <em>function</em>: in particular, a <em>quality</em> function that measures the density of a community and then we will try to <em>maximize</em> it to obtain clusters. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Q</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mn>2</mn><mi>m</mi></mrow></mfrac><munder><mo>∑</mo><mrow><mi>i</mi><mi>j</mi></mrow></munder><mspace width="0.222em"></mspace><mrow><mo stretchy="true" form="prefix">[</mo><msub><mi>A</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>−</mo><munder><munder><mfrac><mrow><msub><mi>k</mi><mi>i</mi></msub><msub><mi>k</mi><mi>j</mi></msub></mrow><mrow><mn>2</mn><mi>m</mi></mrow></mfrac><mo accent="true">⏟</mo></munder><mstyle mathvariant="normal"><mi>N</mi><mi>u</mi><mi>l</mi><mi>l</mi><mspace width="0.222em"></mspace><mi>m</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi><mspace width="0.222em"></mspace><mi>e</mi><mi>x</mi><mi>p</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>e</mi><mi>d</mi><mspace width="0.222em"></mspace><mi>d</mi><mi>e</mi><mi>n</mi><mi>s</mi><mi>i</mi><mi>t</mi><mi>y</mi></mstyle></munder><mo stretchy="true" form="postfix">]</mo></mrow><mi>δ</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>c</mi><mi>i</mi></msub><mo>,</mo><msub><mi>c</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
Q = \frac {1}{2m} \sum_{ij} \ \left [ A_{ij} - \underbrace{ \frac {k_i k_j}{2m} }_{\mathrm{Null \ model \ expected \ density}} \right]  \delta(c_i, c_j)
</annotation></semantics></math></p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>δ</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>c</mi><mi>i</mi></msub><mo>,</mo><msub><mi>c</mi><mi>j</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">\delta(c_i, c_j)</annotation></semantics></math> will assume value 1 if <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow><annotation encoding="application/x-tex">i,j</annotation></semantics></math> are in the same community, 0 otherwise.</p>
</section>
<section id="modularity" class="level2">
<h2 class="anchored" data-anchor-id="modularity">Modularity</h2>
<blockquote class="blockquote">
<p><strong><em>Modularity</em> is one measure of the structure of graphs. It measures the strength of the division of a network into modules. Networks with high modularity have dense connections between the nodes within modules but sparse connections between nodes in different modules.</strong></p>
</blockquote>
<p>It can defined this way:</p>
<blockquote class="blockquote">
<p><strong>It is the difference between the fraction of the edges that fall within the given groups, i.e., connecting vertices that both lie in the same community, minus the expected fraction if edges were distributed at random, defined as the probability of an edge existing between vertices if connections are made at random but respecting vertex degrees.</strong></p>
</blockquote>
<ul>
<li><p><em>Actual</em> fraction: it is the actual fraction of the edges that fall within the given groups. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mfrac><mn>1</mn><mrow><mn>2</mn><mi>m</mi></mrow></mfrac><munder><mo>∑</mo><mrow><mi>v</mi><mo>,</mo><mi>w</mi></mrow></munder><msub><mi>A</mi><mrow><mi>v</mi><mo>,</mo><mi>w</mi></mrow></msub><mi>δ</mi><mrow><mo stretchy="true" form="prefix">(</mo><msub><mi>c</mi><mi>v</mi></msub><mo>,</mo><msub><mi>c</mi><mi>w</mi></msub><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">
\frac {1}{2m} \sum_{v,w} A_{v,w} \delta(c_v, c_w)
</annotation></semantics></math></p></li>
<li><p><em>Expected</em> fraction: it is the expected fraction of edges if edges were distributed at random, defined as the probability of an edge existing between vertices <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>v</mi><annotation encoding="application/x-tex">v</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>w</mi><annotation encoding="application/x-tex">w</annotation></semantics></math> if connections are made at random but respecting vertex degrees. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>P</mi><mo accent="true">̃</mo></mover><mrow><mo stretchy="true" form="prefix">[</mo><mrow><mo stretchy="true" form="prefix">(</mo><mi>v</mi><mo>,</mo><mi>w</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>∈</mo><mi>E</mi><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><msub><mover><mi>P</mi><mo accent="true">̃</mo></mover><mrow><mi>v</mi><mo>,</mo><mi>w</mi></mrow></msub><mo>=</mo><mfrac><mrow><msub><mi>k</mi><mi>v</mi></msub><msub><mi>k</mi><mi>w</mi></msub></mrow><mrow><mn>2</mn><mi>m</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">
\tilde{P}[(v,w) \in E] = \tilde{P}_{v,w} = \frac {k_v k_w}{2m}
</annotation></semantics></math></p></li>
</ul>
<p>We can now see how the original formula is just a difference of these two statistics. Modularity is just a function; you can then compute it over the network and the relative algorithm will optimize it.</p>
<blockquote class="blockquote">
<p>Q = (number of edges between communities) - (expected number of such edges)</p>
</blockquote>
<section id="louvain" class="level3">
<h3 class="anchored" data-anchor-id="louvain">Louvain</h3>
<p>One of the most famous optimization algorithms is the <em>Louvain Method</em>, which tries to maximise this value efficiently. There are two main approach:</p>
<ul>
<li>Brute force, which is computationally intensive for huge network.</li>
<li>Louvain method:
<ul>
<li>Every node is its own community.</li>
</ul>
<ol type="1">
<li>Each node is then moved into the adjacent community that guarantees the greatest modularity increase.</li>
<li>A new graph is created: its nodes are the updated communities and weighted links connect them accounting for bridges in the original graph.</li>
</ol>
<ul>
<li>Phases 1 and 2 are repeated until modularity is maximised: in other words, if further movements do not increase modularity, iterations end.</li>
</ul></li>
</ul>
<p>Louvain is an unsupervised algorithm (does not require the input of the number of communities, nor their sizes before execution) divided in two phases:</p>
<ol type="1">
<li>Modularity Optimization.</li>
<li>Community Aggregation.</li>
</ol>
</section>
</section>
<section id="bridge-detection" class="level2">
<h2 class="anchored" data-anchor-id="bridge-detection">Bridge detection</h2>
<p>Communities might be defined in other terms: e.g.,</p>
<blockquote class="blockquote">
<p><strong>Communities as components of the network obtained by removing as few bridges as possible.</strong></p>
</blockquote>
<p>This approach relies on edge-betweenness.</p>
<section id="girvan-newman" class="level3">
<h3 class="anchored" data-anchor-id="girvan-newman">Girvan-Newman</h3>
<p>This algorithm involves the following steps:</p>
<ol type="1">
<li>Compute the betweenness of all existing edges in the network;</li>
<li>Remove the edge(s) with the highest betweenness;</li>
<li>Recompute the betweenness for all edges;</li>
<li>Repeat steps 2 and 3 until no edges remain.</li>
</ol>
<p>The result of the Girvan–Newman algorithm is a dendrogram. The leaves of the dendrogram are individual nodes. We can decide the size of communities by selecting the distances/cut-off points in it; this is a <em>qualitative</em> decision, which depends on the network’s characteristics.</p>
</section>
<section id="density-versus-bridges" class="level3">
<h3 class="anchored" data-anchor-id="density-versus-bridges">Density versus Bridges</h3>
<ul>
<li>In dense network there are no clear bridges.</li>
<li>For very sparse networks a density definition will fail, even if we can detect some bridges.</li>
</ul>
</section>
</section>
<section id="feature-distance" class="level2">
<h2 class="anchored" data-anchor-id="feature-distance">Feature distance</h2>
<blockquote class="blockquote">
<p><strong>In this case, we define a community as a set of entities that share a precise set of features.</strong></p>
</blockquote>
<p>Once defined a distance measure based on the values of the selected node features. The entities within a community are more similar to each other than the ones outside the community. It involves running a <em>clustering algorithm</em> on the data, which it considers any kind of vertex features, not only their adjacencies (if this was the case we could map this definition as another density-based algorithm).</p>
</section>
<section id="percolation" class="level2">
<h2 class="anchored" data-anchor-id="percolation">Percolation</h2>
<blockquote class="blockquote">
<p><strong>Communities as sets of nodes grouped together by the propagation of the same property, action or information.</strong></p>
</blockquote>
<p>Usually, percolation approaches do not optimize an explicit quality function.</p>
<p>The main idea is that in a community nodes end up usually surrounded by nodes with the same labels and each node will decide, based on the labels of its neighbours, thus we can study the so-called <em>label propagation</em>.</p>
<section id="label-propagation" class="level3">
<h3 class="anchored" data-anchor-id="label-propagation">Label propagation</h3>
<blockquote class="blockquote">
<p><strong>In a community, nodes will end up surrounded by nodes with the same label.</strong></p>
<ul>
<li><strong>Nodes decide for themselves to which community they belong by looking at their neighbours’ community assignments.</strong></li>
<li><strong>Node labels indicate to which community each node belongs.</strong></li>
</ul>
</blockquote>
<p>This approach involves the following steps:</p>
<ol type="1">
<li>Start with a network whose node labels are scattered randomly.</li>
<li>Each node looks at its neighbours and adopts the most common labels it sees (if there is a tie, it will choose a random one among the most popular).</li>
<li>As a result, the labels will percolate through the network until we reach a state in which no more significant changes can happen.</li>
</ol>
</section>
</section>
<section id="entity-closeness" class="level2">
<h2 class="anchored" data-anchor-id="entity-closeness">Entity closeness</h2>
<blockquote class="blockquote">
<p><strong>Communities are modelled as sets of nodes that can reach any member of their group crossing a very low number of edges, significantly lower than the average shortest path in the network.</strong></p>
</blockquote>
<p>We wish to minimise the <em>average shortest path</em> in the group, maximising its difference with the rest of the network.</p>
<section id="infomap" class="level3">
<h3 class="anchored" data-anchor-id="infomap">InfoMap</h3>
<blockquote class="blockquote">
<p><strong>Infomap algorithm tries to minimize a cost function. Partitioning is based on the flow induced by the pattern of connections in a given network.</strong></p>
</blockquote>
<p>The algorithm uses the probability flow of random walks on a network as an intermediary for information flows in the real system and it decomposes the network into modules by compressing a description of the probability flow.</p>
<p>Partitioning is a way to reduce the amount of information needed to describe a network.</p>
<p>The basic idea is to use community partitions of the graph as a <em>Huffman code</em> that compresses the information about a random walker exploring your graph. Detect communities by compressing the description of information flow on networks. We zip the amount of information expressed in a specific group.</p>
</section>
</section>
<section id="structure-definition" class="level2">
<h2 class="anchored" data-anchor-id="structure-definition">Structure definition</h2>
<p>From the sociology literature, we wish to identify communities by identifying certain patterns that connects them. In other words, we wish to identify precise patterns within a network to discover communities.</p>
<blockquote class="blockquote">
<p><strong>Communities as sets of nodes having a precise number of edges among them, distributed in a precise topology defined by a number of rules.</strong></p>
</blockquote>
<section id="k-cliques" class="level3">
<h3 class="anchored" data-anchor-id="k-cliques">k-cliques</h3>
<ol type="1">
<li>Identify k-cliques, which are fully connected networks with k nodes. (The smallest possible k would be k = 3. Otherwise, the cliques would be only edges or a single node).</li>
<li>A community is then defined as a set of adjacent k-cliques, that is, k-cliques that share exactly k-1 nodes. With <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>k</mi><mo>=</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">k = 3</annotation></semantics></math>, two 3-cliques are adjacent if they share exactly two nodes (equivalent to an edge).</li>
</ol>
</section>
</section>
<section id="peculiar-topologies" class="level2">
<h2 class="anchored" data-anchor-id="peculiar-topologies">Peculiar topologies</h2>
<p>Bipartite and directed networks necessitate alternative strategies to understand and cluster communities. As a matter of facts, in these cases the definition itself needs to be redefined.</p>
<section id="community-evaluation-strategies" class="level3">
<h3 class="anchored" data-anchor-id="community-evaluation-strategies">Community evaluation strategies</h3>
<ul>
<li><em>Internal evaluation</em>: we do not have any possibility to compare the result with the real situation.
<ul>
<li>In most cases we do not have an idea about the topology of a network communities.</li>
</ul></li>
<li><em>External evaluation</em>: in this case, we have <em>ground truth testing</em>, also called partitions comparison.</li>
</ul>
<p>Several fitness functions can be defined to assess the quality of a partition: the best partition is the one maximizing (or minimizing) a given fitness function in its worst-case scenario (e.g.: we are creating the partition <em>at random</em>).</p>
<section id="evaluation-using-clustering-quality-measures-evaluation-using-clustering-quality-measures-is-commonly-used-when-two-or-more-community-detection-algorithms-are-available.-each-algorithm-is-run-on-the-target-network-and-the-quality-measure-is-computed-for-the-identified-communities.-the-algorithm-that-yields-a-more-desirable-quality-measure-value-is-considered-a-better-algorithm.-the-sse-sum-of-squared-errors-and-inter-cluster-distance-are-some-of-the-quality-measures." class="level4">
<h4 class="anchored" data-anchor-id="evaluation-using-clustering-quality-measures-evaluation-using-clustering-quality-measures-is-commonly-used-when-two-or-more-community-detection-algorithms-are-available.-each-algorithm-is-run-on-the-target-network-and-the-quality-measure-is-computed-for-the-identified-communities.-the-algorithm-that-yields-a-more-desirable-quality-measure-value-is-considered-a-better-algorithm.-the-sse-sum-of-squared-errors-and-inter-cluster-distance-are-some-of-the-quality-measures.">Evaluation using clustering quality measures: evaluation using clustering quality measures is commonly used when two or more community detection algorithms are available. Each algorithm is run on the target network, and the quality measure is computed for the identified communities. The algorithm that yields a more desirable quality measure value is considered a better algorithm. The SSE (<em>Sum of Squared Errors</em>) and inter-cluster distance are some of the quality measures.</h4>
</section>
<section id="evaluation-with-semantics-this-approach-consist-in-analysing-other-attributes-posts-profile-information-the-content-generated-etc.-of-community-members-to-see-if-there-is-coherency-among-community-members.-we-can-use-different-set-of-qualitative-measure-to-perform-a-clustering-even-though-in-this-case-the-approach-requires-heuristics." class="level4">
<h4 class="anchored" data-anchor-id="evaluation-with-semantics-this-approach-consist-in-analysing-other-attributes-posts-profile-information-the-content-generated-etc.-of-community-members-to-see-if-there-is-coherency-among-community-members.-we-can-use-different-set-of-qualitative-measure-to-perform-a-clustering-even-though-in-this-case-the-approach-requires-heuristics.">Evaluation with semantics: this approach consist in analysing other attributes (<em>posts, profile information, the content generated, etc.</em>) of community members to see if there is coherency among community members. We can use different set of qualitative measure to perform a clustering, even though in this case the approach requires <em>heuristics</em>.</h4>
</section>
</section>
<section id="external-evaluation" class="level3">
<h3 class="anchored" data-anchor-id="external-evaluation">External Evaluation</h3>
<blockquote class="blockquote">
<p><strong>Given a graph <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>G</mi><annotation encoding="application/x-tex">G</annotation></semantics></math>, a ground truth partition <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>G</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">P(G)</annotation></semantics></math> and the set of identified communities <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>C</mi><annotation encoding="application/x-tex">C</annotation></semantics></math> estimate the resemblance the latter has with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>P</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>G</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">P(G)</annotation></semantics></math>.</strong></p>
</blockquote>
<p>Having the two partitions, testing can be conducted against topological truths about communities. In case of not structured data and classification problems, we can use the harmonic mean of precision and recall to <em>consolidate precision and recall into one measure</em>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mn>2</mn><mo>×</mo><mfrac><mrow><mi>P</mi><mo>×</mo><mi>R</mi></mrow><mrow><mi>P</mi><mo>+</mo><mi>R</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">
F = 2 \times \frac {P \times R}{P + R}
</annotation></semantics></math></p>
<p>In other words, we are computing sensitivity and specificity of a classification learning algorithm.</p>
</section>
</section>
<section id="r-code-for-communities-detection" class="level2">
<h2 class="anchored" data-anchor-id="r-code-for-communities-detection"><code>R</code> code for communities detection</h2>
<p>The best package to perform this task is <code>igraph</code>: we then need to transform our adjacency matrix in a compatible format. Moreover, most algos do not work with directed network, thus we need to perform a symmetrization.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Several algorithms do not work on directed networks, so let's symmetrize</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a>SymFriends <span class="ot">&lt;-</span> <span class="fu">xSymmetrize</span>(Krackhardt_HighTech<span class="sc">$</span>Friendship,<span class="at">Type =</span> <span class="st">"Max"</span>)</span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a><span class="co"># I create the igraph network of my adjacency matrix.</span></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a>Friends <span class="ot">&lt;-</span> <span class="fu">graph_from_adjacency_matrix</span>(</span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a>  SymFriends,</span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">mode =</span> <span class="fu">c</span>(<span class="st">"undirected"</span>), <span class="co"># "undirected", "max", "min", "upper", "lower", "plus"</span></span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">weighted =</span> <span class="cn">NULL</span>,</span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">diag =</span> <span class="cn">FALSE</span>,</span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">add.colnames =</span> <span class="fu">names</span>(SymFriends),</span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">add.rownames =</span> <span class="cn">NA</span></span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb150-13"><a href="#cb150-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-14"><a href="#cb150-14" aria-hidden="true" tabindex="-1"></a><span class="co"># This command optimise the graphical representation of a network by applying FR algo</span></span>
<span id="cb150-15"><a href="#cb150-15" aria-hidden="true" tabindex="-1"></a>coord <span class="ot">&lt;-</span> <span class="fu">layout_with_fr</span>(Friends)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In <code>R</code> clustering is performed by calling specific functions, such as <code>cluster_louvain</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>CluLouvain<span class="ot">&lt;-</span><span class="fu">cluster_louvain</span>(Friends, <span class="at">weights =</span> <span class="cn">NULL</span>, <span class="at">resolution =</span> <span class="dv">1</span>)</span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a>CluLouvain</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>IGRAPH clustering multi level, groups: 4, mod: 0.15
+ groups:
  $`1`
  [1] "A01" "A04" "A08" "A11" "A12" "A16"
  
  $`2`
  [1] "A02" "A06" "A18" "A21"
  
  $`3`
  [1] "A03" "A07" "A14" "A15" "A17" "A19" "A20"
  
  $`4`
  + ... omitted several groups/vertices</code></pre>
</div>
</div>
<p>This creates an object of type <code>communities</code>. We can look at the labels by calling:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>CluLouvain<span class="sc">$</span>membership</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 2 3 1 4 2 3 1 4 4 1 1 4 3 3 1 3 2 3 3 2</code></pre>
</div>
</div>
<p>Modularity instead can be obtained with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a>CluLouvain<span class="sc">$</span>modularity</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1516584</code></pre>
</div>
</div>
<p>We can then plot the graphical representation of our communities in our graph:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CluLouvain,Friends,<span class="at">layout=</span>coord) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-99-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Another method is the so-called <em>FastGreedy</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a>CluFastGreedy<span class="ot">&lt;-</span><span class="fu">cluster_fast_greedy</span>(</span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a>  Friends,</span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">merges =</span> <span class="cn">TRUE</span>,</span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">modularity =</span> <span class="cn">TRUE</span>,</span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">membership =</span> <span class="cn">TRUE</span>,</span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> <span class="cn">NULL</span></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Results are not the same, but are quite similar.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a>CluFastGreedy<span class="sc">$</span>membership</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 3 3 4 3 1 2 4 3 1 1 1 2 1 4 4 3 4 1 4 1 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CluFastGreedy,Friends,<span class="at">layout=</span>coord)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-102-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Being a <em>hierarchical method</em>, we can visualize a <em>dendogram</em>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_dendrogram</span>(CluFastGreedy)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-103-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Bridge detection algos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Bridge Detection</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="co">#Girvan Newman (edge betweenness)</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>CLuGirvan<span class="ot">&lt;-</span><span class="fu">cluster_edge_betweenness</span>(</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>  Friends,</span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">weights =</span> <span class="cn">NULL</span>,</span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">directed =</span> <span class="cn">FALSE</span>, <span class="co"># Note that this works also fro directed networks</span></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">edge.betweenness =</span> <span class="cn">TRUE</span>,</span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">merges =</span> <span class="cn">TRUE</span>,</span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">bridges =</span> <span class="cn">TRUE</span>,</span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">modularity =</span> <span class="cn">TRUE</span>,</span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">membership =</span> <span class="cn">TRUE</span></span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In this case, the communities created are different:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a>CLuGirvan<span class="sc">$</span>membership</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 1 1 1 1 2 3 1 1 1 1 1 4 5 1 1 1 6 1 1 7</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb166"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CLuGirvan,Friends,<span class="at">layout=</span>coord)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-106-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>This happens because we are indeed looking at a different way to look at a community.</p>
<p>Percolation algos:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a>CluLabelProp<span class="ot">&lt;-</span><span class="fu">cluster_label_prop</span>(Friends, <span class="at">weights =</span> <span class="cn">NULL</span>, <span class="at">initial =</span> <span class="cn">NULL</span>, <span class="at">fixed =</span> <span class="cn">NULL</span>)</span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(CluLabelProp,Friends,<span class="at">layout=</span>coord)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-107-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>However, in this case the optimization brings an undesired result: in this case, we have that the optimal label propagation results in having a single label.</p>
</section>
</section>
<section id="inferential-statistics-for-complete-networks" class="level1">
<h1>Inferential statistics for complete networks</h1>
<blockquote class="blockquote">
<p><strong>We will see now how we can run regression analysis and have significance assessments when dealing in situations in which predictors or dependent variables are <em>networks</em>.</strong></p>
</blockquote>
<p>The fact that our nodes are part of a <em>network</em> creates a fundamental problem: we <em>know</em> that our variables are not <em>independent</em>, thus creating a need to develop different tools to perform <em>significance tests</em> to obtain <em>p-values</em>. In other words, we wish to test specific hypothesis: this means that we need to use either <em>correlation</em> or <em>regressions</em>.</p>
<p><strong>What happens when we have networks as variables?</strong></p>
<p>We have two cases:</p>
<ul>
<li>We have a non-network variable as outcome of a network problem: networks are the <em>independent</em> variable.</li>
<li>The non-network variable is the antecedent of a network process: the network variable is seen as a <em>dependent</em> variable.</li>
</ul>
<section id="level-of-analysis" class="level2">
<h2 class="anchored" data-anchor-id="level-of-analysis">Level of analysis</h2>
<ol type="1">
<li>Dyadic level: assign a score to every pair of nodes (e.g.: we are studying geodesic distances between nodes).</li>
</ol>
<ul>
<li><em>Friendship</em>: is used to predict <em>similarity in outcomes</em> (e.g.&nbsp;due to contagion); we wish to compute a score and assign it to another variable.</li>
<li><em>Physical proximity</em>: in this case, we measure proximity to predict <em>friendship</em>, due to opportunities to interact. We have a non-network variable predicting a network variable.</li>
</ul>
<ol start="2" type="1">
<li>Node level: assign a score to every node (e.g.: centrality, betweenness, how many friends the node has). We are operating at a <em>monadic</em> level.</li>
</ol>
<ul>
<li><em>Burnout</em>: if interaction capabilities are saturated, a subject might deplete its resources and end up under-performing.</li>
<li><em>Extra-version</em>: can be used to predict <em>number of friends</em>, which is the degree of a given node.</li>
</ul>
<ol start="3" type="1">
<li>Group or network level: analyse the network as a whole (network density, core-peripheriness).</li>
</ol>
<ul>
<li>In this case, we will have a score regarding the whole network. However, we can conceptualize <em>sub-networks</em> in which to apply this kind of aggregate measurement.</li>
<li>Density of <em>trust</em> network: can be used to predict a team performance, because <em>trust</em> simplifies <em>coordination</em>.</li>
<li><em>Machiavellian leadership</em>: we can use a model of leadership to predict network centralization, assuming that different classes of leaders yields different levels of centralization.</li>
</ul>
</section>
<section id="statistical-testing-at-group-level" class="level2">
<h2 class="anchored" data-anchor-id="statistical-testing-at-group-level">Statistical testing at group level</h2>
<blockquote class="blockquote">
<p><strong>Do you need a specialized network-friendly methodology or can we apply the usual techniques?</strong></p>
</blockquote>
<p>We could run a regression without thinking too much; however, the problem emerges emerges when assessing whether the results are significant or not. While ordinary regression techniques will do just fine in most cases, we need to think about <em>sampling theory</em>, which underlies all regression theoretical underpinnings.</p>
<p>We need a way to extract a <em>random</em> set of <em>independent</em> observations from a population. However, in the case of networks, we do not have neither independent observations and mostly we do not even have <em>samples</em>.</p>
<blockquote class="blockquote">
<p><strong>If we have a biased sample, or if we have measured the whole population, it does not make sense to use the classical test.</strong></p>
</blockquote>
<p>Often the networks of interest, especially at a group level, have small <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math>, which creates more problem from a statistical perspective <em>per se</em>. Moreover, classical techniques might be heavily affected by outliers (common in networks) and influential points. Note that all these characteristic are not caused by bad data, but are intrinsic to the problems of interest.</p>
<blockquote class="blockquote">
<p><strong>We do not have a proper sample (and if we did, it would still be quite small) we need to consider an alternative way to test significance.</strong></p>
</blockquote>
<section id="permutation-or-randomization-test" class="level3">
<h3 class="anchored" data-anchor-id="permutation-or-randomization-test">Permutation or randomization test</h3>
<p>We could reassign in a random way the correlation score given to specific element of the network: for example, if we are trying to measure the performance of project teams, we are assigning each team a score. We could then take the set of ratings and assign each one of them to a random team.</p>
<blockquote class="blockquote">
<p><strong>This way we obtain a <em>random variable</em>, by design</strong>.</p>
</blockquote>
<p>The next question is then to ask which proportion of permutations would have led to at least a correlation as large as the one obtained. If this proportion is high, then the observed score is not that unusual and it can be due to chance alone. The fact that they are independent does not imply that the correlation is 0, so this method can produce a useful <em>significance statistic.</em></p>
<blockquote class="blockquote">
<p><strong>The general idea is that we want to compare the <em>observed correlation</em> against the <em>distribution of correlations</em> that one could obtain if the two variables were in fact independent of each other.</strong></p>
</blockquote>
<p>Advantages:</p>
<ul>
<li>Works on the whole population.</li>
<li>Works for small sample sizes.</li>
<li>No-normality assumptions for the variable distribution.</li>
</ul>
<p>In <code>R</code> we can use <code>xUCINET</code> function <code>xCorrelation</code>.</p>
</section>
</section>
<section id="statistical-tests-at-the-node-level" class="level2">
<h2 class="anchored" data-anchor-id="statistical-tests-at-the-node-level">Statistical tests at the node level</h2>
<blockquote class="blockquote">
<p><strong>What are the special challenges in testing hypotheses at the node level</strong>?</p>
</blockquote>
<p>There are a lot of situations in which people ignore the fact that they are dealing with a network and therefore they will apply classical statistical techniques such as OLS.</p>
<p>However, we are dealing with the same issues as before:</p>
<ul>
<li>Small sample sizes.</li>
<li>There might be outliers.</li>
<li>The data are not a sample at all.</li>
</ul>
<blockquote class="blockquote">
<p><strong>It is then prudent to use a permutation-based p-value rather than the classical ones.</strong></p>
</blockquote>
<ol type="1">
<li><code>xCorrelation</code> to correlate two node-level variables.</li>
<li><code>xRegression</code> to perform a linear regression.</li>
</ol>
<p>We still have to deal with another very important problem: <em>network auto-correlation</em>. An example might be <em>contagion dynamics</em>: there is a degree of contagion in burnout, because I interact with people who are feeling exhausted and overwhelmed, the more I start feeling the same way. There is then a feedback of information.</p>
<section id="network-autocorrelation" class="level3">
<h3 class="anchored" data-anchor-id="network-autocorrelation">Network autocorrelation</h3>
<p>The basic idea is to add an autoregressive coefficient <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ρ</mi><annotation encoding="application/x-tex">\rho</annotation></semantics></math> to the standard regression equation: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Y</mi><mo>=</mo><msub><mi>b</mi><mn>0</mn></msub><mo>+</mo><mi>ρ</mi><mi>W</mi><mi>Y</mi><mo>+</mo><msub><mi>b</mi><mn>1</mn></msub><msub><mi>X</mi><mn>1</mn></msub><mo>+</mo><msub><mi>b</mi><mn>2</mn></msub><msub><mi>X</mi><mn>2</mn></msub><mo>+</mo><mi>.</mi><mi>.</mi><mi>.</mi><mo>+</mo><mi>ϵ</mi></mrow><annotation encoding="application/x-tex">
Y = b_0 + \rho WY + b_1 X_1 + b_2 X_2 + ... + \epsilon
</annotation></semantics></math></p>
<p><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>W</mi><mi>Y</mi></mrow><annotation encoding="application/x-tex">WY</annotation></semantics></math> represents the effect that the other nodes values on the dependent variable (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>) have on node as a result of their network relations to each other, which is captured by the matrix <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>. It acts as an <em>autoregressive coefficient</em>, which allows us to represent the feedback of informations and its effect on the network. The size of such an effect is expressed by <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>ρ</mi><annotation encoding="application/x-tex">\rho</annotation></semantics></math>.</p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math>: could be representing
<ul>
<li>The strength of the direct tie between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>I</mi><annotation encoding="application/x-tex">I</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>,</li>
<li>The level of structural equivalence between both nodes, or the geodesic distance between <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>.</li>
</ul></li>
</ul>
<p><code>xAutoRegression</code> computes a simple auto-regression model.</p>
</section>
</section>
<section id="statistical-testing-at-the-dyad-level" class="level2">
<h2 class="anchored" data-anchor-id="statistical-testing-at-the-dyad-level">Statistical testing at the dyad level</h2>
<p>The dyad level analysis are the most difficult to deal with, because our data are in the form of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math> matrices. This means that both distance and interaction are valued and undirected <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math> matrices, which no standard statistics package will understand.</p>
<p>A first solution might be to <em>vectorize</em> the data as a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mrow><mo stretchy="true" form="prefix">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mi>/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">n(n -1) /2</annotation></semantics></math> sized vector. However, these values are <em>not independent observations</em>, since they represent the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">n-1</annotation></semantics></math> observations that all involve node <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>: this implies that any peculiarity of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> will affect the values of every dyad involving it. As this was not enough, there are myriad other sources of interdependence among dyads in network data.</p>
<p>We can solve the interdependency problem by using the QAP, which consists in running a <em>permutation based regression</em> on vectorized data</p>
<section id="quadratic-assignment-problem" class="level3">
<h3 class="anchored" data-anchor-id="quadratic-assignment-problem">Quadratic Assignment Problem</h3>
<ol type="1">
<li>We compute the test statistic (a correlation in our case) between our two observed variables (distance and frequency of interaction).</li>
<li>We permute the data in a special way, correlate the permuted data, and repeat, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>N</mi><annotation encoding="application/x-tex">N</annotation></semantics></math> times.</li>
<li>We count the proportion smaller or equal (if we are expecting a negative correlation, larger or equal if we are expecting a positive correlation) to the observed correlation.</li>
</ol>
<p>This proportion works as our p-value. For a <em>two-tailed test</em>, we simply take the absolute value of the correlations and count the number greater than the absolute value of the observed correlation.</p>
</section>
<section id="how-are-permutation-are-performed" class="level3">
<h3 class="anchored" data-anchor-id="how-are-permutation-are-performed">How are permutation are performed?</h3>
<blockquote class="blockquote">
<p><strong>What is special about QAP is the way the permutations are done.</strong></p>
</blockquote>
<p>As an example:</p>
<ul>
<li>We have collected data on the <em>distance among people’s offices</em> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math>) and the amount of <em>interaction</em> (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math>).
<ul>
<li>Both are <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi><mo>×</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n \times n</annotation></semantics></math> matrices.</li>
</ul></li>
<li>We now permute the rows and the associated columns (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math> stays fixed, because doing otherwise would not provide additional gains).</li>
<li>Rows and columns move together: this <em>just relabels the nodes</em>, without changing the characteristics of the network, regardless of the fact that <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math> have been relocated in the matrix.</li>
</ul>
<p>All structural features and dependencies of the original network are preserved by this permutation, even those which are not considered in the analysis and are not known.</p>
<blockquote class="blockquote">
<p><strong>All structural features or dependencies are controlled for automatically, even ones we are unaware of.</strong></p>
</blockquote>
<p><code>xQAPCorrelation</code> perform QAP correlations on dyadic data.</p>
</section>
<section id="qap-regressions" class="level3">
<h3 class="anchored" data-anchor-id="qap-regressions">QAP regressions</h3>
<p>QAP correlation by definition is only <em>bivariate</em>: we need to use <code>xQAPRegression</code>, which is the same as standard multiple regression with p-values computed by a QAP permutation test.</p>
<p>There are a number of ways to compute this:</p>
<ul>
<li><em>Y-permutation</em> approach:
<ul>
<li>Run the regression on the observed data.</li>
<li>Permute the <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math> variable as in QAP correlation, re-run the regression and record the regression coefficients.</li>
<li>We do this thousands of times and count up the proportion of times that the permutation coefficient is as extreme as the one we are observing.</li>
</ul></li>
<li><em>Double semi-partialing</em> method:
<ul>
<li>Run the regression on the observed data (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math> regressed on <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>,</mo><mi>Z</mi><mo>,</mo><mi>W</mi></mrow><annotation encoding="application/x-tex">X,Z,W</annotation></semantics></math>).</li>
<li>We start running a regression to predict <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math> using <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>W</mi><annotation encoding="application/x-tex">W</annotation></semantics></math> and <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Z</mi><annotation encoding="application/x-tex">Z</annotation></semantics></math> (the other covariates). This way I get the predicted <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>X</mi><annotation encoding="application/x-tex">X</annotation></semantics></math> values, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mover><mi>X</mi><mo accent="true">̂</mo></mover><annotation encoding="application/x-tex">\hat X</annotation></semantics></math>.</li>
<li>We then calculate the residual matrix, <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>X</mi><mo>−</mo><mover><mi>X</mi><mo accent="true">̂</mo></mover></mrow><annotation encoding="application/x-tex">X − \hat X</annotation></semantics></math>, which we will call <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mi>r</mi></msub><annotation encoding="application/x-tex">X_r</annotation></semantics></math> . This variable is X with effects of W and Z removed from it. Now, we repeatedly permute the rows and columns of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mi>r</mi></msub><annotation encoding="application/x-tex">X_r</annotation></semantics></math> and regress Y on W, Z and the permuted <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>X</mi><mi>r</mi></msub><annotation encoding="application/x-tex">X_r</annotation></semantics></math> , keeping track of the t-statistics (I.e., the coefficient divided by the standard error for the coefficient). The p-value for the coefficient on X is given by the proportion.</li>
</ul></li>
</ul>
</section>
</section>
<section id="network-inference-in-r" class="level2">
<h2 class="anchored" data-anchor-id="network-inference-in-r">Network inference in <code>R</code></h2>
<p>We wish to perform a classic correlation analysis between centralization and performance across 18 teams.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a>M18Centrz<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fl">0.59</span>, <span class="fl">0.83</span>, <span class="fl">0.60</span>, <span class="fl">0.45</span>, <span class="fl">0.52</span>, <span class="fl">0.62</span>, <span class="fl">0.64</span>, <span class="fl">0.00</span>, <span class="fl">0.43</span>, <span class="fl">0.44</span>, </span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a>             <span class="fl">0.76</span>, <span class="fl">0.50</span>, <span class="fl">0.65</span>, <span class="fl">0.68</span>, <span class="fl">0.48</span>, <span class="fl">0.52</span>, <span class="fl">0.80</span>, <span class="fl">0.10</span>)</span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a>M18Perf<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">4</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">3</span>, <span class="dv">8</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">5</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">6</span>, <span class="dv">4</span>, <span class="dv">7</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We could compute a standard correlation statistic:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor</span>(M18Centrz,M18Perf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.1311454</code></pre>
</div>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cor.test</span>(M18Centrz,M18Perf)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's product-moment correlation

data:  M18Centrz and M18Perf
t = 0.52915, df = 16, p-value = 0.604
alternative hypothesis: true correlation is not equal to 0
95 percent confidence interval:
 -0.3576211  0.5635128
sample estimates:
      cor 
0.1311454 </code></pre>
</div>
</div>
<p>We can conclude that the correlation is positive, but not significant. Note that we have a small sample of not independent statistical units. To compute a network specific correlation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>))</span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">xCorrelation</span>(M18Centrz,M18Perf, <span class="at">NPERM=</span><span class="dv">5000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                              Value
NumberOfCases          18.000000000
ValidCases_VEC1        18.000000000
ValidCases_VEC2        18.000000000
ValidCases_Both        18.000000000
CorrCoeff               0.131145360
ClassicSign_2tailed     0.603964787
Mean_Perm              -0.003784357
SD_Perm                 0.245314222
Min_Perm               -0.776033700
Max_Perm                0.804213695
AsSmall                 0.711600000
AsLarge                 0.288400000
AsExtreme               0.606000000
NumberOfPermutations 5000.000000000</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-110-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>The most important result of the list is <code>AsExtreme</code>, which tells us the probability that the result from the permuted vectors is <em>as extreme</em> as the one we observe. Note also that the correlation value is the same we got earlier; the main difference belongs to the way in which <em>significance</em> is computed.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>Age15<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="dv">29</span>, <span class="dv">72</span>, <span class="dv">23</span>, <span class="dv">51</span>, <span class="dv">49</span>, <span class="dv">61</span>, <span class="dv">48</span>, <span class="dv">68</span>, <span class="dv">38</span>, <span class="dv">46</span>, <span class="dv">31</span>, <span class="dv">63</span>, <span class="dv">62</span>, <span class="dv">59</span>, <span class="dv">26</span>)</span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Age15)</span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a>Consc15<span class="ot">&lt;-</span><span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">5.5</span>, <span class="fl">3.1</span>, <span class="fl">2.3</span>, <span class="fl">3.8</span>, <span class="fl">9.3</span>, <span class="fl">7.0</span>, <span class="fl">0.7</span>, <span class="fl">5.5</span>, <span class="fl">0.8</span>, <span class="fl">6.2</span>, <span class="fl">3.1</span>, <span class="fl">1.5</span>, <span class="fl">5.6</span>, <span class="fl">2.7</span>)</span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Consc15)</span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a>Burnout15<span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fl">2.55</span>, <span class="fl">6.80</span>, <span class="fl">5.00</span>, <span class="fl">6.19</span>, <span class="fl">3.00</span>, <span class="fl">3.84</span>, <span class="fl">3.42</span>, <span class="fl">8.31</span>, <span class="fl">5.41</span>, <span class="fl">6.58</span>, <span class="fl">4.74</span>, <span class="fl">7.14</span>, <span class="fl">6.43</span>, <span class="fl">3.18</span>, <span class="fl">2.83</span>)</span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(Burnout15)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-111-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a>Comm15<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, </span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>, <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a>                 </span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,</span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,</span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,</span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a>                 </span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-14"><a href="#cb176-14" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,</span>
<span id="cb176-15"><a href="#cb176-15" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>, <span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-16"><a href="#cb176-16" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>, <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,</span>
<span id="cb176-17"><a href="#cb176-17" aria-hidden="true" tabindex="-1"></a>                 <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>, <span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>),<span class="dv">15</span>,<span class="dv">15</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(Comm15, <span class="at">gmode=</span><span class="st">"graph"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-112-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a>Degr15<span class="ot">&lt;-</span><span class="fu">rowSums</span>(Comm15)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To call the regression function, beware that:</p>
<ul>
<li>The regressors need to be passed as a <em>data frame.</em></li>
<li>The <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Y</mi><annotation encoding="application/x-tex">Y</annotation></semantics></math> needs to be a <em>vector.</em></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>X15<span class="ot">&lt;-</span><span class="fu">data.frame</span>(Age15,Consc15,Degr15)</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="fu">xRegression</span>(Burnout15,X15,<span class="at">NPERM=</span><span class="dv">5000</span>) <span class="co"># NPERM&gt;1000 is advisable.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Model
                            Value
NumberOfCases            15.00000
NValidCases_DV           15.00000
NValidCases_IV.Age15     15.00000
NValidCases_IV.Consc15   15.00000
NValidCases_IV.Degr15    15.00000
NValidCasesAll           15.00000
RSquared                  0.48869
AdjustedRSquared          0.34924
FValue                    3.50441
DF1                       3.00000
DF2                      11.00000
Significance              0.05303
NumberOfPermutations   5000.00000

$Variables
               Coeff   StErr  t_value Classic_Sign Mean_Perm SD_Perm AsSmall
(Intercept)  1.70298 1.78308  0.95508      0.36006   5.03682 2.14685  0.0616
Age15        0.06421 0.02536  2.53190      0.02788   0.00038 0.03152  0.9798
Consc15     -0.24450 0.15633 -1.56399      0.14611   0.00034 0.18993  0.1052
Degr15       0.39188 0.42826  0.91504      0.37979  -0.00969 0.52508  0.7694
            AsLarge AsExtreme
(Intercept)  0.9384    0.0616
Age15        0.0202    0.9990
Consc15      0.8948    1.0016
Degr15       0.2306    1.0122

Classic significance value based on assumption of independence of cases.</code></pre>
</div>
</div>
<p><code>Classic_Sign</code> is the <em>classic</em> p-values; we need to compare it with the measures we obtain with the permutation process. The relevant ones are the one either <code>AsSmall</code> or <code>AsLarge</code> : we can see that the degree of significance differs heavily from the ones we obtain with the standard approach.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="fu">xQAPCorrelation</span>(Padgett_FlorentineFamilies<span class="sc">$</span>Marriage,Padgett_FlorentineFamilies<span class="sc">$</span>Business,<span class="at">NPERM =</span> <span class="dv">10000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-115-1.png" class="img-fluid" width="768"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>                                     Value
NumberOfNodes           16.000000000000000
NumberOfCases          240.000000000000000
ValidCases_NET1        240.000000000000000
ValidCases_NET2        240.000000000000000
ValidCases_Both        240.000000000000000
CorrCoef                 0.371867872080548
ClassicSign_2tailed      0.000000002756827
Mean_Perm               -0.000229881957286
SD_Perm                  0.093622468073011
Min_Perm                -0.169030850945704
Max_Perm                 0.371867872080548
AsSmall                  0.999800000000000
AsLarge                  0.000300000000000
AsExtreme                0.000300000000000
NumberOfPermutations 10000.000000000000000</code></pre>
</div>
</div>
<p>To perform a regression, we need to transform the regressors variables into <em>lists</em>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>MATRIX1<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">3</span>, <span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">1</span>, <span class="dv">4</span>,<span class="dv">8</span>,<span class="dv">0</span>,<span class="dv">2</span>, <span class="dv">6</span>,<span class="dv">2</span>,<span class="dv">6</span>,<span class="dv">0</span>),<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>MATRIX2<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">1</span>, <span class="dv">3</span>,<span class="dv">0</span>,<span class="dv">3</span>,<span class="dv">7</span>, <span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">0</span>,<span class="dv">2</span>, <span class="dv">5</span>,<span class="dv">2</span>,<span class="dv">2</span>,<span class="dv">0</span>),<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a>MATRIX3<span class="ot">&lt;-</span><span class="fu">matrix</span>(<span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">3</span>, <span class="dv">2</span>,<span class="dv">0</span>,<span class="dv">2</span>,<span class="dv">8</span>, <span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">0</span>,<span class="dv">2</span>, <span class="dv">3</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">0</span>),<span class="dv">4</span>,<span class="dv">4</span>)</span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>LIST2<span class="ot">&lt;-</span><span class="fu">list</span>(MATRIX2,MATRIX3)</span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>RESULTS1<span class="ot">&lt;-</span><span class="fu">xQAPRegression</span>(MATRIX1,LIST2,<span class="at">NPERM=</span><span class="dv">1000</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
$Model
                          Value
NumberOfNodes           4.00000
NumberOfCases          12.00000
NValidCases_DV         12.00000
NValidCases_IV.X1      12.00000
NValidCases_IV.X2      12.00000
NValidCasesAll         12.00000
RSquared                0.40662
AdjustedRSquared        0.27476
FValue                  3.08368
DF1                     2.00000
DF2                     9.00000
Significance            0.09550
NumberOfPermutations 1000.00000

$Variables
   Stand_Coeff    Coeff   StErr  t_value [Sign*] Mean_Perm SD_Perm AsSmall
       0.00000  4.66096 1.30201  3.57983 0.00593   0.49312 1.28978   0.956
X1     0.59238  0.57998 0.28150  2.06030 0.06945   0.03594 1.09379   1.000
X2    -0.62258 -0.74557 0.34432 -2.16533 0.05856  -0.04352 1.62418   0.133
   AsLarge AsExtreme
     0.044     0.044
X1   0.049     0.076
X2   0.867     0.174

Sign* = classic significance value based on assumption of independence of cases. Not to be used.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>RESULTS1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$Model
$Model$NumberOfNodes
[1] 4

$Model$NumberOfCases
[1] 12

$Model$NValidCases_DV
[1] 12

$Model$NValidCases_IV
X1 X2 
12 12 

$Model$NValidCasesAll
[1] 12

$Model$RSquared
[1] 0.4066206

$Model$AdjustedRSquared
[1] 0.2747586

$Model$FValue
[1] 3.083681

$Model$DF1
[1] 2

$Model$DF2
[1] 9

$Model$Significance
[1] 0.09549837

$Model$NumberOfPermutations
[1] 1000


$MP

OLS Network Model

Residuals:
         0%         25%         50%         75%        100% 
-2.32977438 -1.12137389 -0.04865028  0.94223409  2.41579371 

Coefficients:
            Estimate   Pr(&lt;=b) Pr(&gt;=b) Pr(&gt;=|b|)
(intercept)  4.6609589 0.956   0.044   0.044    
x1           0.5799758 1.000   0.049   0.076    
x2          -0.7455681 0.133   0.867   0.174    

Residual standard error: 1.746 on 9 degrees of freedom
Multiple R-squared: 0.4066  Adjusted R-squared: 0.2748 
F-statistic: 3.084 on 2 and 9 degrees of freedom, p-value: 0.0955 


Test Diagnostics:

    Null Hypothesis: qapspp 
    Replications: 1000 
    Coefficient Distribution Summary:

       (intercept)       x1       x2
Min       -0.99364 -2.28594 -2.77901
1stQ      -0.45304 -0.58587 -1.99455
Median     0.06583 -0.30842 -0.04374
Mean       0.49312  0.03594 -0.04352
3rdQ       1.73611  0.52927  1.11625
Max        3.57983  2.06030  3.47175


$Variables
   Stand_Coeff      Coeff     StErr   t_value     [Sign*]   Mean_Perm  SD_Perm
     0.0000000  4.6609589 1.3020068  3.579827 0.005932359  0.49312275 1.289782
X1   0.5923831  0.5799758 0.2815009  2.060298 0.069446606  0.03594367 1.093791
X2  -0.6225816 -0.7455681 0.3443211 -2.165328 0.058557298 -0.04352445 1.624178
   AsSmall AsLarge AsExtreme
     0.956   0.044     0.044
X1   1.000   0.049     0.076
X2   0.133   0.867     0.174</code></pre>
</div>
</div>
<p>In this case, we are interested in the <code>Sign*</code> as our significance. The method can be changed by calling the <code>method</code> argument inside the function call; as a default, it uses the <em>semi-partialling</em> method to compute the permutations.</p>
</section>
</section>
<section id="systemic-risk" class="level1">
<h1>Systemic risk</h1>
<blockquote class="blockquote">
<p><strong>Can be defined as the risk that the financial system breaks down; it is important because it often has disastrous effects on the real economy and GDP.</strong></p>
</blockquote>
<p>Interconnections between different players causes this risk as an endogenous component of complex system; interactions are usually not taken into account, causing therefore models to fail completely and to not be able to predict accurately the outcome of a systemic shock.</p>
<ul>
<li>Financial markets as interacting systems.</li>
<li>Systemic risk as an emergent phenomenon.</li>
<li>Interactions between banks can be modelled through networks.</li>
</ul>
<p>Interconnections might be relevant to both regulators and individual investors (e.g.: indirect exposition to unforeseen risks).</p>
<blockquote class="blockquote">
<p><strong>How are exogenous shocks amplified by endogenous dynamics?</strong></p>
</blockquote>
<section id="interbank-networks-and-their-properties" class="level2">
<h2 class="anchored" data-anchor-id="interbank-networks-and-their-properties">Interbank networks and their properties</h2>
<p>Banks are connected through mortgages, capital and interbank loans; these kind of networks are complex and usually <em>multi-layered</em>, with multiple networks stacked on top of each others and linked through different types of exposures. These exposures can be aggregated to some extent, even though this can cause loss of information.</p>
<p>Most literature dealt with <em>static</em> networks with a single layer, which represent a snapshot of interbank exposures at a given time. This was caused by <em>lack of information</em> (e.g.: links between banks and other non-regulated entities). Studying these networks allows us to discover stylized facts which expose similarities even between the banking systems of different countries.</p>
<p>The information we have are:</p>
<ul>
<li>Balance sheet</li>
<li>Tier 1 capital</li>
<li>Liquid/illiquid assets</li>
</ul>
<p>The size distribution of the total bank assets is heavily skewed and can be approximated through a power law: a heterogeneous, heavy tailed distribution tells us that we have either very big or very small banks. If we observe the <em>distribution of interbank exposures</em> we can visualize that their size is also heavily skewed and can modelled through a power law. These two facts are mostly related: bigger banks have the most interbank exposure.</p>
<p>Analysing this structure as a network, we can visualize the degree distribution: it also is quite heterogeneous compared to a random graph (Erdös-Réyni), which means that the average degree is <em>not</em> a proxy for the degree of the network nodes. Despite the absence of the scale-free property, we can still see that the degree distribution is heavily skewed.</p>
<p>Other important facts:</p>
<ul>
<li>The network is quite <em>sparse</em>: we have a very low density network.</li>
<li>The number of <em>hubs</em> (nodes with more than a hundred connections) is instead quite high.</li>
<li>89% of the links in the system regards only the top 5% of the nodes: a few banks are heavily connected to most links in the system.</li>
<li>It is a <em>disassortative</em> network (with <em>negative assortativity</em>): this can enhance the diversification of each network component (where diversification is the number of counter parties).</li>
<li>We also have <em>large local clustering</em>; this connection creates an enhanced systemic default risk.
<ul>
<li>Being this a real networks built over a long period of time, different types of links coexists.</li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p><strong>These properties are present in most interbank networks</strong>.</p>
</blockquote>
<section id="core-periphery-network" class="level3">
<h3 class="anchored" data-anchor-id="core-periphery-network">Core-periphery network</h3>
<blockquote class="blockquote">
<p><strong>A core-periphery network has a core of highly interconnected nodes and a periphery of banks that are not highly connected between them, but are connected to the core; this core intermediates between peripheral banks.</strong></p>
</blockquote>
<p>To summarize:</p>
<ol type="1">
<li>We have heavy-tailed degree distributions (presence of <em>hubs</em>).</li>
</ol>
<ul>
<li>Even if it is not clear whether we have a power-law or not here, we still have the relevant characteristic of a real network.</li>
</ul>
<ol start="2" type="1">
<li>Disassortativity.</li>
<li>High average clustering (counter party risk externalities).</li>
<li>A documented core-periphery structure.</li>
</ol>
<ul>
<li>We compare the network with an ideal core-periphery network by looking to all the possible combinations of nodes assignment and then we should compare their adjacency matrices and compute a distance between them; the optimal partition minimises this distance, which works as an error score.</li>
<li>However, over fitting might be an issue here.</li>
</ul>
<blockquote class="blockquote">
<p><strong>The banks at the core are the biggest and most connected: they are certainly also of systemic importance in the network. However, looking at the size is often not enough, even if looking at the size has a good correlation.</strong></p>
</blockquote>
</section>
</section>
<section id="models-of-shock-propagation" class="level2">
<h2 class="anchored" data-anchor-id="models-of-shock-propagation">Models of shock propagation</h2>
<p>In this case we take the network as <em>given</em> and we apply <em>mechanic rules</em> which model how banks react to losses; this provides insights on the outcomes of a shock.</p>
<blockquote class="blockquote">
<p><strong>The first things to consider is the <em>balance sheet</em>.</strong></p>
</blockquote>
<p>We have:</p>
<ul>
<li>Assets:
<ul>
<li>Interbank assets.</li>
<li>External assets.</li>
</ul></li>
<li>Liabilities:
<ul>
<li>Interbank liabilities</li>
<li>External liabilities</li>
<li>Equity</li>
</ul></li>
</ul>
<p><em>Insolvency</em> is usually considered a proxy for <em>default</em>; even though it is not technically correct, it is however a fundamental critical issue in a shock scenario.</p>
<p>The <em>assets</em> of one institution corresponds to the liabilities of another one: this creates a systemic network between them. Losses of a bank corresponds to a reduction of assets of another one, which causes shocks to propagate.</p>
<section id="default-contagion" class="level3">
<h3 class="anchored" data-anchor-id="default-contagion">Default contagion</h3>
<p>This is a <em>cascade model</em>: in this case, losses are propagated only after default. This means that the devaluation of assets has either value 1 or 0: it is a <em>linear threshold</em> model.</p>
<p>This model tries to identify when a <em>giant component of vulnerable banks</em> emerges in a network: it is characterized by the fact that a single default has effect on the whole component and all the other banks.</p>
</section>
<section id="distress-contagion" class="level3">
<h3 class="anchored" data-anchor-id="distress-contagion">Distress contagion</h3>
<p>Credit quality deterioration can however affect interbank connections even before default: stress therefore propagate before the default of the borrower, because of this effect which causes the credit rating and thus the assets value to deteriorate and even be subjected to <em>haircuts.</em></p>
<blockquote class="blockquote">
<p><strong>Real network dynamics usually are somewhere in between</strong>.</p>
</blockquote>
<p>Imagine that we have a discrete time dynamic: shocks arrive at period 1 and we are looking at each period how shocks are propagating. We can then iterate the balance sheet identity, considering the progressive equity loss of each bank. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>h</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo>=</mo><munder><munder><mrow><mi>β</mi><munder><mo>∑</mo><mi>j</mi></munder><msub><mi>Λ</mi><mrow><mi>i</mi><mo>,</mo><mi>j</mi></mrow></msub><msub><mi>h</mi><mi>j</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mi>t</mi><mo stretchy="true" form="postfix">)</mo></mrow></mrow><mo accent="true">⏟</mo></munder><mstyle mathvariant="normal"><mi>c</mi><mi>o</mi><mi>n</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>i</mi><mi>o</mi><mi>n</mi></mstyle></munder><mo>+</mo><mover><mover><msub><mi>u</mi><mi>i</mi></msub><mo accent="true">⏞</mo></mover><mstyle mathvariant="normal"><mi>e</mi><mi>x</mi><mi>o</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>o</mi><mi>u</mi><mi>s</mi><mspace width="0.222em"></mspace><mi>s</mi><mi>h</mi><mi>o</mi><mi>c</mi><mi>k</mi></mstyle></mover></mrow><annotation encoding="application/x-tex">
h_i(t +1) = \underbrace{\beta \sum_j \Lambda_{i,j} h_j(t)}_{\mathrm{contagion}} + \overbrace{u_i}^{\mathrm{exogenous \ shock}}
</annotation></semantics></math> <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Λ</mi><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math> is also the <em>leverage</em>, which is the contribution of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> towards <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math> towards the exposure and tells us how important this exposure is in relation to its equity. It is then a parameter that can be tuned to properly model the severity of the contagion.</p>
<p>We can model a <em>matrix of interbank leverage</em>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Λ</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mo>=</mo><mfrac><msub><mi>W</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><mrow><msub><mi>E</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow></mfrac></mrow><annotation encoding="application/x-tex">
\Lambda_{ij} = \frac{ W_{ij}} {E_i(0)}
</annotation></semantics></math></p>
<ul>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>W</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub><annotation encoding="application/x-tex">W_{ij}</annotation></semantics></math> is the exposure of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math> towards <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>j</mi><annotation encoding="application/x-tex">j</annotation></semantics></math>.</li>
<li><math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>E</mi><mi>i</mi></msub><mrow><mo stretchy="true" form="prefix">(</mo><mn>0</mn><mo stretchy="true" form="postfix">)</mo></mrow></mrow><annotation encoding="application/x-tex">E_i(0)</annotation></semantics></math> is the equity of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>i</mi><annotation encoding="application/x-tex">i</annotation></semantics></math>.</li>
</ul>
<blockquote class="blockquote">
<p><strong>The endogenous amplification of shocks depends on the largest eigenvalue of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>Λ</mi><annotation encoding="application/x-tex">\Lambda</annotation></semantics></math>. It is computed at <em>network level</em></strong>.</p>
</blockquote>
<p>It is a <em>centrality metric</em>, similar to the <em>eigenvector centrality</em>.</p>
<p>Leverage is basically <em>investing borrowed money</em>: it amplifies shocks. <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>λ</mi><mo>=</mo><mfrac><mstyle mathvariant="normal"><mi>a</mi><mi>s</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>s</mi></mstyle><mstyle mathvariant="normal"><mi>e</mi><mi>q</mi><mi>u</mi><mi>i</mi><mi>t</mi><mi>y</mi></mstyle></mfrac></mrow><annotation encoding="application/x-tex">
\lambda = \frac {\mathrm{assets}}{\mathrm{equity}}
</annotation></semantics></math></p>
<p>It is highly related to <em>risk</em>: a 1% asset devaluation, due to leverage, translates into a <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>λ</mi><annotation encoding="application/x-tex">\lambda</annotation></semantics></math>% devaluation of equity.</p>
<blockquote class="blockquote">
<p><strong>Diversification can be bad, because it can lead to a wider propagation of shocks, caused by the wider exposures existing between banks.</strong></p>
</blockquote>
</section>
<section id="ranking-banks-impact-and-vulnerabilty" class="level3">
<h3 class="anchored" data-anchor-id="ranking-banks-impact-and-vulnerabilty">Ranking banks: impact and vulnerabilty</h3>
<p>The most impactful banks are also the most vulnerable, which is the worst combination. Among these there are also small banks: size not always correlate to the impact of an institution to the system. This can be revealed by performing stress tests to each element of a network, to understand the systemic perfection. There is an obvious correlation between size and impact, but this is not always true.</p>
<p><br>
</p>
<p><img src="Figures/pone.0130406.g002.PNG_L.png" class="img-fluid"></p>
</section>
<section id="contagion-due-to-overlapping-portfolios" class="level3">
<h3 class="anchored" data-anchor-id="contagion-due-to-overlapping-portfolios">Contagion due to overlapping portfolios</h3>
<blockquote class="blockquote">
<p><strong>Banks are also connected indirectly through their investment portfolios.</strong></p>
</blockquote>
<p>Stress can propagate from one banks to others with common assets through <em>prices</em>: this is a <em>non-contractual, indirect connection.</em> Being exposed to the same risk can cause the following dynamics: a liquidation of assets of a insolvent institution can affect thought the downward pressure put to price the balance sheet and solvency of another institution. This can be used to model such dynamics as <em>fire-sales</em>, which can force liquidation, default and thus a de-leveraging spiral.</p>
</section>
<section id="generational-propagation" class="level3">
<h3 class="anchored" data-anchor-id="generational-propagation">Generational propagation</h3>
<p>A mathematical model of this dynamic can be devised through a tree of <em>branching processes</em>. We can have then <em>generational</em> defaults: one bankrupted bank can cause <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> other banks to fail; global cascades occur with non-zero probability if <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathvariant="double-struck"><mi>𝔼</mi></mstyle><mrow><mo stretchy="true" form="prefix">(</mo><mi>x</mi><mo stretchy="true" form="postfix">)</mo></mrow><mo>&gt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\mathbb{E}(x)&gt;1</annotation></semantics></math>.</p>
<blockquote class="blockquote">
<p><strong>Among its implications: the system is stable if <em>leverage</em> is below a <em>critical threshold.</em> </strong></p>
</blockquote>
<p>When we reach a high level of diversification we have a <em>robust yet fragile</em> system: even though the system can resist shocks, when this happens the whole system can collapse quickly as the shocks propagate really fast.</p>
</section>
</section>
<section id="combination-of-contagion-mechanisms" class="level2">
<h2 class="anchored" data-anchor-id="combination-of-contagion-mechanisms">Combination of contagion mechanisms</h2>
<p>We should also consider that in real scenarios contagions are often combined and therefore interact with each other, causing a bigger, wider effect. Moreover, we need to consider multiple agents and different sectors: not only banks, but also <em>hedge funds</em>, insurers and all institutions exposed to the financial sector.</p>
</section>
<section id="summary" class="level2">
<h2 class="anchored" data-anchor-id="summary">Summary</h2>
<ul>
<li>Network effects can be sizeable: losses might be amplified wildly.</li>
<li>DebtRank: accounting for credit quality deterioration.</li>
<li>Overlapping portfolios: stress propagates also without direct connections between banks.</li>
<li>Multi-layers: the interaction between layers matters.</li>
</ul>
</section>
</section>
<section id="exponential-random-graph-models-and-stochastic-actors-oriented-models" class="level1">
<h1>Exponential random graph models and stochastic actors oriented models</h1>
<p>We wish to understand how a network comes to be as an effect of social or natural forces: real networks are not random, therefore we need a model to study cooperative or antagonistic forces.</p>
<ul>
<li><em>Exponential random graph models</em> (ERGMs or p-models).
<ul>
<li>Cross-sectional data.</li>
<li><strong>How the network that we are observing came to be, as the result of a combination of social forces?</strong></li>
</ul></li>
<li><em>Stochastic Actor Oriented Models</em> (SAOM) and Siena (<em>Simulation Investigation for Empirical Network Analysis</em>).
<ul>
<li>In this case we wish to understand how a network changes over time.</li>
<li>Longitudinal data.</li>
<li><strong>Which social forces lead from one observed network to another?</strong></li>
</ul></li>
</ul>
<section id="ergms" class="level2">
<h2 class="anchored" data-anchor-id="ergms">ERGMs</h2>
<blockquote class="blockquote">
<p><strong>ERGMs model an observed network as the <em>long-term outcome</em> of a set of social process/mechanism/forces acting simultaneously on the ties of a network.</strong></p>
</blockquote>
<p>We can imagine different forces, depending on the subject at hand. As (<em>undirected network</em>) examples that determine a friendship network might be: overall tendency to build or refrain to build friendship ties or build friendships with people with similar characteristics.</p>
<p>Implicitly we are assuming that there are a set of underlying <em>mechanisms</em> that act as <em>forces</em> that shapes a network; we need to rely on sociological theory to find a concrete explanation. To understand their specific role, we need to <em>isolate them</em> to study their effect and tendency, net from all the tendencies of the model.</p>
<p>We always compare a real network to what would happen by chance: for example, when trying to study the effect of <em>homophily</em> on a network creation and structure, which is the tendency for ties to occur among those similar to each other, we need to take into account alternative explanations and control for <em>other network characteristics</em>.</p>
<p>Our parameters are:</p>
<ul>
<li>Each disposition <em>social force</em> is represented by a parameter <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>θ</mi><mo>∈</mo><mrow><mo stretchy="true" form="prefix">[</mo><mo>−</mo><mi>∞</mi><mo>,</mo><mi>∞</mi><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\theta \in [-\infty, \infty]</annotation></semantics></math>:
<ul>
<li>A higher positive value for the parameter indicates that the tendency is stronger.</li>
<li>A zero value indicates it is not important in shaping the network.</li>
<li>A negative value indicates a tendency in the opposite direction.</li>
</ul></li>
</ul>
<blockquote class="blockquote">
<p><strong>Each of these tendencies can be related to <em>counts of specific network properties in the observed network</em> which indicates <em>how specific tendencies will be captured in the ERGM</em>.</strong></p>
</blockquote>
<p>The sign of the effect depends on the count of a given characteristics with respect to random change:</p>
<ul>
<li>Higher than random chance yields a positive sign.</li>
<li>Equal to random chance yields a null parameter.</li>
<li>Less than random change yields a negative sign.</li>
</ul>
</section>
<section id="types-of-effect" class="level2">
<h2 class="anchored" data-anchor-id="types-of-effect">Types of effect</h2>
<ul>
<li>Baseline tendency to build a tie <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>L</mi></msub><annotation encoding="application/x-tex">\theta_L</annotation></semantics></math>:
<ul>
<li>Positive: preference to build a tie</li>
<li>Null: equal preference to build/not build a tie</li>
<li>Negative: Preference not to form a tie.</li>
<li><strong>Network property measured</strong>: number of ties (density).</li>
</ul></li>
<li>Propensity to build a tie depending on the number of ties with other nodes <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mrow><mn>2</mn><mi>S</mi></mrow></msub><annotation encoding="application/x-tex">\theta_{2S}</annotation></semantics></math>:
<ul>
<li>Positive: preference to build a tie when nodes in dyad have many other ties (<em>centralization</em>).</li>
<li>Null: no difference in preference to build a tie depending on the other ties.</li>
<li>Negative: preference to build a tie when nodes in dyad have few other ties (<em>decentralization</em>).</li>
<li><strong>Network property measured</strong>: 2-stars, alternating stars, or variants of this such as the level of centralization,</li>
</ul></li>
<li>Propensity to triadic closure <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>T</mi></msub><annotation encoding="application/x-tex">\theta_T</annotation></semantics></math>:
<ul>
<li>Positive: preference for ties between nodes who have common connections.</li>
<li>Null: no difference for ties between nodes who have and have not common connections.</li>
<li>Negative: preference for ties between nodes who have no common connections.</li>
<li><strong>Network property measured</strong>: number of closed triads.</li>
</ul></li>
<li>Differences in propensity to choose nodes based on nodal attributes (e.g.&nbsp;male/female) <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>A</mi></msub><annotation encoding="application/x-tex">\theta_A</annotation></semantics></math>:
<ul>
<li>Positive: preference to build ties with nodes with specific nodal characteristics (e.g.&nbsp;male).</li>
<li>Null: no difference in preference fo a ties to nodes with specific nodal characteristics over others.</li>
<li>Negative: preference to build a tie to nod with nodal characteristics (e.g female).</li>
<li><strong>Network property measured</strong>: number of ties involving node with specific characteristics, or difference in average degree for node with specific characteristic.</li>
</ul></li>
<li>Differences in propensity to choose nodes who are similar/different on nodal attributes (e.g.&nbsp;gender) <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>H</mi></msub><annotation encoding="application/x-tex">\theta_H</annotation></semantics></math>:
<ul>
<li>Positive: Preference to build ties with nodes with same nodal characteristic.</li>
<li>Null: No difference in preference for a ties to nodes with same or opposite nodal characteristics.</li>
<li>Negative: Preference to build a tie to nod with opposite nodal characteristics.</li>
<li><strong>Network property measured</strong>: Number of homophilous ties (level of homophily).</li>
</ul></li>
<li>Differences in propensity to build a ties between nodes who are linked by another tie (e.g distance) <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>M</mi></msub><annotation encoding="application/x-tex">\theta_M</annotation></semantics></math>:
<ul>
<li>Positive: Preference for a tie between nodes who are connected by another type of tie</li>
<li>Null: No difference in preference for a tie between nodes who are/are not connected by another type of tie.</li>
<li>Negative: Preference for a tie between nodes who are NOT connected by another type of tie</li>
<li><strong>Network property measured</strong>: number of multiplex ties.</li>
</ul></li>
</ul>
<section id="example-toy-model" class="level3">
<h3 class="anchored" data-anchor-id="example-toy-model">Example: toy model</h3>
<p>We will consider a model with three structural network effects:</p>
<ul>
<li>Edges <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>L</mi></msub><annotation encoding="application/x-tex">\theta_L</annotation></semantics></math></li>
<li>2-stars <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mrow><mn>2</mn><mi>S</mi></mrow></msub><annotation encoding="application/x-tex">\theta_{2S}</annotation></semantics></math></li>
<li>Triangles <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>T</mi></msub><annotation encoding="application/x-tex">\theta_{T}</annotation></semantics></math></li>
</ul>
<p>And two idiosyncratic effects:</p>
<ul>
<li>Differential propensity based on gender <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>A</mi></msub><annotation encoding="application/x-tex">\theta_{A}</annotation></semantics></math></li>
<li>Homophily Based on Gender <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>θ</mi><mi>H</mi></msub><annotation encoding="application/x-tex">\theta_{H}</annotation></semantics></math></li>
</ul>
<p>The observed variable is the <em>network</em> and we wish to understand how it has been created. We need to account that the observed network should be considered as the <em>combined outcome</em> of a set of tie-generating processes which jointly have led to a specific network structure. QAP accounts for all possible effects, even those who are not known; ERGMs help controlling for structural (and other relevant) tendencies when studying a specific effect.</p>
<blockquote class="blockquote">
<p><strong>ERGMs can help us disentangle the importance of different social mechanisms.</strong></p>
</blockquote>
</section>
</section>
<section id="maximum-likelihood-estimations-for-ergms" class="level2">
<h2 class="anchored" data-anchor-id="maximum-likelihood-estimations-for-ergms">Maximum likelihood estimations for ERGMs</h2>
<blockquote class="blockquote">
<p><strong>How are parameters values generated?</strong></p>
</blockquote>
<p>They are created with a version of a <em>maximum likelihood procedure</em>: <math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathvariant="double-struck"><mi>ℙ</mi></mstyle><mrow><mo stretchy="true" form="prefix">[</mo><mi>X</mi><mo>=</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>b</mi><mi>s</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow><mo>=</mo><mfrac><msup><mi>e</mi><mrow><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>θ</mi><mi>i</mi></msub><msub><mi>z</mi><mi>i</mi></msub><msub><mi>x</mi><mrow><mi>o</mi><mi>b</mi><mi>s</mi></mrow></msub></mrow></msup><mrow><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mrow><mi>a</mi><mi>l</mi><mi>l</mi></mrow></munderover><msup><mi>e</mi><mrow><munder><mo>∑</mo><mi>i</mi></munder><msub><mi>θ</mi><mi>i</mi></msub><msub><mi>z</mi><mi>i</mi></msub><msub><mi>x</mi><mrow><mi>o</mi><mi>b</mi><mi>s</mi></mrow></msub></mrow></msup></mrow></mfrac></mrow><annotation encoding="application/x-tex">
\mathbb{P}[X = x_{obs}] = \frac {e^{\sum_i \theta_i z_i x_{obs}}} {\sum^{all}_{k = 1} e^{\sum_i \theta_i z_i x_{obs}}}
</annotation></semantics></math></p>
<p>We wish to maximize this function: our objective is to find the value for the set of parameters (<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>θ</mi><annotation encoding="application/x-tex">\theta</annotation></semantics></math>) that will maximize the probability of observing the graph we did maximize the value of <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mstyle mathvariant="double-struck"><mi>ℙ</mi></mstyle><mrow><mo stretchy="true" form="prefix">[</mo><mi>X</mi><mo>=</mo><msub><mi>x</mi><mrow><mi>o</mi><mi>b</mi><mi>s</mi></mrow></msub><mo stretchy="true" form="postfix">]</mo></mrow></mrow><annotation encoding="application/x-tex">\mathbb{P}[X = x_{obs}]</annotation></semantics></math>.</p>
<p>Because of this complex dependencies, finding the optimal combination across the set of parameters in a ERGM is not a closed form solution; a simulation-based algorithm is used to approximate the ML estimates. However this is computationally expensive, therefore we cannot compute all the simulations: we need to find an algorithm that allows us to start from some random <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>θ</mi><annotation encoding="application/x-tex">\theta</annotation></semantics></math> and find a optimal solution.</p>
<blockquote class="blockquote">
<p><strong>We generate likely networks that would come about when a specific set of tendencies is at work.</strong></p>
</blockquote>
<p>When this process converges towards a stable distribution, the resulting sample of networks will be representative of networks generated by a model with the specified parameters: in this case, the approach used is a <em>Markov chain approach.</em></p>
<section id="markov-chain-approach" class="level3">
<h3 class="anchored" data-anchor-id="markov-chain-approach">Markov chain approach</h3>
<p>At each time step, starting from a random network with <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>n</mi><annotation encoding="application/x-tex">n</annotation></semantics></math> nodes, we apply the specific parameters values on selected dyads; this is performed many times: the probability of generating a tie in that dyad is the result of the parameter values being used and the current surrounding of the dyad. This sequential process in which a tie decision is solely based on the current structure of the network (we therefore have a Markov process).</p>
<p>Over time this process will start generating <em>independent</em> networks that <em>follow the selected rules</em>: this way we create the <em>denominator</em> of the ML function. The numerator is selected as an hyperparameter and thus we are able to compute the estimates of every coefficient: to approximate ML estimators we need to search for the set of parameter values that generate networks that are similar to our observed network (with regard to the properties for the select parameters in the model).</p>
<blockquote class="blockquote">
<p><strong>If this procedure succeed, networks that are similar to our observed network will emerge</strong>.</p>
</blockquote>
<p>This means that the values selected are the (unique) approximate values for the ML estimates.</p>
<p>If in the end of this process the average of each property for the simulated networks is very close to the corresponding value for the observed network: however, convergence will not always be reached and it is fundamental to check this in detail.</p>
<blockquote class="blockquote">
<p><strong>Appropriate parameter selection is fundamental to obtain convergence</strong>.</p>
</blockquote>
</section>
<section id="parameter-selection" class="level3">
<h3 class="anchored" data-anchor-id="parameter-selection">Parameter selection</h3>
<ul>
<li>Control for alternative explanations which are embodied in specific parameters. We need to count the right forces.</li>
<li>We want to achieve convergence: some implementations are better than others.</li>
</ul>
</section>
</section>
<section id="goodness-of-fit" class="level2">
<h2 class="anchored" data-anchor-id="goodness-of-fit">Goodness of fit</h2>
<p>We need to understand if the generated network is able to approximate correctly the observed network. When we generate them, we wish them to be close not only to those parameters included in the model, but also also with respect other statistics not explicitly accounted for in the model.</p>
<p>For simulated we can now compute other configurational effects and statistics and compare these average numbers to their corresponding values in the observed data. If the values of these properties are close enough, the model deemed adequate, otherwise we will need to consider alternative or additional effects.</p>
</section>
<section id="ergms-in-r" class="level2">
<h2 class="anchored" data-anchor-id="ergms-in-r">ERGMs in <code>R</code></h2>
<p>We will use the following network:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>ASNR_Fig15x1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$ProjectInfo
$ProjectInfo$ProjectName
[1] "ASNR_Fig15x1"

$ProjectInfo$GeneralDescription
[1] "This is a toy dataset among 14 people used in Chapter 15 of Borgatti, Everett, Johnson and Agneessens (2022) for running ERGMs. (See Figure 15.1)"

$ProjectInfo$AttributesDescription
[1] "Gender:      gender of person"

$ProjectInfo$NetworksDescription
[1] "Network 1 - Network A" "Network 2 - Network B" "Network 3 - Network C"

$ProjectInfo$References
[1] "Borgatti, S., Everett, M., Johnson, J. and Agneessens, F. (2022). Analyzing Social Networks with R. Sage"


$Attributes
    Gender
a01      0
a02      0
a03      0
a04      1
a05      0
a06      0
a07      0
a08      1
a09      1
a10      1
a11      1
a12      1
a13      1
a14      0

$NetworkInfo
       Name Mode Directed Values
1 Network A    A    FALSE Binary
2 Network B    A    FALSE Binary
3 Network C    A    FALSE Binary

$`Network A`
    a01 a02 a03 a04 a05 a06 a07 a08 a09 a10 a11 a12 a13 a14
a01   0   1   1   1   0   0   0   0   0   0   0   0   0   0
a02   1   0   1   1   1   0   0   0   0   0   0   0   0   0
a03   1   1   0   1   0   0   0   0   0   0   0   0   0   0
a04   1   1   1   0   1   0   0   0   1   1   0   0   0   0
a05   0   1   0   1   0   1   1   1   0   0   0   0   0   0
a06   0   0   0   0   1   0   1   1   0   0   0   0   0   0
a07   0   0   0   0   1   1   0   1   0   0   0   0   0   1
a08   0   0   0   0   1   1   1   0   0   0   0   0   0   1
a09   0   0   0   1   0   0   0   0   0   1   0   1   1   0
a10   0   0   0   1   0   0   0   0   1   0   1   1   1   0
a11   0   0   0   0   0   0   0   0   0   1   0   1   1   1
a12   0   0   0   0   0   0   0   0   1   1   1   0   1   0
a13   0   0   0   0   0   0   0   0   1   1   1   1   0   1
a14   0   0   0   0   0   0   1   1   0   0   1   0   1   0

$`Network B`
    a01 a02 a03 a04 a05 a06 a07 a08 a09 a10 a11 a12 a13 a14
a01   0   0   0   0   0   0   0   1   0   0   0   0   0   0
a02   0   0   0   0   0   0   0   1   0   0   0   0   0   0
a03   0   0   0   1   0   0   0   0   0   0   0   0   0   0
a04   0   0   1   0   0   0   0   1   0   0   0   0   0   0
a05   0   0   0   0   0   0   0   0   0   0   0   0   0   0
a06   0   0   0   0   0   0   1   0   0   0   0   0   0   0
a07   0   0   0   0   0   1   0   0   0   0   0   0   1   0
a08   1   1   0   1   0   0   0   0   1   0   1   1   1   0
a09   0   0   0   0   0   0   0   1   0   1   0   0   0   1
a10   0   0   0   0   0   0   0   0   1   0   1   0   0   0
a11   0   0   0   0   0   0   0   1   0   1   0   0   0   0
a12   0   0   0   0   0   0   0   1   0   0   0   0   1   0
a13   0   0   0   0   0   0   1   1   0   0   0   1   0   0
a14   0   0   0   0   0   0   0   0   1   0   0   0   0   0

$`Network C`
    a01 a02 a03 a04 a05 a06 a07 a08 a09 a10 a11 a12 a13 a14
a01   0   0   0   1   0   0   0   0   1   1   0   0   0   0
a02   0   0   1   1   0   0   0   0   1   1   0   0   0   0
a03   0   1   0   0   0   0   0   1   1   0   0   0   0   0
a04   1   1   0   0   1   0   0   0   0   0   0   0   0   0
a05   0   0   0   1   0   1   0   0   1   0   0   1   0   0
a06   0   0   0   0   1   0   0   0   0   1   1   0   1   0
a07   0   0   0   0   0   0   0   0   0   0   1   1   1   0
a08   0   0   1   0   0   0   0   0   1   0   0   0   0   0
a09   1   1   1   0   1   0   0   1   0   0   0   0   0   0
a10   1   1   0   0   0   1   0   0   0   0   0   0   0   0
a11   0   0   0   0   0   1   1   0   0   0   0   0   0   1
a12   0   0   0   0   1   0   1   0   0   0   0   0   0   1
a13   0   0   0   0   0   1   1   0   0   0   0   0   0   1
a14   0   0   0   0   0   0   0   0   0   0   1   1   1   0</code></pre>
</div>
</div>
<p>The <code>ergm</code> package needs a <code>network</code> object to perform its computations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>E14A <span class="ot">&lt;-</span> <span class="fu">as.network</span>(ASNR_Fig15x1<span class="sc">$</span><span class="st">`</span><span class="at">Network A</span><span class="st">`</span>,<span class="at">directed=</span>F)</span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a>E14_ATTR <span class="ot">&lt;-</span> ASNR_Fig15x1<span class="sc">$</span>Attributes</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a>E14_ATTR</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>    Gender
a01      0
a02      0
a03      0
a04      1
a05      0
a06      0
a07      0
a08      1
a09      1
a10      1
a11      1
a12      1
a13      1
a14      0</code></pre>
</div>
</div>
<p>With the following command we will attach the <em>gender</em> attribute to the network.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>E14A <span class="sc">%v%</span> <span class="st">"Gender"</span> <span class="ot">&lt;-</span> E14_ATTR<span class="sc">$</span>Gender</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>A simple plot:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gplot</span>(</span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a>  E14A,</span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">gmode=</span><span class="st">"graph"</span>,</span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">displaylabels=</span>T,</span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vertex.col=</span>E14A <span class="sc">%v%</span> <span class="st">"Gender"</span><span class="sc">*</span><span class="dv">2</span></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="Network_Analysis_files/figure-html/unnamed-chunk-120-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>We are now ready to compute a model with only structural variables:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">516</span>)</span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>M.E14A<span class="fl">.1</span><span class="ot">&lt;-</span><span class="fu">ergm</span>(E14A <span class="sc">~</span> edges <span class="sc">+</span> <span class="fu">kstar</span>(<span class="dv">2</span>) <span class="sc">+</span> triangle)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting maximum pseudolikelihood estimation (MPLE):</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Obtaining the responsible dyads.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Evaluating the predictor and response matrix.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Maximizing the pseudolikelihood.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Finished MPLE.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting Monte Carlo maximum likelihood estimation (MCMLE):</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 1 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: 'glpk' selected as the solver, but package 'Rglpk' is not available;
falling back to 'lpSolveAPI'. This should be fine unless the sample size and/or
the number of parameters is very big.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 2.4179.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating equations are not within tolerance region.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 2 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 1.1313.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating equations are not within tolerance region.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 3 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 0.1487.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating equations are not within tolerance region.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 4 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 0.0103.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Convergence test p-value: 0.0101. Not converged with 99% confidence; increasing sample size.
Iteration 5 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.2067.
Estimating equations are not within tolerance region.
Iteration 6 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.1379.
Estimating equations are not within tolerance region.
Iteration 7 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.2112.
Estimating equations are not within tolerance region.
Estimating equations did not move closer to tolerance region more than 1 time(s) in 4 steps; increasing sample size.
Iteration 8 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.1387.
Estimating equations are not within tolerance region.
Iteration 9 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0234.
Convergence test p-value: 0.3428. Not converged with 99% confidence; increasing sample size.
Iteration 10 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0025.
Convergence test p-value: 0.0353. Not converged with 99% confidence; increasing sample size.
Iteration 11 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0391.
Convergence test p-value: 0.0009. Converged with 99% confidence.
Finished MCMLE.
Evaluating log-likelihood at the estimate. Fitting the dyad-independent submodel...
Bridging between the dyad-independent submodel and the full model...
Setting up bridge sampling...
Using 16 bridges: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 .
Bridging finished.

This model was fit using MCMC.  To examine model diagnostics and check
for degeneracy, use the mcmc.diagnostics() function.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(M.E14A<span class="fl">.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = E14A ~ edges + kstar(2) + triangle)

Monte Carlo Maximum Likelihood Results:

         Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges      8.9931     3.7798      0   2.379  0.01735 *  
kstar2    -1.6571     0.5256      0  -3.153  0.00162 ** 
triangle   1.7035     0.2840      0   5.998 &lt; 0.0001 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 126.15  on 91  degrees of freedom
 Residual Deviance:  80.62  on 88  degrees of freedom
 
AIC: 86.62  BIC: 94.15  (Smaller is better. MC Std. Err. = 0.6533)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">738</span>)</span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a>M.E14A<span class="fl">.2</span><span class="ot">&lt;-</span><span class="fu">ergm</span>(E14A <span class="sc">~</span> edges <span class="sc">+</span> <span class="fu">nodefactor</span>(<span class="st">"Gender"</span>,<span class="at">levels=</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">nodematch</span>(<span class="st">"Gender"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting maximum pseudolikelihood estimation (MPLE):</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Obtaining the responsible dyads.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Evaluating the predictor and response matrix.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Maximizing the pseudolikelihood.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Finished MPLE.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Evaluating log-likelihood at the estimate. </code></pre>
</div>
<div class="sourceCode cell-code" id="cb226"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(M.E14A<span class="fl">.2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = E14A ~ edges + nodefactor("Gender", levels = 2) + 
    nodematch("Gender"))

Maximum Likelihood Results:

                    Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges                -1.6514     0.4731      0  -3.490 0.000482 ***
nodefactor.Gender.1   0.2904     0.3134      0   0.927 0.354085    
nodematch.Gender      1.1659     0.4731      0   2.464 0.013732 *  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 126.2  on 91  degrees of freedom
 Residual Deviance: 106.6  on 88  degrees of freedom
 
AIC: 112.6  BIC: 120.1  (Smaller is better. MC Std. Err. = 0)</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb228"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">343</span>)</span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a>M.E14A<span class="fl">.3</span><span class="ot">&lt;-</span><span class="fu">ergm</span>(</span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a>  E14A <span class="sc">~</span> edges <span class="sc">+</span> <span class="fu">kstar</span>(<span class="dv">2</span>) <span class="sc">+</span> triangle <span class="sc">+</span> <span class="fu">nodefactor</span>(<span class="st">"Gender"</span>,<span class="at">levels=</span><span class="dv">2</span>) <span class="sc">+</span> <span class="fu">nodematch</span>(<span class="st">"Gender"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting maximum pseudolikelihood estimation (MPLE):</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Obtaining the responsible dyads.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Evaluating the predictor and response matrix.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Maximizing the pseudolikelihood.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Finished MPLE.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Starting Monte Carlo maximum likelihood estimation (MCMLE):</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 1 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 0.9970.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 2.1464.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating equations are not within tolerance region.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 2 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 0.6540.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating equations are not within tolerance region.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 3 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 0.1568.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Estimating equations are not within tolerance region.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Iteration 4 of at most 60:</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Optimizing with step length 1.0000.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>The log-likelihood improved by 0.0662.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Convergence test p-value: 0.9681. Not converged with 99% confidence; increasing sample size.
Iteration 5 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.1694.
Estimating equations are not within tolerance region.
Iteration 6 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.2931.
Estimating equations are not within tolerance region.
Estimating equations did not move closer to tolerance region more than 1 time(s) in 4 steps; increasing sample size.
Iteration 7 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.1828.
Estimating equations are not within tolerance region.
Iteration 8 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0597.
Convergence test p-value: 0.4143. Not converged with 99% confidence; increasing sample size.
Iteration 9 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0048.
Convergence test p-value: 0.1533. Not converged with 99% confidence; increasing sample size.
Iteration 10 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0089.
Convergence test p-value: 0.0220. Not converged with 99% confidence; increasing sample size.
Iteration 11 of at most 60:
Optimizing with step length 1.0000.
The log-likelihood improved by 0.0260.
Convergence test p-value: 0.0005. Converged with 99% confidence.
Finished MCMLE.
Evaluating log-likelihood at the estimate. Fitting the dyad-independent submodel...
Bridging between the dyad-independent submodel and the full model...
Setting up bridge sampling...
Using 16 bridges: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 .
Bridging finished.

This model was fit using MCMC.  To examine model diagnostics and check
for degeneracy, use the mcmc.diagnostics() function.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(M.E14A<span class="fl">.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
ergm(formula = E14A ~ edges + kstar(2) + triangle + nodefactor("Gender", 
    levels = 2) + nodematch("Gender"))

Monte Carlo Maximum Likelihood Results:

                    Estimate Std. Error MCMC % z value Pr(&gt;|z|)    
edges                10.6220     4.8860      0   2.174  0.02971 *  
kstar2               -2.0941     0.7393      0  -2.832  0.00462 ** 
triangle              1.6298     0.2765      0   5.894 &lt; 0.0001 ***
nodefactor.Gender.1   1.4967     0.9452      0   1.584  0.11329    
nodematch.Gender      0.4762     0.2592      0   1.837  0.06616 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

     Null Deviance: 126.15  on 91  degrees of freedom
 Residual Deviance:  72.57  on 86  degrees of freedom
 
AIC: 82.57  BIC: 95.12  (Smaller is better. MC Std. Err. = 0.2437)</code></pre>
</div>
</div>
</section>
</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Taking the <em>log</em> of both sides and solving for <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>h</mi><annotation encoding="application/x-tex">h</annotation></semantics></math>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>While in relative terms the size of the giant components remains negligible at <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover><mi>k</mi><mo accent="true">‾</mo></mover><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">\bar{k} = 1</annotation></semantics></math>, in absolute terms there is a significant jump in the size of the largest component.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>This is a power law; the number of components decreases very fast.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>Its tentative models lead to the concept of <em>scale-free networks</em>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn5"><p>This is an important aspect that needs to be checked.<a href="#fnref5" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn6"><p>Scale of medium size and extent.<a href="#fnref6" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>